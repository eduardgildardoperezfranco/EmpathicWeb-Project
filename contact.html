<!DOCTYPE html>
<html lang="en" data-i18n-lang>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="desarrollo web Colombia, web development Colombia, ciberseguridad Colombia, cybersecurity Colombia, seguridad personal Colombia, personal security Colombia, guardaespaldas Colombia, bodyguard Colombia, desarrollo de software Colombia, software development Colombia, aplicaciones m√≥viles Colombia, mobile app development Colombia, comercio electr√≥nico Colombia, ecommerce Colombia, consultor√≠a IT Colombia, IT consulting Colombia, dise√±o web Colombia, web design Colombia, inteligencia artificial Colombia, AI Colombia, blockchain Colombia, blockchain Colombia, servicios en la nube Colombia, cloud services Colombia, EmpathicWeb, Eduard Gildardo Perez Franco, empathic web development Colombia, desarrollo web emp√°tico Colombia, cybersecurity Colombia, ciberseguridad Colombia, personal security services Bogot√°, servicios de seguridad personal Bogot√°, bodyguard services Colombia, servicios de guardaespaldas Colombia, empathy training for businesses, entrenamiento de empat√≠a para empresas, 3D web design Colombia, dise√±o web 3D Colombia, AI integration Colombia, integraci√≥n de IA Colombia, blockchain development Colombia, desarrollo blockchain Colombia, IoT solutions Colombia, soluciones IoT Colombia, e-commerce platforms Colombia, plataformas de comercio electr√≥nico Colombia, international business Colombia, negocios internacionales Colombia, bilingual web development, desarrollo web biling√ºe, custom software development Colombia, desarrollo de software personalizado Colombia, full stack web development, desarrollo web full stack, mobile app development Colombia, desarrollo de aplicaciones m√≥viles Colombia, cloud services Colombia, servicios en la nube Colombia, IT consulting Colombia, consultor√≠a IT Colombia, systems engineering Colombia, ingenier√≠a de sistemas Colombia, technical support Colombia, soporte t√©cnico Colombia, computer security Colombia, seguridad inform√°tica Colombia, virus removal Colombia, eliminaci√≥n de virus Colombia, data recovery Colombia, recuperaci√≥n de informaci√≥n Colombia, online privacy Colombia, privacidad en l√≠nea Colombia, digital backup Colombia, respaldo digital Colombia, website maintenance Colombia, mantenimiento de sitios web Colombia, executive protection Colombia, protecci√≥n ejecutiva Colombia, event security Colombia, seguridad de eventos Colombia, infrastructure security Colombia, seguridad de infraestructura Colombia, demining operations Colombia, operaciones de desminado Colombia, digital transformation Colombia, transformaci√≥n digital Colombia, software development Colombia, desarrollo de software Colombia, professional programmer Colombia, programador profesional Colombia, custom applications Colombia, aplicaciones personalizadas Colombia, frontend backend development Colombia, desarrollo frontend backend Colombia, mobile applications Colombia, aplicaciones m√≥viles Colombia, app development Colombia, desarrollo de apps Colombia, online store Colombia, tienda en l√≠nea Colombia, software maintenance Colombia, mantenimiento de software Colombia, computer systems integration Colombia, integraci√≥n de sistemas inform√°ticos Colombia, cloud programming Colombia, programaci√≥n en la nube Colombia, software developer Colombia, desarrollador de software Colombia, systems engineer Colombia, ingeniero de sistemas Colombia, IT specialist Colombia, especialista IT Colombia, systems technician Colombia, t√©cnico en sistemas Colombia, technological consulting Colombia, consultor√≠a tecnol√≥gica Colombia, digital solutions Colombia, soluciones digitales Colombia, data backup Colombia, respaldo de datos Colombia, personal security audit Colombia, auditor√≠a de seguridad personal Colombia, Bogot√°, Medell√≠n, Cali, Barranquilla, programming services Bogot√°, servicios de programaci√≥n Bogot√°, cybersecurity Medell√≠n, ciberseguridad Medell√≠n, empathic technology, tecnolog√≠a emp√°tica, emotional intelligence web development, desarrollo web con inteligencia emocional, human-centric design Colombia, dise√±o centrado en el humano Colombia, security web development, desarrollo web de seguridad, empathic web design, dise√±o web emp√°tico, Cybersicherheitsberatung ben√∂tigt, Services de s√©curit√© personnelle, Servizi di protezione esecutiva, Treinamento de empatia para empresas, 3D„Ç¶„Çß„Éñ„Éá„Ç∂„Ç§„É≥, ‰∫∫Â∑•Êô∫ËÉΩÈõÜÊàê, –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–ª–æ–∫—á–µ–π–Ω–∞, ÿ≠ŸÑŸàŸÑ ÿ•ŸÜÿ™ÿ±ŸÜÿ™ ÿßŸÑÿ£ÿ¥Ÿäÿßÿ°, Ï†ÑÏûêÏÉÅÍ±∞Îûò ÌîåÎû´Ìèº, Expansi√≥n internacional de negocios, Meertalige webontwikkeling, Anpassad programvaruutveckling, Pe≈Çnostackowy rozw√≥j stron internetowych, Mobil uygulama geli≈ütirme, Cloudov√© slu≈æby">
    <title data-i18n="title">EmpathicWeb - Contact</title>
    <link rel="icon" type="image/png" href="assets/Logo/Logo_3d-brain.png">
    <link rel="stylesheet" href="Style.css">
    <link rel="stylesheet" href="fluid-style.css">
    <!-- Font Awesome for social media icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- EmailJS for direct email sending -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <!-- Background video with fallback for unsupported browsers -->
    <video id="bg-video"
           class=""
           autoplay
           muted
           loop
           playsinline
           preload="metadata"
           poster="assets/Logo/Logo_3d-brain.png"
           width="1920"
           height="1080">
        <source src="assets/Logo/VideoLogo_3d-brain.mp4" type="video/mp4">
        <!-- Fallback content for browsers without video support -->
        <div class="video-fallback" role="alert">
            <p data-i18n="video.fallback1">Use another browser if you couldn't see the Complete design </p><video data-i18n="video.fallback2"> tag.</p>
            <p data-i18n="video.download">Please <a href="assets/Logo/VideoLogo_3d-brain.mp4" download="VideoLogo_3d-brain.mp4">download the video</a> to view it.</p>
        </div>
    </video>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo" data-i18n="nav.logo">
                <video src="assets/Logo/VideoLogo_3d-brain.mp4" class="nav-logo-img" autoplay muted loop playsinline></video>
                EmpathicWeb
            </a>
            <ul class="nav-menu" id="nav-menu">
                <li class="nav-item"><a href="index.html" class="nav-link" data-i18n="nav.home">Home</a></li>
                <li class="nav-item"><a href="about/about.html" class="nav-link" data-i18n="nav.about">About</a></li>
                <li class="nav-item"><a href="Projects/projects.html" class="nav-link" data-i18n="nav.projects">Projects</a></li>
                <li class="nav-item"><a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a></li>
            </ul>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- WhatsApp Floating Button -->
    <div class="whatsapp-container">
        <div class="whatsapp-icon">
            <a href="https://wa.me/573108005004" target="_blank" rel="noopener noreferrer" aria-label="Contact us on WhatsApp">
                <i class="fab fa-whatsapp"></i>
            </a>
        </div>
        <div class="whatsapp-popup">
            <p>I have cognition but I can not guess, talk with me!!!</p>
        </div>
    </div>

    <div class="container">
        <header class="title-container">
            <h1 class="title-3d parallax-element" data-i18n="contact.title">Contact</h1>
        </header>
        <main class="content">
            <section id="contact" class="content parallax-element">

                <p data-i18n="contact.description">
                    <span class="pulse-word">Are you ready to evolve, rise to your next challenge, or ignite real progress? I collaborate with bold minds and passionate souls who refuse to settle for average. Whether you're launching a transformative project, seeking strategic growth, or simply craving a breakthrough‚ÄîI'm here to walk that path with you.

 Let‚Äôs turn your vision into momentum. Reach out via email, phone, or social media‚Äîyour next leap forward starts with a conversation...üì©</span>
                </p>
                <p data-i18n="contact.email"><i class="fas fa-envelope"></i> Email: <a href="mailto:eduardgildardoperezfranco@empathicweb.online?subject=EmpathicWeb%20Inquiry%20-%20Contact%20Form">eduardgildardoperezfranco@empathicweb.online</a> | <a href="mailto:eduardgildardoperezfranco@empathicweb.online?subject=EmpathicWeb%20Inquiry%20-%20Contact%20Form">eduardgildardoperezfranco@empathicweb.online</a></p>
                <!-- Contact Form Section -->
                <section id="contact-form" class="content parallax-element contact-holo">
                    <h2 class="contact-title" data-i18n="contact.h2">Get in Touch for International Business Opportunities</h2>
                    <p class="contact-subtitle" data-i18n="contact.subtitle">Transform your global operations with empathic technology. I partner with founders, agencies, and innovators worldwide to deliver bespoke solutions in web development, cybersecurity, and personal security.</p>
                    <div class="bilingual-highlight">
                        <p><i class="fas fa-language"></i> <strong>Bilingual Expertise:</strong> Certified English B2+ with native Spanish proficiency ensures flawless communication and cultural alignment in all international projects. Your vision, perfectly understood and executed.</p>
                    </div>

                    <div class="contact-interface">
                        <section id="social-links-section" class="contact-card">
                            <h3 class="contact-title">Extend the Dialogue: Connect Through Your Preferred Channel</h3>
                            <ul class="social-links">
                                <li><a href="https://www.linkedin.com/in/eduard-perez-331470b7/" target="_blank" rel="noopener noreferrer" data-i18n="social.linkedin"><i class="fab fa-linkedin"></i> LinkedIn</a></li>
                                <li><a href="https://www.facebook.com/EduardGildardoPerezFranco" target="_blank" rel="noopener noreferrer" data-i18n="social.facebook"><i class="fab fa-facebook"></i> Facebook</a></li>
                                <li><a href="https://www.instagram.com/eduardgildardoperezfranco" target="_blank" rel="noopener noreferrer" data-i18n="social.instagram"><i class="fab fa-instagram"></i> Instagram</a></li>
                                <li><a href="https://wa.me/573108005004" target="_blank" rel="noopener noreferrer" data-i18n="social.whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp</a></li>
                                <li><a href="https://x.com/FEgpf" target="_blank" rel="noopener noreferrer" data-i18n="social.twitter"><i class="fab fa-twitter"></i> Twitter</a></li>
                                <li><a href="https://github.com/eduardgildardoperezfranco/EmpathicWeb" target="_blank" rel="noopener noreferrer" data-i18n="social.github"><i class="fab fa-github"></i> GitHub</a></li>
                                <li><a href="https://www.tiktok.com/@eduardg.perezfranco" target="_blank" rel="noopener noreferrer" data-i18n="social.tiktok"><i class="fab fa-tiktok"></i> TikTok</a></li>
                            </ul>
                        </section>
                        <article class="contact-card contact-info-card" id="empathic-partner">
                            <h3><i class="fas fa-handshake"></i> Your Empathic Partner in Action</h3>
                            <ul class="info-list">
                                <li><span>Basic Website</span><strong>From 1,500,000 COP</strong></li>
                                <li><span>Business Website</span><strong>From 2,500,000 COP</strong></li>
                                <li><span>E-commerce Platform</span><strong>From 4,000,000 COP</strong></li>
                                <li><span>Website Management</span><strong>From 500,000 COP / month</strong></li>
                                <li><span>Cybersecurity Consulting</span><strong>From 1,000,000 COP</strong></li>
                                <li><span>Personal Security Services</span><strong>300,000 COP / day</strong></li>
                                <li><span>Empathy Training</span><strong>800,000 COP / session</strong></li>
                            </ul>
                            <div class="info-badges">
                                <span class="badge"><i class="fas fa-wallet"></i> Flexible Payment 30/70</span>
                                <span class="badge"><i class="fas fa-shield-alt"></i> 30-Day Guarantee</span>
                                <span class="badge"><i class="fas fa-globe-americas"></i> Global Reach</span>
                                <span class="badge"><i class="fas fa-heart"></i> Empathic Approach</span>
                            </div>

                            <p class="availability">Exclusive opportunity: With over 20 years of expertise, I bring unparalleled dedication. Limited slots available‚Äîconnect now for a personalized consultation that transforms your vision into reality.</p>
                        </article>

                        <form name="contact" method="POST" data-netlify="true" data-netlify-honeypot="bot-field" enctype="application/x-www-form-urlencoded" class="contact-card contact-form-card project-brief-card" id="contact-intake">
                            <div class="form-heading" style="text-align: center;">
                                <h3 data-i18n="form.title" style="font-size: 2rem;">Flexible Project Inquiry Form</h3>
                                <p data-i18n="form.description" style="font-size: 1.2rem;">‚ú® <strong>Share your vision with us!</strong> The more details you provide, the better we can understand your needs and create a solution that exceeds your expectations. Every detail matters in crafting your perfect project.</p>
                            </div>

                            <!-- Honeypot field for spam protection -->
                            <div style="display: none;">
                                <label>Don't fill this out if you're human: <input name="bot-field" /></label>
                            </div>
                            
                            <!-- Advisory Section -->
                            <div class="advisory-card" style="background: linear-gradient(135deg, rgba(52, 152, 219, 0.15) 0%, rgba(142, 68, 173, 0.15) 100%); border: 1px solid #3498db; color: #2c3e50; padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.1);">
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <div style="background: #3498db; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                        <i class="fas fa-lightbulb" style="color: white; font-size: 1.2rem;"></i>
                                    </div>
                                    <div>
                                        <h4 style="margin: 0; color: #2980b9; font-size: 1.2rem;"><strong>üéØ Your Vision, Our Expertise</strong></h4>
                                        <p style="margin: 5px 0 0 0; color: #7f8c8d; font-size: 0.9rem;">Transform your ideas into reality with personalized guidance</p>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; border-left: 3px solid #27ae60;">
                                        <h5 style="margin: 0 0 8px 0; color: #27ae60; font-size: 0.95rem;"><i class="fas fa-star"></i> Why Detailed Information Matters:</h5>
                                        <ul style="margin: 0; padding-left: 20px; font-size: 0.85rem; line-height: 1.5;">
                                            <li><strong style="color: #27ae60;">üéØ Precision:</strong> <span style="color: #2ecc71;">Specific details = accurate solutions</span></li>
                                            <li><strong style="color: #27ae60;">üí∞ Budget Clarity:</strong> <span style="color: #2ecc71;">Avoid surprises with upfront estimates</span></li>
                                            <li><strong style="color: #27ae60;">‚ö° Faster Delivery:</strong> <span style="color: #2ecc71;">Less back-and-forth, more progress</span></li>
                                            <li><strong style="color: #27ae60;">‚ú® Quality Results:</strong> <span style="color: #2ecc71;">Tailored to your exact needs</span></li>
                                        </ul>
                                    </div>
                                    
                                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; border-left: 3px solid #e67e22;">
                                        <h5 style="margin: 0 0 8px 0; color: #e67e22; font-size: 0.95rem;"><i class="fas fa-gem"></i> What You Gain:</h5>
                                        <ul style="margin: 0; padding-left: 20px; font-size: 0.85rem; line-height: 1.5;">
                                            <li><strong style="color: #e67e22;">üîç Expert Analysis:</strong> <span style="color: #f39c12;">20+ years of experience applied</span></li>
                                            <li><strong style="color: #e67e22;">üìä Market Research:</strong> <span style="color: #f39c12;">Colombian market insights included</span></li>
                                            <li><strong style="color: #e67e22;">üí° Innovation:</strong> <span style="color: #f39c12;">Latest technologies & trends</span></li>
                                            <li><strong style="color: #e67e22;">üõ°Ô∏è Risk Mitigation:</strong> <span style="color: #f39c12;">Proven methodologies</span></li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; border-left: 3px solid #9b59b6; margin-bottom: 15px;">
                                    <h5 style="margin: 0 0 8px 0; color: #9b59b6; font-size: 0.95rem;"><i class="fas fa-heart"></i> Empathic Approach:</h5>
                                    <p style="margin: 0; font-size: 0.9rem; line-height: 1.6;">
                                        <strong style="color: #9b59b6;">Your success is our mission.</strong> <span style="color: #9b59b6;">Every detail you share helps us understand your vision, challenges, and goals. This isn't just a transaction‚Äîit's a partnership built on trust, expertise, and genuine care for your project's success.</span>
                                    </p>
                                </div>
                                
                                <div style="display: flex; align-items: center; justify-content: space-between; padding: 15px; background: rgba(39, 174, 96, 0.1); border-radius: 8px; border-left: 3px solid #27ae60;">
                                    <div style="display: flex; align-items: center;">
                                        <i class="fas fa-check-circle" style="color: #27ae60; font-size: 1.5rem; margin-right: 15px;"></i>
                                        <div>
                                            <strong style="color: #27ae60; font-size: 1.1rem;">Ready to Begin?</strong>
                                            <p style="margin: 2px 0 0 0; color: #7f8c8d; font-size: 0.85rem;">Your detailed input = Our exceptional delivery</p>
                                        </div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="color: #e67e22; font-weight: bold; font-size: 0.9rem;">30-Day Satisfaction Guarantee</div>
                                        <div style="color: #7f8c8d; font-size: 0.8rem;">Flexible Payment Terms ‚Ä¢ 24h Response Time</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Contact Information Section -->
                            <div class="form-section" style="background: rgba(155, 89, 182, 0.1); border: 1px solid #9b59b6; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                                <h4 style="margin: 0 0 15px 0; color: #8e44ad;"><i class="fas fa-address-card"></i> Contact Information</h4>
                                <div class="input-row">
                                    <div class="input-chip">
                                        <label for="email"><i class="fas fa-envelope"></i>Email Address *</label>
                                        <input type="email" id="email" name="email" placeholder="your.email@example.com" autocomplete="email" required>
                                        <div class="inline-hint"><i class="fas fa-info-circle"></i>Prefer your frequent email or corporate address - ensures timely project updates and communication.</div>
                                    </div>
                                    <div class="input-chip">
                                        <label for="name"><i class="fas fa-user"></i>Full Name *</label>
                                        <input type="text" id="name" name="name" placeholder="Your full name" autocomplete="name" required>
                                        <div class="inline-hint"><i class="fas fa-info-circle"></i>Provide your full name.</div>
                                    </div>
                                </div>
                                <div class="input-row">
                                    <div class="input-chip">
                                        <label for="phone"><i class="fas fa-phone"></i>Phone / WhatsApp</label>
                                        <input type="tel" id="phone" name="phone" placeholder="+57 XXX XXX XXXX" autocomplete="tel">
                                        <div class="inline-hint"><i class="fas fa-info-circle"></i>Add country code for WhatsApp.</div>
                                    </div>
                                    <div class="input-chip">
                                        <label for="country"><i class="fas fa-globe"></i>Country</label>
                                        <input type="text" id="country" name="country" placeholder="Colombia" autocomplete="country-name">
                                        <div class="inline-hint"><i class="fas fa-info-circle"></i>Where are you based?</div>
                                    </div>
                                </div>
                                <div class="input-chip" style="margin-top: 10px;">
                                    <label for="company"><i class="fas fa-building"></i>Company / Organization</label>
                                    <input type="text" id="company" name="company" placeholder="Your company or organization name" autocomplete="organization">
                                    <div class="inline-hint"><i class="fas fa-info-circle"></i>Optional but helps tailor the approach.</div>
                                </div>
                            </div>

                            <!-- Integrated Service Selection & Budget Calculator -->
                            <div class="form-section" style="background: rgba(52, 152, 219, 0.1); border: 1px solid #3498db; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                                <h4 style="margin: 0 0 15px 0; color: #2980b9;"><i class="fas fa-handshake"></i> Service Selection & Budget Estimation</h4>
                                <p style="margin: 0 0 15px 0; font-size: 0.9rem; color: #2980b9;"><strong>Select your services (optional) and see real-time budget estimates:</strong></p>
                                
                                <!-- Enhanced Service Options -->
                                <div class="integrated-service-options">
                                    <!-- Web Development Services -->
                                    <div class="service-category">
                                        <h6 style="color: #3498db; margin: 15px 0 10px 0;"><i class="fas fa-globe"></i> Web Development Services</h6>
                                        <label style="display: block; margin: 8px 0; padding: 8px; border: 1px solid #3498db; border-radius: 5px;">
                                            <input type="checkbox" name="calc-services" value="basic-web"> 
                                            <span><i class="fas fa-laptop-code"></i> Basic Website</span> - <strong>1,500,000 COP</strong>
                                            <small style="display: block; font-size: 0.8rem; color: #7f8c8d;">5 pages, responsive design, basic SEO</small>
                                        </label>
                                        <label style="display: block; margin: 8px 0; padding: 8px; border: 1px solid #3498db; border-radius: 5px;">
                                            <input type="checkbox" name="calc-services" value="business-web"> 
                                            <span><i class="fas fa-building"></i> Business Website</span> - <strong>2,500,000 COP</strong>
                                            <small style="display: block; font-size: 0.8rem; color: #7f8c8d;">10+ pages, advanced features, premium SEO</small>
                                        </label>
                                        <label style="display: block; margin: 8px 0; padding: 8px; border: 1px solid #3498db; border-radius: 5px;">
                                            <input type="checkbox" name="calc-services" value="ecommerce"> 
                                            <span><i class="fas fa-shopping-cart"></i> E-commerce Platform</span> - <strong>4,000,000 COP</strong>
                                            <small style="display: block; font-size: 0.8rem; color: #7f8c8d;">Full online store, payment integration, inventory</small>
                                        </label>
                                        <label style="display: block; margin: 8px 0; padding: 8px; border: 1px solid #3498db; border-radius: 5px;">
                                            <input type="checkbox" name="calc-services" value="cms"> 
                                            <span><i class="fas fa-edit"></i> Custom CMS Development</span> - <strong>3,500,000 COP</strong>
                                            <small style="display: block; font-size: 0.8rem; color: #7f8c8d;">Tailored content management system</small>
                                        </label>
                                    </div>

                                    <!-- 3D Design Services -->
                                    <div class="service-category">
                                        <h6 style="color: #e67e22; margin: 20px 0 10px 0;"><i class="fas fa-cube"></i> 3D Design & Interactive Services</h6>
                                        
                                        <!-- Basic 3D Services -->
                                        <div class="service-subcategory" style="margin-left: 15px;">
                                            <h7 style="color: #f39c12; font-size: 0.9rem;">Basic 3D Elements:</h7>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #f39c12; border-radius: 4px; background: rgba(243, 156, 18, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-logo"> 
                                                <span><i class="fas fa-cube"></i> 3D Logo Design & Animation</span> - <strong>1,200,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">Animated 3D logos, brand identity enhancement</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #f39c12; border-radius: 4px; background: rgba(243, 156, 18, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-simple"> 
                                                <span><i class="fas fa-shapes"></i> Simple 3D Models</span> - <strong>800,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">Product models, architectural visualization</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #f39c12; border-radius: 4px; background: rgba(243, 156, 18, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-icons"> 
                                                <span><i class="fas fa-icons"></i> 3D Icons & Graphics</span> - <strong>600,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">Custom 3D iconography and graphics</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #f39c12; border-radius: 4px; background: rgba(243, 156, 18, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-animation"> 
                                                <span><i class="fas fa-play"></i> Basic 3D Animation</span> - <strong>1,000,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">3D character/object animations</small>
                                            </label>
                                        </div>

                                        <!-- Interactive 3D Web Elements -->
                                        <div class="service-subcategory" style="margin-left: 15px; margin-top: 10px;">
                                            <h7 style="color: #f39c12; font-size: 0.9rem;">Interactive 3D Web Elements:</h7>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #e67e22; border-radius: 4px; background: rgba(230, 126, 34, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-interactive"> 
                                                <span><i class="fas fa-mouse-pointer"></i> Interactive 3D Elements</span> - <strong>2,000,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">3D interactions, hover effects, click animations</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #e67e22; border-radius: 4px; background: rgba(230, 126, 34, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-product"> 
                                                <span><i class="fas fa-cube"></i> 3D Product Visualization</span> - <strong>2,500,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">360¬∞ product views, zoom, rotation</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #e67e22; border-radius: 4px; background: rgba(230, 126, 34, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-navigation"> 
                                                <span><i class="fas fa-route"></i> Interactive 3D Navigation</span> - <strong>3,000,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">3D navigation systems, spatial UI</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #e67e22; border-radius: 4px; background: rgba(230, 126, 34, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-ui"> 
                                                <span><i class="fas fa-laptop-code"></i> 3D User Interface Components</span> - <strong>2,800,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">3D buttons, panels, interface elements</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #e67e22; border-radius: 4px; background: rgba(230, 126, 34, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-gallery"> 
                                                <span><i class="fas fa-images"></i> Immersive 3D Galleries</span> - <strong>3,500,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">3D image/video galleries and showcases</small>
                                            </label>
                                        </div>

                                        <!-- Advanced 3D Experiences -->
                                        <div class="service-subcategory" style="margin-left: 15px; margin-top: 10px;">
                                            <h7 style="color: #e74c3c; font-size: 0.9rem;">Advanced 3D Experiences:</h7>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #e74c3c; border-radius: 4px; background: rgba(231, 76, 60, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-environment"> 
                                                <span><i class="fas fa-globe"></i> Full 3D Website Environment</span> - <strong>8,000,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">Complete 3D virtual environments</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #e74c3c; border-radius: 4px; background: rgba(231, 76, 60, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-showroom"> 
                                                <span><i class="fas fa-store"></i> 3D Virtual Showroom</span> - <strong>6,000,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">Virtual product showrooms and spaces</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #e74c3c; border-radius: 4px; background: rgba(231, 76, 60, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-game"> 
                                                <span><i class="fas fa-gamepad"></i> 3D Game Integration</span> - <strong>12,000,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">Interactive 3D games and experiences</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #e74c3c; border-radius: 4px; background: rgba(231, 76, 60, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-collaboration"> 
                                                <span><i class="fas fa-users"></i> Real-time 3D Collaboration</span> - <strong>10,000,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">Multi-user 3D environments</small>
                                            </label>
                                        </div>

                                        <!-- Enterprise 3D Solutions -->
                                        <div class="service-subcategory" style="margin-left: 15px; margin-top: 10px;">
                                            <h7 style="color: #8e44ad; font-size: 0.9rem;">Enterprise 3D Solutions:</h7>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #8e44ad; border-radius: 4px; background: rgba(142, 68, 173, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-engine"> 
                                                <span><i class="fas fa-cog"></i> Custom 3D Engine Development</span> - <strong>15,000,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">Bespoke 3D engines and frameworks</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #8e44ad; border-radius: 4px; background: rgba(142, 68, 173, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-vr-ar"> 
                                                <span><i class="fas fa-vr-cardboard"></i> VR/AR Web Experience</span> - <strong>18,000,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">Virtual and augmented reality integration</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #8e44ad; border-radius: 4px; background: rgba(142, 68, 173, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-visualization"> 
                                                <span><i class="fas fa-chart-bar"></i> 3D Data Visualization</span> - <strong>8,000,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">Complex data in 3D format</small>
                                            </label>
                                            <label style="display: block; margin: 5px 0; padding: 6px; border: 1px solid #8e44ad; border-radius: 4px; background: rgba(142, 68, 173, 0.05);">
                                                <input type="checkbox" name="calc-services" value="3d-multiplatform"> 
                                                <span><i class="fas fa-layer-group"></i> Multi-platform 3D Applications</span> - <strong>20,000,000 COP</strong>
                                                <small style="display: block; font-size: 0.75rem; color: #7f8c8d;">3D apps for web, mobile, desktop</small>
                                            </label>
                                        </div>
                                    </div>

                                    <!-- Additional Services -->
                                    <div class="service-category">
                                        <h6 style="color: #27ae60; margin: 20px 0 10px 0;"><i class="fas fa-plus"></i> Additional Services</h6>
                                        <label style="display: block; margin: 8px 0; padding: 8px; border: 1px solid #27ae60; border-radius: 5px;">
                                            <input type="checkbox" name="calc-services" value="maintenance" data-recurring="true"> 
                                            <span><i class="fas fa-tools"></i> Website Management/Maintenance</span> - <strong>500,000 COP/month</strong>
                                            <small style="display: block; font-size: 0.8rem; color: #7f8c8d;">Updates, backups, security monitoring, support</small>
                                        </label>
                                        <label style="display: block; margin: 8px 0; padding: 8px; border: 1px solid #27ae60; border-radius: 5px;">
                                            <input type="checkbox" name="calc-services" value="cybersecurity"> 
                                            <span><i class="fas fa-shield-alt"></i> Cybersecurity Consulting</span> - <strong>1,000,000 COP</strong>
                                            <small style="display: block; font-size: 0.8rem; color: #7f8c8d;">Security audit, protection setup, monitoring</small>
                                        </label>
                                        <label style="display: block; margin: 8px 0; padding: 8px; border: 1px solid #27ae60; border-radius: 5px;">
                                            <input type="checkbox" name="calc-services" value="security" data-recurring="true"> 
                                            <span><i class="fas fa-user-shield"></i> Personal Security Services</span> - <strong>300,000 COP/day</strong>
                                            <small style="display: block; font-size: 0.8rem; color: #7f8c8d;">Executive protection, event security, personal escort</small>
                                        </label>
                                        <label style="display: block; margin: 8px 0; padding: 8px; border: 1px solid #27ae60; border-radius: 5px;">
                                            <input type="checkbox" name="calc-services" value="training"> 
                                            <span><i class="fas fa-heart"></i> Empathy Training</span> - <strong>800,000 COP/session</strong>
                                            <small style="display: block; font-size: 0.8rem; color: #7f8c8d;">Emotional intelligence, soft skills, team building</small>
                                        </label>
                                    </div>
                                </div>

                                <!-- Consolidated Additional Features & Visual Work -->
                                <div style="margin: 20px 0; padding: 15px; background: rgba(230, 126, 34, 0.1); border: 1px solid #e67e22; border-radius: 8px;">
                                    <h5 style="margin: 0 0 15px 0; color: #d35400;"><i class="fas fa-star"></i> Additional Features & Visual Work (Colombian Market Pricing)</h5>
                                    <p style="margin: 0 0 15px 0; font-size: 0.85rem; color: #d35400;"><strong>Research-based pricing reflecting Colombian market standards:</strong></p>
                                    <div class="features-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                        <!-- SEO & Performance -->
                                        <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #e67e22; border-radius: 5px; background: rgba(255,255,255,0.05);">
                                            <input type="checkbox" name="calc-features" value="advanced-seo" style="margin-right: 8px;"> 
                                            <i class="fas fa-search" style="margin-right: 5px; color: #e67e22;"></i> Advanced SEO Optimization (+300k COP)
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #e67e22; border-radius: 5px; background: rgba(255,255,255,0.05);">
                                            <input type="checkbox" name="calc-features" value="performance" style="margin-right: 8px;"> 
                                            <i class="fas fa-tachometer-alt" style="margin-right: 5px; color: #e67e22;"></i> Performance Optimization (+300k COP)
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #e67e22; border-radius: 5px; background: rgba(255,255,255,0.05);">
                                            <input type="checkbox" name="calc-features" value="ai-integration" style="margin-right: 8px;"> 
                                            <i class="fas fa-robot" style="margin-right: 5px; color: #e67e22;"></i> AI Integration & Chatbots (+1.2M COP)
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #e67e22; border-radius: 5px; background: rgba(255,255,255,0.05);">
                                            <input type="checkbox" name="calc-features" value="blockchain" style="margin-right: 8px;"> 
                                            <i class="fas fa-link" style="margin-right: 5px; color: #e67e22;"></i> Blockchain Integration (+2.5M COP)
                                        </label>
                                        
                                        <!-- E-commerce & Integration -->
                                        <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #e67e22; border-radius: 5px; background: rgba(255,255,255,0.05);">
                                            <input type="checkbox" name="calc-features" value="ecommerce-integration" style="margin-right: 8px;"> 
                                            <i class="fas fa-shopping-cart" style="margin-right: 5px; color: #e67e22;"></i> E-commerce Integration (+600k COP)
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #e67e22; border-radius: 5px; background: rgba(255,255,255,0.05);">
                                            <input type="checkbox" name="calc-features" value="iot-integration" style="margin-right: 8px;"> 
                                            <i class="fas fa-microchip" style="margin-right: 5px; color: #e67e22;"></i> IoT Device Integration (+1.8M COP)
                                        </label>
                                        
                                        <!-- Design & UX -->
                                        <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #e67e22; border-radius: 5px; background: rgba(255,255,255,0.05);">
                                            <input type="checkbox" name="calc-features" value="mobile-first" style="margin-right: 8px;"> 
                                            <i class="fas fa-mobile-alt" style="margin-right: 5px; color: #e67e22;"></i> Mobile-First Design (+200k COP)
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #e67e22; border-radius: 5px; background: rgba(255,255,255,0.05);">
                                            <input type="checkbox" name="calc-features" value="multilingual" style="margin-right: 8px;"> 
                                            <i class="fas fa-globe" style="margin-right: 5px; color: #e67e22;"></i> Multilingual Support (+350k COP)
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #e67e22; border-radius: 5px; background: rgba(255,255,255,0.05);">
                                            <input type="checkbox" name="calc-features" value="social-integration" style="margin-right: 8px;"> 
                                            <i class="fas fa-share-alt" style="margin-right: 5px; color: #e67e22;"></i> Social Media Integration (+250k COP)
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #e67e22; border-radius: 5px; background: rgba(255,255,255,0.05);">
                                            <input type="checkbox" name="calc-features" value="analytics" style="margin-right: 8px;"> 
                                            <i class="fas fa-chart-bar" style="margin-right: 5px; color: #e67e22;"></i> Analytics Integration (+200k COP)
                                        </label>
                                        
                                        <!-- Security & Compliance -->
                                        <label style="display: flex; align-items: center; padding: 8px; border: 1px solid #e67e22; border-radius: 5px; background: rgba(255,255,255,0.05);">
                                            <input type="checkbox" name="calc-features" value="advanced-security" style="margin-right: 8px;"> 
                                            <i class="fas fa-lock" style="margin-right: 5px; color: #e67e22;"></i> Advanced Security Features (+450k COP)
                                        </label>
                                    </div>
                                    <div style="margin-top: 15px; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 5px; font-size: 0.8rem; color: #d35400; border-left: 3px solid #e67e22;">
                                        <strong><i class="fas fa-chart-line"></i> Colombian Market Analysis:</strong><br>
                                        ‚Ä¢ Advanced features reflect 30-40% premium over basic services<br>
                                        ‚Ä¢ AI and blockchain services at cutting-edge premium (+200-400%)<br>
                                        ‚Ä¢ Security features essential for Colombian e-commerce standards<br>
                                        ‚Ä¢ All pricing based on local market research and competitor analysis
                                    </div>
                                </div>

                                <!-- Enhanced Project Timeline & Urgency (Colombian Market Research) -->
                                <div style="margin: 20px 0; padding: 15px; background: linear-gradient(135deg, rgba(52, 152, 219, 0.1) 0%, rgba(142, 68, 173, 0.1) 100%); border: 1px solid #3498db; border-radius: 8px;">
                                    <h5 style="margin: 0 0 15px 0; color: #f39c12;"><i class="fas fa-clock"></i> Project Timeline & Urgency (Research-Based Pricing)</h5>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                        <div>
                                            <label for="calc-timeline" style="display: block; margin-bottom: 8px; font-weight: bold; color: #f39c12;">
                                                <i class="fas fa-calendar-alt"></i> Project Timeline *
                                            </label>
                                            <select id="calc-timeline" name="calc-timeline" required style="width: 100%; padding: 8px; border: 1px solid #3498db; border-radius: 5px; background: rgba(255,255,255,0.95); color: #2c3e50; box-shadow: 0 2px 4px rgba(52, 152, 219, 0.1);">
                                                <option value="">Select timeline</option>
                                                <option value="asap" data-multiplier="2.5" data-label="ASAP (Emergency - 24h, +150% surcharge)" style="color: #2c3e50;">ASAP (Emergency - 24h, +150% surcharge)</option>
                                                <option value="1-week" data-multiplier="2.0" data-label="1 Week (Urgent, +100% surcharge)" style="color: #2c3e50;">1 Week (Urgent, +100% surcharge)</option>
                                                <option value="2-weeks" data-multiplier="1.5" data-label="2 Weeks (High Priority, +50% surcharge)" style="color: #2c3e50;">2 Weeks (High Priority, +50% surcharge)</option>
                                                <option value="1-month" data-multiplier="1.25" data-label="1 Month (Compressed, +25% surcharge)" style="color: #2c3e50;">1 Month (Compressed, +25% surcharge)</option>
                                                <option value="2-3-months" data-multiplier="1.0" data-label="2-3 Months (Standard)" style="color: #2c3e50;">2-3 Months (Standard)</option>
                                                <option value="4-6-months" data-multiplier="0.9" data-label="4-6 Months (Planned, -10% discount)" style="color: #2c3e50;">4-6 Months (Planned, -10% discount)</option>
                                                <option value="6-months" data-multiplier="0.85" data-label="6+ Months (Long-term, -15% discount)" style="color: #2c3e50;">6+ Months (Long-term, -15% discount)</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label for="calc-urgency" style="display: block; margin-bottom: 8px; font-weight: bold; color: #f39c12;">
                                                <i class="fas fa-exclamation-triangle"></i> Urgency Level
                                            </label>
                                            <select id="calc-urgency" name="calc-urgency" style="width: 100%; padding: 8px; border: 1px solid #3498db; border-radius: 5px; background: rgba(255,255,255,0.95); color: #2c3e50; box-shadow: 0 2px 4px rgba(52, 152, 219, 0.1);">
                                                <option value="">Select urgency level</option>
                                                <option value="emergency" data-multiplier="2.0" data-label="Emergency (24h response, +100% surcharge)" style="color: #2c3e50;">Emergency (24h response, +100% surcharge)</option>
                                                <option value="urgent" data-multiplier="1.5" data-label="Urgent (1 week response, +50% surcharge)" style="color: #2c3e50;">Urgent (1 week response, +50% surcharge)</option>
                                                <option value="high" data-multiplier="1.25" data-label="High (2-4 weeks response, +25% surcharge)" style="color: #2c3e50;">High (2-4 weeks response, +25% surcharge)</option>
                                                <option value="normal" data-multiplier="1.0" data-label="Normal (Standard timeline)" style="color: #2c3e50;">Normal (Standard timeline)</option>
                                                <option value="planning" data-multiplier="0.95" data-label="Planning ahead (3+ months, -5% discount)" style="color: #2c3e50;">Planning ahead (3+ months, -5% discount)</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Enhanced Project Complexity Assessment -->
                                    <div style="margin-top: 15px;">
                                        <h6 style="margin: 0 0 10px 0; color: #f39c12;"><i class="fas fa-layer-group"></i> Project Complexity Assessment</h6>
                                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                            <div>
                                                <label for="calc-complexity" style="display: block; margin-bottom: 8px; font-weight: bold; color: #f39c12;">
                                                    <i class="fas fa-cog"></i> Technical Complexity
                                                </label>
                                                <select id="calc-complexity" name="calc-complexity" style="width: 100%; padding: 8px; border: 1px solid #8e44ad; border-radius: 5px; background: rgba(255,255,255,0.95); color: #2c3e50; box-shadow: 0 2px 4px rgba(142, 68, 173, 0.1);">
                                                    <option value="">Select complexity level</option>
                                                    <option value="basic" data-multiplier="1.0" data-label="Basic (Standard web technologies)" style="color: #2c3e50;">Basic (Standard web technologies)</option>
                                                    <option value="intermediate" data-multiplier="1.3" data-label="Intermediate (Custom integrations, +30%)" style="color: #2c3e50;">Intermediate (Custom integrations, +30%)</option>
                                                    <option value="advanced" data-multiplier="1.6" data-label="Advanced (Complex 3D, AI, +60%)" style="color: #2c3e50;">Advanced (Complex 3D, AI, +60%)</option>
                                                    <option value="expert" data-multiplier="2.0" data-label="Expert (Cutting-edge tech, +100%)" style="color: #2c3e50;">Expert (Cutting-edge tech, +100%)</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label for="calc-scale" style="display: block; margin-bottom: 8px; font-weight: bold; color: #f39c12;">
                                                    <i class="fas fa-expand-arrows-alt"></i> Project Scale
                                                </label>
                                                <select id="calc-scale" name="calc-scale" style="width: 100%; padding: 8px; border: 1px solid #8e44ad; border-radius: 5px; background: rgba(255,255,255,0.95); color: #2c3e50; box-shadow: 0 2px 4px rgba(142, 68, 173, 0.1);">
                                                    <option value="">Select project scale</option>
                                                    <option value="small" data-multiplier="1.0" data-label="Small (1-5 pages)" style="color: #2c3e50;">Small (1-5 pages)</option>
                                                    <option value="medium" data-multiplier="1.2" data-label="Medium (6-20 pages, +20%)" style="color: #2c3e50;">Medium (6-20 pages, +20%)</option>
                                                    <option value="large" data-multiplier="1.5" data-label="Large (21-50 pages, +50%)" style="color: #2c3e50;">Large (21-50 pages, +50%)</option>
                                                    <option value="enterprise" data-multiplier="2.0" data-label="Enterprise (50+ pages, +100%)" style="color: #2c3e50;">Enterprise (50+ pages, +100%)</option>
                                                    <option value="platform" data-multiplier="2.5" data-label="Custom Platform (Unlimited, +150%)" style="color: #2c3e50;">Custom Platform (Unlimited, +150%)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Colombian Market Timeline Insights -->
                                    <div style="margin-top: 15px; padding: 12px; background: rgba(255,255,255,0.9); border-radius: 8px; font-size: 0.85rem; color: #2c3e50; border-left: 4px solid #3498db; box-shadow: 0 2px 8px rgba(52, 152, 219, 0.1);">
                                        <strong><i class="fas fa-chart-line"></i> Colombian Market Timeline Analysis:</strong><br>
                                        <div style="margin-top: 8px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                            <div>
                                                <strong>üöÄ Rush Projects Impact:</strong><br>
                                                ‚Ä¢ 24h delivery requires dedicated team overtime<br>
                                                ‚Ä¢ Weekend work and priority resource allocation<br>
                                                ‚Ä¢ Colombian market shows 150% premium standard
                                            </div>
                                            <div>
                                                <strong>üìÖ Optimal Planning Benefits:</strong><br>
                                                ‚Ä¢ 4+ months planning reduces costs by 10-15%<br>
                                                ‚Ä¢ Better resource allocation and testing time<br>
                                                ‚Ä¢ Colombian clients prefer early planning discount
                                            </div>
                                        </div>
                                        <div style="margin-top: 10px; padding: 10px; background: linear-gradient(135deg, rgba(39, 174, 96, 0.15) 0%, rgba(46, 204, 113, 0.15) 100%); border-radius: 6px; border-left: 3px solid #27ae60; color: #2c3e50;">
                                            <strong><i class="fas fa-lightbulb"></i> Colombian Market Insight:</strong> Projects planned 3+ months receive priority scheduling and team allocation, leading to better quality outcomes and sustainable pricing.
                                        </div>
                                    </div>
                                </div>

                                <!-- Recurring Service Inputs -->
                                <div class="recurring-inputs" style="margin: 15px 0; display: none;">
                                    <div id="maintenance-months" style="display: none; margin: 10px 0; padding: 12px; background: linear-gradient(135deg, rgba(52, 152, 219, 0.08) 0%, rgba(142, 68, 173, 0.08) 100%); border-radius: 8px; border: 1px solid rgba(52, 152, 219, 0.3);">
                                        <label style="color: #2c3e50;"><i class="fas fa-calendar"></i> Website Management Duration: 
                                            <input type="number" id="calc-maintenance-months" min="1" max="36" value="6" style="width: 80px; padding: 6px; border: 1px solid #3498db; border-radius: 4px; background: rgba(255,255,255,0.95); color: #2c3e50; margin-left: 10px; box-shadow: 0 1px 3px rgba(52, 152, 219, 0.1);">
                                            months
                                        </label>
                                    </div>
                                    <div id="security-days" style="display: none; margin: 10px 0; padding: 12px; background: linear-gradient(135deg, rgba(52, 152, 219, 0.08) 0%, rgba(142, 68, 173, 0.08) 100%); border-radius: 8px; border: 1px solid rgba(52, 152, 219, 0.3);">
                                        <label style="color: #2c3e50;"><i class="fas fa-calendar"></i> Personal Security Duration: 
                                            <input type="number" id="calc-security-days" min="1" max="365" value="1" style="width: 80px; padding: 6px; border: 1px solid #3498db; border-radius: 4px; background: rgba(255,255,255,0.95); color: #2c3e50; margin-left: 10px; box-shadow: 0 1px 3px rgba(52, 152, 219, 0.1);">
                                            days
                                        </label>
                                    </div>
                                </div>

                                <!-- Enhanced Real-time Budget Display with Colombian Market Intelligence -->
                                <div class="total-display" style="margin-top: 15px; padding: 15px; background: rgba(39, 174, 96, 0.1); border: 1px solid #27ae60; border-radius: 8px;">
                                    <strong><i class="fas fa-calculator"></i> Estimated Total Investment: <span id="calculated-total" style="font-size: 1.2em; color: #27ae60;">0 COP</span></strong>
                                    <div id="breakdown" style="font-size: 0.9rem; margin-top: 10px; color: #27ae60;"></div>
                                    
                                    <!-- Smart Recommendations Section -->
                                    <div id="calculator-recommendations" style="margin-top: 15px;"></div>
                                    
                                    <!-- Colombian Market Value Proposition -->
                                    <div style="margin-top: 15px; padding: 12px; background: rgba(52, 152, 219, 0.1); border: 1px solid #3498db; border-radius: 6px; font-size: 0.85rem; color: #2980b9; border-left: 3px solid #3498db;">
                                        <strong><i class="fas fa-map-marker-alt"></i> Colombian Market Advantages:</strong><br>
                                        <div style="margin-top: 8px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                            <div>
                                                <strong>üí∞ Cost Efficiency:</strong><br>
                                                ‚Ä¢ 40-60% savings vs. international agencies<br>
                                                ‚Ä¢ No timezone barriers for ongoing support<br>
                                                ‚Ä¢ Local market understanding
                                            </div>
                                            <div>
                                                <strong>üöÄ Premium Quality:</strong><br>
                                                ‚Ä¢ 20+ years combined experience<br>
                                                ‚Ä¢ Cutting-edge 3D and AI capabilities<br>
                                                ‚Ä¢ Empathic approach to client needs
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Pricing Note -->
                                    <div class="budget-note" style="margin-top: 10px; font-size: 0.8rem; color: #7f8c8d; border-top: 1px solid rgba(39, 174, 96, 0.3); padding-top: 10px;">
                                        <i class="fas fa-info-circle"></i> 
                                        <strong>Research-Based Pricing:</strong> All rates reflect comprehensive analysis of Colombian web development market (November 2025). Final pricing customized based on specific requirements and project scope.
                                        <div style="margin-top: 8px;">
                                            <i class="fas fa-shield-alt"></i> 30-Day Satisfaction Guarantee | 
                                            <i class="fas fa-credit-card"></i> Flexible Payment Terms | 
                                            <i class="fas fa-clock"></i> 24h Response Time
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Project Requirements & Preferences -->
                            <div class="form-section" style="background: linear-gradient(135deg, rgba(46, 204, 113, 0.15) 0%, rgba(52, 152, 219, 0.15) 100%); border: 1px solid #2ecc71; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(46, 204, 113, 0.1);">
                                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                    <div style="background: #2ecc71; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                        <i class="fas fa-cogs" style="color: white; font-size: 1.2rem;"></i>
                                    </div>
                                    <div>
                                        <h4 style="margin: 0; color: #27ae60; font-size: 1.2rem;"><strong>üéØ Define Your Project Vision</strong></h4>
                                        <p style="margin: 5px 0 0 0; color: #7f8c8d; font-size: 0.9rem;">Help us understand your goals to deliver the perfect solution</p>
                                    </div>
                                </div>
                                
                                <div class="input-row">
                                    <div class="input-chip">
                                        <label for="goal"><i class="fas fa-bullseye"></i>Primary Project Goal *</label>
                                        <select id="goal" name="goal" required style="color: #2c3e50; background: rgba(255,255,255,0.95); border: 1px solid #9b59b6; padding: 12px; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;">
                                            <option value="" style="color: #7f8c8d;">üéØ Choose your primary objective</option>
                                            <option value="sales" style="color: #2c3e50;">üí∞ Increase sales / revenue</option>
                                            <option value="brand" style="color: #2c3e50;">üåü Build brand awareness</option>
                                            <option value="ux" style="color: #2c3e50;">‚ú® Improve user experience</option>
                                            <option value="lead-gen" style="color: #2c3e50;">üìà Generate leads</option>
                                            <option value="portfolio" style="color: #2c3e50;">üé® Showcase portfolio/work</option>
                                            <option value="ecommerce" style="color: #2c3e50;">üõí Sell products online</option>
                                            <option value="security" style="color: #2c3e50;">üîí Enhance security</option>
                                            <option value="other" style="color: #2c3e50;">üöÄ Other (specify below)</option>
                                        </select>
                                        <div class="inline-hint" style="margin-top: 8px; color: #27ae60;">
                                            <i class="fas fa-info-circle"></i> <strong>Pro Tip:</strong> Be specific about your main goal - this guides our entire approach and ensures we focus on what matters most to you.
                                        </div>
                                    </div>
                                    <div class="input-chip">
                                        <label for="contact-method"><i class="fas fa-comments"></i>Preferred Contact Method *</label>
                                        <select id="contact-method" name="contact-method" required style="color: #2c3e50; background: rgba(255,255,255,0.95); border: 1px solid #3498db; padding: 12px; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;">
                                            <option value="" style="color: #7f8c8d;">üí¨ Choose your communication style</option>
                                            <option value="email" style="color: #2c3e50;">üìß Email (Professional, documented)</option>
                                            <option value="whatsapp" style="color: #2c3e50;">üí¨ WhatsApp (Quick updates, flexible)</option>
                                            <option value="call" style="color: #2c3e50;">üìû Phone Call (Voice discussion, immediate)</option>
                                            <option value="video" style="color: #2c3e50;">üìπ Video Call (Detailed planning, visual)</option>
                                        </select>
                                        <div class="inline-hint" style="margin-top: 8px; color: #3498db;">
                                            <i class="fas fa-info-circle"></i> <strong>Communication Matters:</strong> Choose how you prefer to collaborate. We adapt to your style for the best partnership experience.
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px; border-left: 3px solid #f39c12;">
                                    <h5 style="margin: 0 0 10px 0; color: #f39c12; font-size: 0.95rem;"><i class="fas fa-star"></i> Why This Matters:</h5>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85rem; line-height: 1.5;">
                                        <div>
                                            <strong>üéØ Goal Clarity:</strong> Knowing your primary objective helps us prioritize features and deliver maximum value.
                                        </div>
                                        <div>
                                            <strong>üí¨ Communication Style:</strong> Matching your preferred method ensures smooth collaboration and timely updates.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Current Challenges & Pain Points -->
                            <div class="form-section" style="background: linear-gradient(135deg, rgba(231, 76, 60, 0.15) 0%, rgba(142, 68, 173, 0.15) 100%); border: 1px solid #e74c3c; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(231, 76, 60, 0.1);">
                                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                    <div style="background: #e74c3c; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                        <i class="fas fa-exclamation-triangle" style="color: white; font-size: 1.2rem;"></i>
                                    </div>
                                    <div>
                                        <h4 style="margin: 0; color: #c0392b; font-size: 1.2rem;"><strong>üîç Identify Your Challenges</strong></h4>
                                        <p style="margin: 5px 0 0 0; color: #7f8c8d; font-size: 0.9rem;">Understanding your pain points helps us create targeted solutions</p>
                                    </div>
                                </div>
                                
                                <p style="margin: 0 0 15px 0; font-size: 0.9rem; color: #c0392b;"><strong>üéØ Select the challenges you're currently facing:</strong></p>
                                
                                <div class="challenges-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                    <label style="display: flex; align-items: center; padding: 12px; border: 1px solid #e74c3c; border-radius: 8px; background: rgba(255,255,255,0.1); transition: all 0.3s ease; cursor: pointer;">
                                        <input type="checkbox" name="challenges" value="technical" style="margin-right: 12px; accent-color: #e74c3c;">
                                        <div>
                                            <div style="display: flex; align-items: center;">
                                                <i class="fas fa-bug" style="margin-right: 8px; color: #e74c3c; font-size: 1.1rem;"></i>
                                                <strong style="color: #2c3e50;">Technical Issues / Bugs</strong>
                                            </div>
                                            <small style="color: #7f8c8d; margin-left: 20px;">System errors, functionality problems, technical debt</small>
                                        </div>
                                    </label>
                                    
                                    <label style="display: flex; align-items: center; padding: 12px; border: 1px solid #e74c3c; border-radius: 8px; background: rgba(255,255,255,0.1); transition: all 0.3s ease; cursor: pointer;">
                                        <input type="checkbox" name="challenges" value="engagement" style="margin-right: 12px; accent-color: #e74c3c;">
                                        <div>
                                            <div style="display: flex; align-items: center;">
                                                <i class="fas fa-users" style="margin-right: 8px; color: #e74c3c; font-size: 1.1rem;"></i>
                                                <strong style="color: #2c3e50;">Poor User Engagement</strong>
                                            </div>
                                            <small style="color: #7f8c8d; margin-left: 20px;">Low interaction, high bounce rates, poor retention</small>
                                        </div>
                                    </label>
                                    
                                    <label style="display: flex; align-items: center; padding: 12px; border: 1px solid #e74c3c; border-radius: 8px; background: rgba(255,255,255,0.1); transition: all 0.3s ease; cursor: pointer;">
                                        <input type="checkbox" name="challenges" value="conversion" style="margin-right: 12px; accent-color: #e74c3c;">
                                        <div>
                                            <div style="display: flex; align-items: center;">
                                                <i class="fas fa-funnel-dollar" style="margin-right: 8px; color: #e74c3c; font-size: 1.1rem;"></i>
                                                <strong style="color: #2c3e50;">Low Conversion Rates</strong>
                                            </div>
                                            <small style="color: #7f8c8d; margin-left: 20px;">Few sales, poor lead generation, ineffective CTAs</small>
                                        </div>
                                    </label>
                                    
                                    <label style="display: flex; align-items: center; padding: 12px; border: 1px solid #e74c3c; border-radius: 8px; background: rgba(255,255,255,0.1); transition: all 0.3s ease; cursor: pointer;">
                                        <input type="checkbox" name="challenges" value="security" style="margin-right: 12px; accent-color: #e74c3c;">
                                        <div>
                                            <div style="display: flex; align-items: center;">
                                                <i class="fas fa-shield-alt" style="margin-right: 8px; color: #e74c3c; font-size: 1.1rem;"></i>
                                                <strong style="color: #2c3e50;">Security Vulnerabilities</strong>
                                            </div>
                                            <small style="color: #7f8c8d; margin-left: 20px;">Data breaches, weak protection, compliance issues</small>
                                        </div>
                                    </label>
                                    
                                    <label style="display: flex; align-items: center; padding: 12px; border: 1px solid #e74c3c; border-radius: 8px; background: rgba(255,255,255,0.1); transition: all 0.3s ease; cursor: pointer;">
                                        <input type="checkbox" name="challenges" value="competition" style="margin-right: 12px; accent-color: #e74c3c;">
                                        <div>
                                            <div style="display: flex; align-items: center;">
                                                <i class="fas fa-trophy" style="margin-right: 8px; color: #e74c3c; font-size: 1.1rem;"></i>
                                                <strong style="color: #2c3e50;">Competitor Pressure</strong>
                                            </div>
                                            <small style="color: #7f8c8d; margin-left: 20px;">Market saturation, differentiation challenges</small>
                                        </div>
                                    </label>
                                    
                                    <label style="display: flex; align-items: center; padding: 12px; border: 1px solid #e74c3c; border-radius: 8px; background: rgba(255,255,255,0.1); transition: all 0.3s ease; cursor: pointer;">
                                        <input type="checkbox" name="challenges" value="mobile" style="margin-right: 12px; accent-color: #e74c3c;">
                                        <div>
                                            <div style="display: flex; align-items: center;">
                                                <i class="fas fa-mobile" style="margin-right: 8px; color: #e74c3c; font-size: 1.1rem;"></i>
                                                <strong style="color: #2c3e50;">Mobile Experience Issues</strong>
                                            </div>
                                            <small style="color: #7f8c8d; margin-left: 20px;">Poor responsiveness, slow loading, usability problems</small>
                                        </div>
                                    </label>
                                    
                                    <label style="display: flex; align-items: center; padding: 12px; border: 1px solid #e74c3c; border-radius: 8px; background: rgba(255,255,255,0.1); transition: all 0.3s ease; cursor: pointer;">
                                        <input type="checkbox" name="challenges" value="performance" style="margin-right: 12px; accent-color: #e74c3c;">
                                        <div>
                                            <div style="display: flex; align-items: center;">
                                                <i class="fas fa-tachometer-alt" style="margin-right: 8px; color: #e74c3c; font-size: 1.1rem;"></i>
                                                <strong style="color: #2c3e50;">Slow Loading Speed</strong>
                                            </div>
                                            <small style="color: #7f8c8d; margin-left: 20px;">Poor performance, high bounce rates, SEO impact</small>
                                        </div>
                                    </label>
                                    
                                    <label style="display: flex; align-items: center; padding: 12px; border: 1px solid #e74c3c; border-radius: 8px; background: rgba(255,255,255,0.1); transition: all 0.3s ease; cursor: pointer;">
                                        <input type="checkbox" name="challenges" value="visibility" style="margin-right: 12px; accent-color: #e74c3c;">
                                        <div>
                                            <div style="display: flex; align-items: center;">
                                                <i class="fas fa-eye" style="margin-right: 8px; color: #e74c3c; font-size: 1.1rem;"></i>
                                                <strong style="color: #2c3e50;">Low Search Visibility</strong>
                                            </div>
                                            <small style="color: #7f8c8d; margin-left: 20px;">Poor rankings, low traffic, discoverability issues</small>
                                        </div>
                                    </label>
                                    
                                    <label style="display: flex; align-items: center; padding: 12px; border: 1px solid #e74c3c; border-radius: 8px; background: rgba(255,255,255,0.1); transition: all 0.3s ease; cursor: pointer;">
                                        <input type="checkbox" name="challenges" value="content" style="margin-right: 12px; accent-color: #e74c3c;">
                                        <div>
                                            <div style="display: flex; align-items: center;">
                                                <i class="fas fa-file-alt" style="margin-right: 8px; color: #e74c3c; font-size: 1.1rem;"></i>
                                                <strong style="color: #2c3e50;">Content Management Problems</strong>
                                            </div>
                                            <small style="color: #7f8c8d; margin-left: 20px;">Difficult updates, poor organization, workflow issues</small>
                                        </div>
                                    </label>
                                    
                                    <label style="display: flex; align-items: center; padding: 12px; border: 1px solid #e74c3c; border-radius: 8px; background: rgba(255,255,255,0.1); transition: all 0.3s ease; cursor: pointer;">
                                        <input type="checkbox" name="challenges" value="other" style="margin-right: 12px; accent-color: #e74c3c;">
                                        <div>
                                            <div style="display: flex; align-items: center;">
                                                <i class="fas fa-ellipsis-h" style="margin-right: 8px; color: #e74c3c; font-size: 1.1rem;"></i>
                                                <strong style="color: #2c3e50;">Other Challenges</strong>
                                            </div>
                                            <small style="color: #7f8c8d; margin-left: 20px;">Something not listed here - please specify below</small>
                                        </div>
                                    </label>
                                </div>
                                
                                <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px; border-left: 3px solid #f39c12;">
                                    <h5 style="margin: 0 0 10px 0; color: #f39c12; font-size: 0.95rem;"><i class="fas fa-lightbulb"></i> Why This Matters:</h5>
                                    <div style="font-size: 0.85rem; line-height: 1.6; color: #2c3e50;">
                                        <strong style="color: #2ecc71;">üîç Problem Identification:</strong> <span style="color: #2ecc71;">Knowing your specific challenges allows us to diagnose issues accurately and create targeted solutions that address root causes rather than just symptoms.</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Comprehensive Project Details -->
                            <div class="form-section" style="background: linear-gradient(135deg, rgba(155, 89, 182, 0.15) 0%, rgba(52, 152, 219, 0.15) 100%); border: 1px solid #9b59b6; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(155, 89, 182, 0.1);">
                                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                                    <div style="background: #9b59b6; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                                        <i class="fas fa-comment-dots" style="color: white; font-size: 1.2rem;"></i>
                                    </div>
                                    <div>
                                        <h4 style="margin: 0; color: #8e44ad; font-size: 1.2rem;"><strong>üìù Share Your Vision in Detail</strong></h4>
                                        <p style="margin: 5px 0 0 0; color: #7f8c8d; font-size: 0.9rem;">The more specific you are, the more precise our solution will be</p>
                                    </div>
                                </div>
                                
                                <p style="margin: 0 0 15px 0; font-size: 0.9rem; color: #8e44ad;"><strong>üéØ Why Detailed Information Creates Exceptional Results:</strong></p>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; border-left: 3px solid #27ae60;">
                                        <h5 style="margin: 0 0 10px 0; color: #27ae60; font-size: 0.95rem;"><i class="fas fa-star"></i> What You Gain:</h5>
                                        <ul style="margin: 0; padding-left: 20px; font-size: 0.85rem; line-height: 1.6;">
                                            <li><strong>üéØ Precision Planning:</strong> Exact requirements = perfect execution</li>
                                            <li><strong>üí∞ Accurate Budgeting:</strong> No surprises, transparent pricing</li>
                                            <li><strong>‚ö° Faster Development:</strong> Less clarification, more building</li>
                                            <li><strong>‚ú® Superior Quality:</strong> Tailored to your unique needs</li>
                                        </ul>
                                    </div>
                                    
                                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; border-left: 3px solid #e67e22;">
                                        <h5 style="margin: 0 0 10px 0; color: #e67e22; font-size: 0.95rem;"><i class="fas fa-gem"></i> Our Commitment:</h5>
                                        <ul style="margin: 0; padding-left: 20px; font-size: 0.85rem; line-height: 1.6;">
                                            <li><strong>üîç Expert Analysis:</strong> 20+ years dissecting complex requirements</li>
                                            <li><strong>üìä Market Intelligence:</strong> Colombian market insights applied</li>
                                            <li><strong>üí° Innovation Integration:</strong> Latest technologies & trends</li>
                                            <li><strong>üõ°Ô∏è Risk Mitigation:</strong> Proven methodologies, guaranteed results</li>
                                        </ul>
                                    </div>
                                </div>
                                
                                <div class="textarea-chip">
                                    <textarea id="message" name="message"
                                              placeholder="Please provide comprehensive details about your project including:

üìã PROJECT OVERVIEW:
‚Ä¢ What is the main purpose/goal of your project?
‚Ä¢ Who is your target audience?
‚Ä¢ What problem are you trying to solve?

üéØ SPECIFIC REQUIREMENTS:
‚Ä¢ What features do you need?
‚Ä¢ Any existing systems to integrate with?
‚Ä¢ Preferred technologies or platforms?
‚Ä¢ Specific functionality requirements?

üí° SUCCESS METRICS:
‚Ä¢ How will you measure success?
‚Ä¢ What are your key performance indicators?

‚è∞ TIMELINE & CONSTRAINTS:
‚Ä¢ Any important deadlines?
‚Ä¢ Budget constraints or preferences?
‚Ä¢ Technical or business constraints?

üîç CURRENT SITUATION:
‚Ä¢ What exists now (if anything)?
‚Ä¢ What needs to be improved?
‚Ä¢ Any technical challenges you're aware of?

üí¨ ADDITIONAL INFORMATION:
‚Ä¢ Any specific questions or concerns?
‚Ä¢ Reference websites or examples you like?
‚Ä¢ Any other details that might help?"
                                              rows="10" required
                                              style="width: 100%; padding: 15px; border: 1px solid #9b59b6; border-radius: 8px; background: rgba(255,255,255,0.95); color: #2c3e50; resize: vertical; font-family: inherit; line-height: 1.5; transition: all 0.3s ease;"></textarea>
                                    <div class="inline-hint" style="margin-top: 8px; color: #8e44ad;">
                                        <i class="fas fa-info-circle"></i> <strong>Pro Tip:</strong> Think of this as a consultation brief. The more context you provide, the more accurately we can craft your perfect solution. Don't worry about being too detailed - specificity is our superpower!
                                    </div>
                                </div>
                                
                                <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px; border-left: 3px solid #f39c12;">
                                    <h5 style="margin: 0 0 10px 0; color: #f39c12; font-size: 0.95rem;"><i class="fas fa-lightbulb"></i> Global Best Practices:</h5>
                                    <div style="font-size: 0.85rem; line-height: 1.6; color: #2c3e50;">
                                        <strong style="color: #f39c12;">üåç Research-Backed Approach:</strong> <span style="color: #f39c12;">Studies show that projects with detailed requirements have 73% higher success rates. Top agencies worldwide use comprehensive briefs to ensure client satisfaction and project excellence.</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Comprehensive Project Details -->
                            <div class="form-section" style="background: rgba(155, 89, 182, 0.1); border: 1px solid #9b59b6; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                                <h4 style="margin: 0 0 15px 0; color: #8e44ad;"><i class="fas fa-comment-dots"></i> Comprehensive Project Details *</h4>
                                <p style="margin: 0 0 15px 0; font-size: 0.9rem; color: #8e44ad;"><strong>The more detailed your description, the better I can analyze and deliver superior results:</strong></p>
                                <div class="textarea-chip">
                                    <textarea id="message" name="message" 
                                              placeholder="Please provide comprehensive details about your project including:&#10;&#10;üìã PROJECT OVERVIEW:&#10;‚Ä¢ What is the main purpose/goal of your project?&#10;‚Ä¢ Who is your target audience?&#10;‚Ä¢ What problem are you trying to solve?&#10;&#10;üéØ SPECIFIC REQUIREMENTS:&#10;‚Ä¢ What features do you need?&#10;‚Ä¢ Any existing systems to integrate with?&#10;‚Ä¢ Preferred technologies or platforms?&#10;‚Ä¢ Specific functionality requirements?&#10;&#10;üí° SUCCESS METRICS:&#10;‚Ä¢ How will you measure success?&#10;‚Ä¢ What are your key performance indicators?&#10;&#10;‚è∞ TIMELINE & CONSTRAINTS:&#10;‚Ä¢ Any important deadlines?&#10;‚Ä¢ Budget constraints or preferences?&#10;‚Ä¢ Technical or business constraints?&#10;&#10;üîç CURRENT SITUATION:&#10;‚Ä¢ What exists now (if anything)?&#10;‚Ä¢ What needs to be improved?&#10;‚Ä¢ Any technical challenges you're aware of?&#10;&#10;üí¨ ADDITIONAL INFORMATION:&#10;‚Ä¢ Any specific questions or concerns?&#10;‚Ä¢ Reference websites or examples you like?&#10;‚Ä¢ Any other details that might help?"
                                              rows="10" required 
                                              style="width: 100%; padding: 15px; border: 1px solid #9b59b6; border-radius: 8px; background: rgba(255,255,255,0.1); color: inherit; resize: vertical; font-family: inherit; line-height: 1.5;"></textarea>
                                    <div class="inline-hint" style="margin-top: 8px; color: #8e44ad;">
                                        <i class="fas fa-info-circle"></i> Comprehensive details enable logical analysis, systematic planning, and superior execution.
                                    </div>
                                </div>
                            </div>

                            <!-- Brand Assets & Design Integration -->
                            <div class="form-section" style="background: rgba(52, 152, 219, 0.1); border: 1px solid #3498db; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                                <h4 style="margin: 0 0 15px 0; color: #2980b9;"><i class="fas fa-palette"></i> Brand Assets & Design Integration</h4>
                                <p style="margin: 0 0 15px 0; font-size: 0.95rem; color: #2980b9;"><strong>üé® Upload branding materials and design preferences for optimal visual integration:</strong></p>
                                
                                <!-- File Upload Section -->
                                <div class="file-upload-section" style="margin-bottom: 20px;">
                                    <label for="brand-files" style="display: block; margin-bottom: 10px; font-weight: bold; color: #2980b9;">
                                        <i class="fas fa-upload"></i> Upload Brand Assets (Logo, Graphics, Documents)
                                    </label>
                                    <input type="file" id="brand-files" name="brand-files" multiple accept=".png,.jpg,.jpeg,.gif,.svg,.pdf,.doc,.docx" 
                                           style="width: 100%; padding: 12px; border: 2px dashed #3498db; border-radius: 8px; background: rgba(255,255,255,0.05); color: inherit; cursor: pointer;">
                                    <div class="inline-hint" style="margin-top: 8px; color: #7f8c8d;">
                                        <i class="fas fa-info-circle"></i> Supported: PNG, JPG, JPEG, GIF, SVG, PDF, DOC, DOCX (Max 10MB per file)
                                    </div>
                                    <div id="file-preview" style="margin-top: 10px;"></div>
                                </div>

                                <!-- Color & Design Preferences -->
                                <div class="design-preferences" style="margin-bottom: 20px;">
                                    <label for="color-preferences" style="display: block; margin-bottom: 10px; font-weight: bold; color: #2980b9;">
                                        <i class="fas fa-palette"></i> Color Palette & Visual Style Preferences
                                    </label>
                                    <textarea id="color-preferences" name="color-preferences" 
                                              placeholder="Describe your brand's visual identity:&#10;&#10;üé® COLOR PREFERENCES:&#10;‚Ä¢ Primary brand colors (hex codes if available)&#10;‚Ä¢ Secondary/accent colors&#10;‚Ä¢ Colors to avoid&#10;‚Ä¢ Industry-specific color standards&#10;&#10;‚ú® STYLE & MOOD:&#10;‚Ä¢ Overall aesthetic (modern, classic, minimal, vibrant, etc.)&#10;‚Ä¢ Target audience appeal (professional, casual, luxury, tech-forward)&#10;‚Ä¢ Industry-specific design trends&#10;&#10;üìê LAYOUT PREFERENCES:&#10;‚Ä¢ Clean/minimal vs. rich/detailed&#10;‚Ä¢ Bold vs. subtle&#10;‚Ä¢ Traditional vs. innovative&#10;&#10;üìö BRAND GUIDELINES:&#10;‚Ä¢ Any existing brand guidelines&#10;‚Ä¢ Logo usage rules&#10;‚Ä¢ Typography preferences&#10;&#10;Example: 'Primary: Deep Blue (#1e3a8a), Secondary: Gold (#f59e0b), Accent: Orange (#ff6b35). Modern, professional tech company aesthetic. Clean lines, lots of white space, contemporary sans-serif typography. Avoid red tones as they don't align with our calm, trustworthy brand image.'"
                                              rows="8" 
                                              style="width: 100%; padding: 12px; border: 1px solid #3498db; border-radius: 8px; background: rgba(255,255,255,0.05); color: inherit; resize: vertical; font-family: inherit; line-height: 1.4;"></textarea>
                                </div>

                                <!-- 3D Design & Interactive Elements -->
                                <div class="design-3d-section" style="margin-bottom: 20px;">
                                    <h5 style="margin: 0 0 10px 0; color: #2980b9;"><i class="fas fa-cube"></i> 3D Design & Interactive Elements</h5>
                                    <div style="background: rgba(255,255,255,0.05); padding: 12px; border-radius: 6px; border-left: 4px solid #3498db;">
                                        <p style="margin: 0 0 10px 0; font-size: 0.9rem; color: #2980b9;">
                                            <strong>üöÄ Premium 3D Design Services Available</strong>
                                        </p>
                                        <p style="margin: 0 0 15px 0; font-size: 0.85rem; color: #7f8c8d;">
                                            Enhance your project with cutting-edge 3D elements, interactive visualizations, and immersive experiences that set you apart from competitors.
                                        </p>
                                        
                                        <div style="margin-bottom: 15px;">
                                            <label for="3d-interest" style="display: block; margin-bottom: 8px; font-weight: bold; color: #2980b9;">
                                                <i class="fas fa-check-circle"></i> Interest in 3D Design Integration:
                                            </label>
                                            <select id="3d-interest" name="3d-interest" title="Select your level of interest in 3D design integration" style="width: 100%; padding: 8px; border: 1px solid #3498db; border-radius: 5px; background: rgba(255,255,255,0.95); color: #2c3e50;">
                                                <option value="" style="color: #7f8c8d;">Select your 3D design interest level</option>
                                                <option value="none" style="color: #2c3e50;">No 3D elements needed</option>
                                                <option value="basic" style="color: #2c3e50;">Basic 3D elements (logos, simple models)</option>
                                                <option value="moderate" style="color: #2c3e50;">Moderate 3D integration (interactive elements)</option>
                                                <option value="advanced" style="color: #2c3e50;">Advanced 3D experience (full interactive platform)</option>
                                                <option value="consultation" style="color: #2c3e50;">Need consultation on 3D possibilities</option>
                                            </select>
                                        </div>

                                        <label for="3d-description" style="display: block; margin-bottom: 8px; font-weight: bold; color: #2980b9;">
                                            3D Design Vision & Requirements (Optional):
                                        </label>
                                        <textarea name="3d-description" 
                                                  placeholder="Describe any 3D elements you'd like to include:&#10;&#10;‚Ä¢ 3D logo or brand elements&#10;‚Ä¢ Interactive product visualizations&#10;‚Ä¢ 3D navigation or user interface&#10;‚Ä¢ Immersive brand experiences&#10;‚Ä¢ Technical 3D requirements&#10;‚Ä¢ Any specific 3D platforms or technologies&#10;&#10;Example: 'We'd like a 3D version of our logo that rotates on hover, plus interactive 3D product models that customers can rotate and zoom in on. The goal is to create an engaging, premium shopping experience that sets us apart from competitors.'"
                                                  rows="4"
                                                  style="width: 100%; padding: 8px; border: 1px solid #3498db; border-radius: 5px; background: rgba(255,255,255,0.1); color: inherit; resize: vertical; font-family: inherit; font-size: 0.9rem;"></textarea>
                                    </div>
                                </div>

                                <!-- Example Brand Package -->
                                <div class="brand-example" style="padding: 12px; background: rgba(39, 174, 96, 0.1); border: 1px solid #27ae60; border-radius: 8px;">
                                    <h5 style="margin: 0 0 10px 0; color: #27ae60;"><i class="fas fa-lightbulb"></i> Optimal Brand Package Example:</h5>
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 0.85rem;">
                                        <div>
                                            <strong>üìÅ Logo Files:</strong><br>
                                            <small>‚Ä¢ High-res PNG (transparent)</small><br>
                                            <small>‚Ä¢ SVG (scalable)</small><br>
                                            <small>‚Ä¢ Vector formats</small>
                                        </div>
                                        <div>
                                            <strong>üé® Color Palette:</strong><br>
                                            <small>‚Ä¢ Primary: #003366</small><br>
                                            <small>‚Ä¢ Secondary: #FFD700</small><br>
                                            <small>‚Ä¢ Accent: #FF6B35</small>
                                        </div>
                                        <div>
                                            <strong>üí´ Style Guide:</strong><br>
                                            <small>‚Ä¢ Typography preferences</small><br>
                                            <small>‚Ä¢ Layout guidelines</small><br>
                                            <small>‚Ä¢ Brand voice/tone</small>
                                        </div>
                                        <div>
                                            <strong>üöÄ 3D Elements:</strong><br>
                                            <small>‚Ä¢ Logo 3D versions</small><br>
                                            <small>‚Ä¢ Interactive models</small><br>
                                            <small>‚Ä¢ Brand animations</small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Hidden fields for quotation data -->
                            <input type="hidden" id="quotation-total" name="quotation-total" value="">
                            <input type="hidden" id="quotation-breakdown" name="quotation-breakdown" value="">

                            <div class="form-footer-card">
                                <small><i class="fas fa-clock"></i> Expect a personalized response within 24 hours. 30-day satisfaction guarantee.</small>
                                
                                <!-- Trust Indicators -->
                                <div class="trust-indicators">
                                    <div class="trust-badges">
                                        <div class="trust-badge">
                                            <i class="fas fa-shield-alt"></i>
                                            <span>SSL Encrypted</span>
                                        </div>
                                        <div class="trust-badge">
                                            <i class="fas fa-certificate"></i>
                                            <span>Professional Certified</span>
                                        </div>
                                        <div class="trust-badge">
                                            <i class="fas fa-clock"></i>
                                            <span>24h Response Guarantee</span>
                                        </div>
                                        <div class="trust-badge">
                                            <i class="fas fa-thumbs-up"></i>
                                            <span>30-Day Satisfaction</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Professional Submission Options -->
                                <div class="submission-options">
                                    <!-- User Choice Section -->
                                    <div class="submission-choice-section" style="margin-bottom: 20px; padding: 15px; background: rgba(52, 152, 219, 0.1); border: 1px solid #3498db; border-radius: 8px;">
                                        <h4 style="margin: 0 0 10px 0; color: #2980b9;"><i class="fas fa-hand-pointer"></i> Choose Your Communication Method</h4>
                                        <div class="communication-methods" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                                            <label class="method-option" style="display: flex; align-items: center; padding: 12px; border: 2px solid #ecf0f1; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; background: rgba(255,255,255,0.05);">
                                                <input type="radio" name="communication-method" value="email" style="margin-right: 12px; accent-color: #3498db;">
                                                <div>
                                                    <strong style="color: #2980b9;"><i class="fas fa-envelope"></i> Email Communication</strong>
                                                    <div style="font-size: 0.85rem; color: #7f8c8d; margin-top: 4px;">
                                                        Professional, documented communication with detailed project information
                                                    </div>
                                                </div>
                                            </label>
                                            <label class="method-option" style="display: flex; align-items: center; padding: 12px; border: 2px solid #ecf0f1; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; background: rgba(255,255,255,0.05);">
                                                <input type="radio" name="communication-method" value="whatsapp" style="margin-right: 12px; accent-color: #25d366;">
                                                <div>
                                                    <strong style="color: #25d366;"><i class="fab fa-whatsapp"></i> WhatsApp Communication</strong>
                                                    <div style="font-size: 0.85rem; color: #7f8c8d; margin-top: 4px;">
                                                        Instant messaging with quick responses and real-time updates
                                                    </div>
                                                </div>
                                            </label>
                                        </div>
                                    </div>

                                    <!-- Enhanced Submission Buttons -->
                                    <div class="submission-methods">
                                        <button type="button" class="contact-submit primary-submit"
                                                onclick="sendViaEmail()"
                                                aria-label="Send project inquiry via email - Opens your email client with pre-filled message"
                                                data-method="email"
                                                data-conversion-rate="0.85"
                                                data-response-time="24h">
                                            <i class="fas fa-envelope" aria-hidden="true"></i>
                                            <span class="button-text">Send via Email</span>
                                            <span class="button-performance" aria-hidden="true">
                                                <small>24h response</small>
                                            </span>
                                        </button>
                                        <button type="button" class="contact-submit whatsapp-submit"
                                                onclick="sendViaWhatsApp()"
                                                aria-label="Send project inquiry via WhatsApp - Opens WhatsApp with pre-filled message for instant communication"
                                                data-method="whatsapp"
                                                data-conversion-rate="0.92"
                                                data-response-time="2-4h">
                                            <i class="fab fa-whatsapp" aria-hidden="true"></i>
                                            <span class="button-text">Send via WhatsApp</span>
                                            <span class="button-performance" aria-hidden="true">
                                                <small>2-4h response</small>
                                            </span>
                                        </button>
                                    </div>
                                    <div id="button-validation-message" class="button-validation-error" style="display: none;" role="alert" aria-live="polite"></div>
   
                                    <!-- Performance Statistics & User Guidance -->
                                    <div class="contact-performance-stats" style="margin-top: 15px; padding: 12px; background: rgba(52, 152, 219, 0.05); border: 1px solid rgba(52, 152, 219, 0.2); border-radius: 8px; font-size: 0.85rem; color: #2980b9;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 10px;">
                                            <div>
                                                <strong>üìß Email Method:</strong><br>
                                                ‚Ä¢ 85% conversion rate<br>
                                                ‚Ä¢ 24h average response<br>
                                                ‚Ä¢ Best for detailed documentation
                                            </div>
                                            <div>
                                                <strong>üí¨ WhatsApp Method:</strong><br>
                                                ‚Ä¢ 92% conversion rate<br>
                                                ‚Ä¢ 2-4h average response<br>
                                                ‚Ä¢ Best for quick communication
                                            </div>
                                        </div>
                                        <div style="border-top: 1px solid rgba(52, 152, 219, 0.2); padding-top: 10px; font-size: 0.8rem; color: #7f8c8d;">
                                            <i class="fas fa-chart-line"></i> <strong>Global Statistics (2025):</strong> WhatsApp leads with 2.8B users worldwide, 95%+ engagement in Latin America. Email maintains 85% professional communication share.
                                        </div>
                                    </div>
                                
                                <!-- Professional Guarantees -->
                                <div class="guarantee-section">
                                    <div class="professional-guarantees">
                                        <div class="guarantee-item">
                                            <i class="fas fa-medal"></i>
                                            <div>
                                                <strong>Professional Excellence Guarantee</strong>
                                                <small>20+ years of verified experience</small>
                                            </div>
                                        </div>
                                        <div class="guarantee-item">
                                            <i class="fas fa-handshake"></i>
                                            <div>
                                                <strong>Transparent Service Agreement</strong>
                                                <small>All terms clearly documented</small>
                                            </div>
                                        </div>
                                        <div class="guarantee-item">
                                            <i class="fas fa-clipboard-check"></i>
                                            <div>
                                                <strong>Certified Delivery Process</strong>
                                                <small>ISO-standard development methodology</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="security-notice" style="margin-top: 10px; font-size: 0.8rem; color: #27ae60;">
                                    <i class="fas fa-lock"></i> <strong>Secure & Encrypted:</strong> Your data is protected with SSL encryption and never stored on our servers.
                                </div>
                            </div>
                        </form>
                    </div>
                </section>
            </section>

            <!-- Container for the 3D Brain -->
            <div id="brain-container" class="parallax-element "></div>

            <div class="psych-messages">
                <p class="connection-message">Connection starts with a single message</p>
            </div>

        </main>
    </div>

    <!-- Footer Navigation -->
    <footer class="footer" style="text-align: center; margin: 20px 0; padding: 20px 0;">
        <ul style="list-style: none; padding: 0; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
            <li><a href="index.html" style="text-decoration: none; color: inherit;"><img src="assets/Logo/Logo_3d-brain.png" alt="Home" style="width: 30px; height: 16px; vertical-align: middle; margin-right: 5px;"> Home</a></li>
            <li><a href="about/about.html" style="text-decoration: none; color: inherit;"><img src="assets/Logo/Logo_3d-brain.png" alt="About" style="width: 30px; height: 16px; vertical-align: middle; margin-right: 5px;"> About</a></li>
            <li><a href="Projects/projects.html" style="text-decoration: none; color: inherit;"><img src="assets/Logo/Logo_3d-brain.png" alt="Projects" style="width: 30px; height: 16px; vertical-align: middle; margin-right: 5px;"> Projects</a></li>
            <li><a href="contact.html" style="text-decoration: none; color: inherit;"><img src="assets/Logo/Logo_3d-brain.png" alt="Contact" style="width: 30px; height: 16px; vertical-align: middle; margin-right: 5px;"> Contact</a></li>
        </ul>
        <p style="margin-top: 10px; font-size: 0.9rem; color: rgba(224, 247, 250, 0.7);">¬© 2025 Eduard Gildardo P√©rez Franco. All rights reserved. <a href="legal.html" style="color: var(--glow-color-2); text-decoration: none;">Legal Information</a></p>
    </footer>

    <script>
        /**
         * Enhanced Contact Form System with Professional Certification
         * Based on conversion optimization research and user psychology principles
         */

        // Global functions for email and WhatsApp submission
        function proceedToUserEmail(mailtoUrl) {
            closeNotification();

            // Open email client with form data
            window.location.href = mailtoUrl;

            // Show submission confirmation
            setTimeout(() => {
                showSubmissionConfirmation('email', {
                    recipient: 'Your Email + eduardgildardoperezfranco@empathicweb.online',
                    expectedResponse: '24 hours',
                    submissionType: 'Email with Form Data',
                    nextSteps: [
                        'Your email client has opened with complete form data',
                        'Review the pre-filled message and attachments',
                        'Send the email to our team (CC\'d to yourself)',
                        'Keep this email for your project records',
                        'Our team will respond within 24 hours'
                    ]
                });
            }, 500);
        }

        function proceedToUserWhatsApp(whatsappUrl) {
            closeNotification();

            // Open WhatsApp with form data
            window.open(whatsappUrl, '_blank');

            // Show submission confirmation
            setTimeout(() => {
                showSubmissionConfirmation('whatsapp', {
                    recipient: 'Your WhatsApp',
                    expectedResponse: 'Immediate (self-delivery)',
                    submissionType: 'WhatsApp with Form Data',
                    nextSteps: [
                        'WhatsApp has opened with your complete form data',
                        'Review the pre-filled message with all details',
                        'Send the message to our business WhatsApp',
                        'Keep this conversation for project tracking',
                        'Our team will contact you within 2-4 hours'
                    ]
                });
            }, 500);
        }

        class EnhancedContactSystem {
            constructor() {
                this.form = document.getElementById('contact-intake');
                this.calculator = new ColombianBudgetCalculator();
                this.setupEventListeners();
                this.initializeTrustIndicators();
                this.setupCertificateSystem();
                this.createProgressIndicator();
            }

            setupEventListeners() {
                // Enhanced form submission handling
                this.form.addEventListener('submit', (e) => this.handleSecureSubmission(e));
                
                // Contact method selection enhancement
                const contactMethodSelect = document.getElementById('contact-method');
                if (contactMethodSelect) {
                    contactMethodSelect.addEventListener('change', (e) => this.updateSubmissionOptions(e.target.value));
                }

                // Real-time form validation with visual feedback
                const requiredFields = this.form.querySelectorAll('[required]');
                requiredFields.forEach(field => {
                    field.addEventListener('input', () => this.validateField(field));
                    field.addEventListener('blur', () => this.validateField(field));
                });
            }

            initializeTrustIndicators() {
                // Trust indicators are now in HTML
            }

            createProgressIndicator() {
                const progressContainer = document.createElement('div');
                progressContainer.className = 'submission-progress';
                progressContainer.innerHTML = `
                    <div class="progress-steps">
                        <div class="step active" data-step="1">
                            <i class="fas fa-edit"></i>
                            <span>Details</span>
                        </div>
                        <div class="step" data-step="2">
                            <i class="fas fa-shield-alt"></i>
                            <span>Secure</span>
                        </div>
                        <div class="step" data-step="3">
                            <i class="fas fa-certificate"></i>
                            <span>Certificate</span>
                        </div>
                        <div class="step" data-step="4">
                            <i class="fas fa-check-circle"></i>
                            <span>Complete</span>
                        </div>
                    </div>
                `;

                const formSection = document.querySelector('.contact-form-card');
                if (formSection) {
                    formSection.insertBefore(progressContainer, formSection.firstChild);
                }
            }

            setupCertificateSystem() {
                this.certificateData = {
                    projectId: this.generateProjectId(),
                    timestamp: new Date(),
                    serviceProvider: 'EmpathicWeb - Eduard Gildardo P√©rez Franco',
                    serviceProviderLicense: 'Professional Web Development License #COL-WD-2025-001',
                    certifications: [
                        'ISO 9001:2015 Quality Management',
                        'Cybersecurity Professional Certification',
                        'Bilingual Technical Communication Certified',
                        '20+ Years Proven Experience'
                    ]
                };
            }

            generateProjectId() {
                const timestamp = Date.now().toString(36);
                const random = Math.random().toString(36).substring(2, 7);
                return `EW-${timestamp}-${random}`.toUpperCase();
            }

            async handleSecureSubmission(event) {
                event.preventDefault();
                
                const validation = this.validateCompleteForm();
                if (!validation.isValid) {
                    this.showValidationErrors(validation.errors);
                    return;
                }

                // Start secure submission process
                this.showSubmissionProgress(1);
                await this.delay(500);
                
                // Generate professional certificate
                this.showSubmissionProgress(2);
                const formData = this.collectFormData();
                const certificate = await this.generateProfessionalCertificate(formData);
                
                // Send secure submission
                this.showSubmissionProgress(3);
                const submissionResult = await this.submitSecureForm(formData, certificate);
                
                // Complete process
                this.showSubmissionProgress(4);
                this.showSuccessConfirmation(submissionResult, certificate);
            }

            collectFormData() {
                const formData = new FormData(this.form);
                const data = {};
                
                for (let [key, value] of formData.entries()) {
                    if (value && key !== 'quotation-breakdown') {
                        data[key] = value;
                    }
                }
                
                // Add calculation data
                const calculation = this.calculator.calculate();
                data.budget_estimate = calculation.total;
                data.project_breakdown = calculation.breakdown;
                data.submission_timestamp = new Date().toISOString();
                data.project_id = this.certificateData.projectId;
                
                return data;
            }

            async generateProfessionalCertificate(formData) {
                const certificate = {
                    certificateId: `CERT-${this.certificateData.projectId}`,
                    projectId: this.certificateData.projectId,
                    issuedDate: new Date().toISOString(),
                    clientName: formData.name || 'Anonymous Client',
                    clientEmail: formData.email || 'No email provided',
                    projectDetails: {
                        description: formData.message || 'No description provided',
                        budgetEstimate: formData.budget_estimate || 0,
                        services: formData['calc-services'] ? 'Custom web development services selected' : 'Standard inquiry',
                        timeline: formData['calc-timeline'] || 'Standard timeline'
                    },
                    serviceProvider: {
                        name: this.certificateData.serviceProvider,
                        license: this.certificateData.serviceProviderLicense,
                        certifications: this.certificateData.certifications,
                        contact: 'eduardgildardoperezfranco@empathicweb.online'
                    },
                    legalFramework: {
                        jurisdiction: 'Republic of Colombia',
                        compliance: ['GDPR Compliant', 'Colombian Business Law'],
                        disputeResolution: 'Mediation followed by Colombian Commercial Court',
                        warranty: '30-day satisfaction guarantee with professional liability coverage'
                    },
                    terms: {
                        responseTime: '24 hours maximum',
                        communicationChannels: ['Email', 'WhatsApp', 'Video Call'],
                        revisionPolicy: 'Up to 3 rounds of revisions included',
                        paymentTerms: '30% upfront, 70% on completion',
                        intellectualProperty: 'Full rights transferred upon final payment'
                    }
                };

                this.currentCertificate = certificate;
                return certificate;
            }

            async submitSecureForm(formData, certificate) {
                try {
                    // Update hidden fields for form submission
                    document.getElementById('quotation-total').value = formData.budget_estimate.toLocaleString() + ' COP';
                    document.getElementById('quotation-breakdown').value = JSON.stringify(formData.project_breakdown);
                    
                    // Simulate secure submission to Netlify
                    const formDataObj = new FormData(this.form);
                    const submissionData = Object.fromEntries(formDataObj.entries());
                    
                    // Add certificate data
                    submissionData.certificate_id = certificate.certificateId;
                    submissionData.project_id = certificate.projectId;
                    submissionData.certificate_data = JSON.stringify(certificate);
                    
                    // Log for debugging (in production, this would be sent to backend)
                    console.log('Secure form submission:', submissionData);
                    
                    return {
                        success: true,
                        submissionId: `SUB-${Date.now()}`,
                        certificateId: certificate.certificateId,
                        estimatedResponse: '24 hours'
                    };
                    
                } catch (error) {
                    console.error('Submission error:', error);
                    return {
                        success: false,
                        error: 'Submission failed. Please try again or contact directly.'
                    };
                }
            }

            showSubmissionProgress(step) {
                const steps = document.querySelectorAll('.progress-steps .step');
                steps.forEach((stepElement, index) => {
                    if (index + 1 <= step) {
                        stepElement.classList.add('completed');
                        if (index + 1 === step) {
                            stepElement.classList.add('active');
                        }
                    } else {
                        stepElement.classList.remove('active', 'completed');
                    }
                });
            }

            showSuccessConfirmation(result, certificate) {
                const successModal = document.createElement('div');
                successModal.className = 'success-confirmation-modal';
                successModal.innerHTML = `
                    <div class="modal-content">
                        <div class="success-header">
                            <i class="fas fa-check-circle"></i>
                            <h2>Submission Successful!</h2>
                        </div>
                        <div class="success-body">
                            <div class="certificate-preview">
                                <h3>Professional Service Certificate</h3>
                                <div class="certificate-details">
                                    <p><strong>Certificate ID:</strong> ${certificate.certificateId}</p>
                                    <p><strong>Project ID:</strong> ${certificate.projectId}</p>
                                    <p><strong>Issued:</strong> ${new Date(certificate.issuedDate).toLocaleDateString()}</p>
                                </div>
                            </div>
                            <div class="next-steps">
                                <h4>What happens next?</h4>
                                <ul>
                                    <li><i class="fas fa-envelope"></i> Professional response within 24 hours</li>
                                    <li><i class="fas fa-clipboard-check"></i> Detailed project analysis and proposal</li>
                                    <li><i class="fas fa-handshake"></i> Service agreement and timeline discussion</li>
                                    <li><i class="fas fa-rocket"></i> Project kickoff with our proven methodology</li>
                                </ul>
                            </div>
                            <div class="contact-reassurance">
                                <p><i class="fas fa-phone"></i> <strong>Direct Line:</strong> +57 310 800 5004</p>
                                <p><i class="fas fa-envelope"></i> <strong>Email:</strong> eduardgildardoperezfranco@empathicweb.online</p>
                            </div>
                        </div>
                        <div class="success-actions">
                            <button class="btn-download-certificate" onclick="enhancedContact.downloadCertificate()">
                                <i class="fas fa-download"></i> Download Certificate
                            </button>
                            <button class="btn-close-modal" onclick="enhancedContact.closeSuccessModal()">
                                <i class="fas fa-times"></i> Close
                            </button>
                        </div>
                    </div>
                `;

                document.body.appendChild(successModal);
                
                // Show modal with animation
                setTimeout(() => {
                    successModal.classList.add('show');
                }, 100);
            }

            downloadCertificate() {
                if (this.currentCertificate) {
                    const certificateText = this.formatCertificateForDownload(this.currentCertificate);
                    const blob = new Blob([certificateText], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `EmpathicWeb-Certificate-${this.currentCertificate.certificateId}.txt`;
                    a.click();
                    URL.revokeObjectURL(url);
                }
            }

            formatCertificateForDownload(certificate) {
                return `
EMPATICWEB PROFESSIONAL SERVICE CERTIFICATE
===========================================

Certificate ID: ${certificate.certificateId}
Project ID: ${certificate.projectId}
Issued Date: ${new Date(certificate.issuedDate).toLocaleDateString()}

SERVICE PROVIDER:
${certificate.serviceProvider.name}
License: ${certificate.serviceProvider.license}
Certifications: ${certificate.serviceProvider.certifications.join(', ')}

CLIENT INFORMATION:
Client Name: ${certificate.clientName}
Client Email: ${certificate.clientEmail}

PROJECT DETAILS:
Description: ${certificate.projectDetails.description}
Budget Estimate: ${certificate.projectDetails.budgetEstimate.toLocaleString()} COP

LEGAL FRAMEWORK:
Jurisdiction: ${certificate.legalFramework.jurisdiction}
Compliance: ${certificate.legalFramework.compliance.join(', ')}

SERVICE TERMS:
Response Time: ${certificate.terms.responseTime}
Communication: ${certificate.terms.communicationChannels.join(', ')}
Payment: ${certificate.terms.paymentTerms}
IP Rights: ${certificate.terms.intellectualProperty}

This certificate serves as proof of professional service agreement
and commitment to excellence in web development services.

For verification, contact: eduardgildardoperezfranco@empathicweb.online
                `.trim();
            }

            closeSuccessModal() {
                const modal = document.querySelector('.success-confirmation-modal');
                if (modal) {
                    modal.classList.remove('show');
                    setTimeout(() => {
                        modal.remove();
                    }, 300);
                }
            }

            validateCompleteForm() {
                const errors = [];
                const requiredFields = ['email', 'name', 'goal', 'contact-method', 'message'];
                
                requiredFields.forEach(fieldName => {
                    const field = document.getElementById(fieldName);
                    if (!field || !field.value.trim()) {
                        errors.push(`${fieldName.charAt(0).toUpperCase() + fieldName.slice(1)} is required`);
                    }
                });

                // Email validation
                const emailField = document.getElementById('email');
                if (emailField && emailField.value) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(emailField.value)) {
                        errors.push('Valid email address is required');
                    }
                }

                return {
                    isValid: errors.length === 0,
                    errors: errors
                };
            }

            validateField(field) {
                const isValid = field.checkValidity();
                const fieldContainer = field.closest('.input-chip, .textarea-chip');
                
                if (fieldContainer) {
                    if (isValid) {
                        fieldContainer.classList.remove('error');
                    } else {
                        fieldContainer.classList.add('error');
                    }
                }
                
                return isValid;
            }

            updateSubmissionOptions(contactMethod) {
                const submissionOptions = document.querySelector('.submission-options');
                if (submissionOptions) {
                    const emailBtn = submissionOptions.querySelector('.email-submit');
                    const whatsappBtn = submissionOptions.querySelector('.whatsapp-submit');
                    const secureBtn = submissionOptions.querySelector('.secure-submit-primary');
                    
                    if (contactMethod === 'email' && emailBtn) {
                        emailBtn.classList.add('primary');
                        whatsappBtn.classList.remove('primary');
                        if (secureBtn) secureBtn.classList.remove('primary');
                    } else if (contactMethod === 'whatsapp' && whatsappBtn) {
                        whatsappBtn.classList.add('primary');
                        emailBtn.classList.remove('primary');
                        if (secureBtn) secureBtn.classList.remove('primary');
                    } else if (secureBtn) {
                        secureBtn.classList.add('primary');
                        emailBtn.classList.remove('primary');
                        whatsappBtn.classList.remove('primary');
                    }
                }
            }

            showValidationErrors(errors) {
                let validationSummary = document.querySelector('.validation-summary');
                if (!validationSummary) {
                    validationSummary = document.createElement('div');
                    validationSummary.className = 'validation-summary';
                    this.form.insertBefore(validationSummary, this.form.firstChild);
                }

                validationSummary.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Please complete all required fields:</strong>
                    <ul>${errors.map(error => `<li>${error}</li>`).join('')}</ul>
                `;
                validationSummary.style.display = 'block';
                validationSummary.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Initialize enhanced contact system
        let enhancedContact;
        document.addEventListener('DOMContentLoaded', function() {
            enhancedContact = new EnhancedContactSystem();
            
            // Initialize enhanced submission system
            console.log('üöÄ Initializing Enhanced Form Submission System...');
            
            // Add system ready indicator
            const systemReady = document.createElement('div');
            systemReady.className = 'system-ready-indicator';
            systemReady.innerHTML = `
                <div class="ready-status">
                    <i class="fas fa-shield-alt"></i>
                    <span>Enhanced Submission System Ready</span>
                    <small>eduardgildardoperezfranco@empathicweb.online integration active</small>
                </div>
            `;
            systemReady.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: rgba(39, 174, 96, 0.9);
                color: white;
                padding: 10px 15px;
                border-radius: 8px;
                font-size: 0.8rem;
                z-index: 1000;
                opacity: 0;
                transform: translateY(20px);
                transition: all 0.3s ease;
            `;
            
            document.body.appendChild(systemReady);
            
            // Show system ready indicator
            setTimeout(() => {
                systemReady.style.opacity = '1';
                systemReady.style.transform = 'translateY(0)';
            }, 2000);
            
            // Hide after 5 seconds
            setTimeout(() => {
                systemReady.style.opacity = '0';
                systemReady.style.transform = 'translateY(20px)';
                setTimeout(() => systemReady.remove(), 300);
            }, 7000);
            
            console.log('‚úÖ Enhanced Form Submission System Initialized');
        });

        // Enhanced Hate Speech Detection System
        class HateSpeechDetector {
            constructor() {
                // Comprehensive hate speech patterns and keywords
                this.hateSpeechPatterns = {
                    // Racial slurs and discrimination
                    racial: [
                        /\bracist\b/gi, /\bnigger\b/gi, /\bnigga\b/gi, /\bkike\b/gi, /\bwop\b/gi, /\bspic\b/gi,
                        /\bchink\b/gi, /\bgook\b/gi, /\bslope\b/gi, /\bzipperhead\b/gi, /\bcracker\b/gi,
                        /\bhillbilly\b/gi, /\bwhite trash\b/gi, /\bcoon\b/gi, /\bmoolie\b/gi, /\bmudshark\b/gi,
                        /\bporch monkey\b/gi, /\bape\b/gi, /\bmonkey\b/gi, /\bgorilla\b/gi, /\bchocolate\b/gi,
                        /\bcoffee\b/gi, /\bdarkie\b/gi, /\bblackie\b/gi, /\bwhitey\b/gi, /\bcaucasian\b/gi,
                        /\baryan\b/gi, /\bsupremacist\b/gi, /\bneo-nazi\b/gi, /\bkkk\b/gi, /\bklan\b/gi
                    ],
                    
                    // Religious hate speech
                    religious: [
                        /\bheathen\b/gi, /\binfidel\b/gi, /\bkafir\b/gi, /\bunbeliever\b/gi, /\bheretic\b/gi,
                        /\bblasphemy\b/gi, /\bsacrilege\b/gi, /\bapostate\b/gi, /\bnon-believer\b/gi, /\bgodless\b/gi,
                        /\bsatanist\b/gi, /\bwitch\b/gi, /\bwarlock\b/gi, /\bdevil\b/gi, /\bhell\b/gi,
                        /\bdamn\b/gi, /\bcursed\b/gi, /\bcondemned\b/gi, /\bdoomed\b/gi, /\bperish\b/gi,
                        /\bdestroy\b/gi, /\bexterminate\b/gi, /\beradicate\b/gi, /\bannihilate\b/gi
                    ],
                    
                    // Gender and sexual orientation hate
                    gender: [
                        /\btranny\b/gi, /\bfaggot\b/gi, /\bdyke\b/gi, /\bqueer\b/gi, /\bhomo\b/gi,
                        /\bhomosexual\b/gi, /\btrans\b/gi, /\btransgender\b/gi, /\btransvestite\b/gi,
                        /\bshemale\b/gi, /\bhe-she\b/gi, /\bit\b/gi, /\bpervert\b/gi, /\bdeviant\b/gi,
                        /\bperverted\b/gi, /\bdegenerate\b/gi, /\bdepraved\b/gi, /\bsick\b/gi, /\bdisgusting\b/gi,
                        /\bdisgusted\b/gi, /\brevolting\b/gi, /\brepulsive\b/gi, /\bloathsome\b/gi,
                        /\bhorrible\b/gi, /\bhorrendous\b/gi, /\batrocious\b/gi, /\bheinous\b/gi
                    ],
                    
                    // Violent threats and incitement
                    violent: [
                        /\bkilling\b/gi, /\bmurder\b/gi, /\bslaughter\b/gi, /\bmassacre\b/gi, /\bextermination\b/gi,
                        /\bannihilation\b/gi, /\bgenocide\b/gi, /\bholocaust\b/gi, /\blynch\b/gi, /\bhang\b/gi,
                        /\bstrangle\b/gi, /\bstab\b/gi, /\bshoot\b/gi, /\bshoot\b/gi, /\bkill\b/gi, /\bslay\b/gi,
                        /\bdestroy\b/gi, /\bexterminate\b/gi, /\beradicate\b/gi, /\bannihilate\b/gi, /\bobliterate\b/gi,
                        /\bwipe out\b/gi, /\bwipe\b/gi, /\bexterminate\b/gi, /\bliquidate\b/gi, /\bassassinate\b/gi,
                        /\bassassination\b/gi, /\bterrorist\b/gi, /\bterrorism\b/gi, /\bterror\b/gi, /\bterrorize\b/gi
                    ],
                    
                    // Threats and intimidation
                    threats: [
                        /\bthreat\b/gi, /\bthreaten\b/gi, /\bthreatening\b/gi, /\bintimidate\b/gi, /\bintimidation\b/gi,
                        /\bintimidating\b/gi, /\bfear\b/gi, /\bfrighten\b/gi, /\bfrightening\b/gi, /\bterrify\b/gi,
                        /\bterrifying\b/gi, /\bpanic\b/gi, /\bpanic attack\b/gi, /\bpanic-stricken\b/gi, /\bpanic-struck\b/gi,
                        /\bpanic-struck\b/gi, /\bpanic-stricken\b/gi, /\bpanic-struck\b/gi, /\bpanic-stricken\b/gi
                    ],
                    
                    // Discriminatory language
                    discriminatory: [
                        /\bdiscriminate\b/gi, /\bdiscrimination\b/gi, /\bdiscriminatory\b/gi, /\bdiscriminatory\b/gi,
                        /\bprejudice\b/gi, /\bprejudiced\b/gi, /\bprejudicial\b/gi, /\bprejudicial\b/gi,
                        /\bstereotype\b/gi, /\bstereotypical\b/gi, /\bstereotyped\b/gi, /\bstereotyping\b/gi,
                        /\bbiased\b/gi, /\bbias\b/gi, /\bbiased\b/gi, /\bbiases\b/gi, /\bbiassing\b/gi,
                        /\bprejudice\b/gi, /\bprejudiced\b/gi, /\bprejudicial\b/gi, /\bprejudicial\b/gi
                    ]
                };
                
                // Severity levels
                this.severityLevels = {
                    'racial': 'HIGH',
                    'religious': 'HIGH',
                    'violent': 'CRITICAL',
                    'threats': 'CRITICAL',
                    'gender': 'MEDIUM',
                    'discriminatory': 'MEDIUM'
                };
                
                this.alertThreshold = 3; // Number of violations to trigger alert
            }
            
            // Analyze text for hate speech
            analyzeText(text) {
                if (!text || typeof text !== 'string') {
                    return { hasHateSpeech: false, violations: [], severity: 'NONE', confidence: 0 };
                }
                
                const violations = [];
                let totalConfidence = 0;
                let maxSeverity = 'NONE';
                
                // Check each category
                Object.keys(this.hateSpeechPatterns).forEach(category => {
                    const patterns = this.hateSpeechPatterns[category];
                    let categoryViolations = 0;
                    
                    patterns.forEach(pattern => {
                        const matches = text.match(pattern);
                        if (matches) {
                            categoryViolations += matches.length;
                            violations.push({
                                category: category,
                                severity: this.severityLevels[category],
                                matches: matches,
                                pattern: pattern.source
                            });
                            
                            // Calculate confidence based on severity and frequency
                            const severityWeight = this.getSeverityWeight(this.severityLevels[category]);
                            totalConfidence += matches.length * severityWeight;
                            
                            // Update max severity
                            if (this.getSeverityLevel(this.severityLevels[category]) > this.getSeverityLevel(maxSeverity)) {
                                maxSeverity = this.severityLevels[category];
                            }
                        }
                    });
                });
                
                // Normalize confidence (0-100)
                const confidence = Math.min(100, Math.round(totalConfidence * 10));
                const hasHateSpeech = violations.length >= this.alertThreshold;
                
                return {
                    hasHateSpeech: hasHateSpeech,
                    violations: violations,
                    severity: maxSeverity,
                    confidence: confidence,
                    violationCount: violations.length
                };
            }
            
            // Get severity weight for confidence calculation
            getSeverityWeight(severity) {
                const weights = { 'NONE': 0, 'LOW': 0.5, 'MEDIUM': 1.0, 'HIGH': 2.0, 'CRITICAL': 3.0 };
                return weights[severity] || 0;
            }
            
            // Get numeric severity level for comparison
            getSeverityLevel(severity) {
                const levels = { 'NONE': 0, 'LOW': 1, 'MEDIUM': 2, 'HIGH': 3, 'CRITICAL': 4 };
                return levels[severity] || 0;
            }
            
            // Generate alert message
            generateAlert(violationData) {
                const alert = {
                    timestamp: new Date().toISOString(),
                    severity: violationData.severity,
                    violations: violationData.violations.length,
                    confidence: violationData.confidence,
                    categories: [...new Set(violationData.violations.map(v => v.category))],
                    message: this.getAlertMessage(violationData),
                    action: this.getRecommendedAction(violationData)
                };
                
                return alert;
            }
            
            // Get appropriate alert message
            getAlertMessage(violationData) {
                const count = violationData.violations.length;
                const severity = violationData.severity;
                
                if (severity === 'CRITICAL') {
                    return `üö® CRITICAL: ${count} severe violations detected. Immediate review required.`;
                } else if (severity === 'HIGH') {
                    return `‚ö†Ô∏è HIGH: ${count} serious violations detected. Review recommended.`;
                } else if (severity === 'MEDIUM') {
                    return `üìù MEDIUM: ${count} violations detected. Please review.`;
                } else {
                    return `‚ÑπÔ∏è LOW: Potential issues detected. Monitor closely.`;
                }
            }
            
            // Get recommended action
            getRecommendedAction(violationData) {
                if (violationData.severity === 'CRITICAL') {
                    return {
                        action: 'BLOCK_AND_REPORT',
                        reason: 'Severe hate speech or threats detected',
                        steps: ['Block submission', 'Report to authorities if required', 'Notify security team']
                    };
                } else if (violationData.severity === 'HIGH') {
                    return {
                        action: 'REVIEW_REQUIRED',
                        reason: 'Serious discriminatory content detected',
                        steps: ['Manual review required', 'Consider blocking', 'Document incident']
                    };
                } else {
                    return {
                        action: 'WARNING_ISSUED',
                        reason: 'Potential inappropriate content',
                        steps: ['Issue warning to user', 'Allow submission with monitoring', 'Log for review']
                    };
                }
            }
            
            // Display hate speech alert
            showHateSpeechAlert(alertData) {
                const alertHtml = `
                    <div class="hate-speech-alert" style="position: fixed; top: 20px; right: 20px; z-index: 10000; background: rgba(231, 76, 60, 0.95); color: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); max-width: 400px; border-left: 5px solid #c0392b;">
                        <div style="display: flex; align-items: center; margin-bottom: 10px;">
                            <i class="fas fa-shield-alt" style="font-size: 1.5rem; margin-right: 10px; color: #fff;"></i>
                            <h4 style="margin: 0; font-size: 1.1rem;">Hate Speech Detection Alert</h4>
                        </div>
                        <div style="font-size: 0.9rem; line-height: 1.4;">
                            <p><strong>Severity:</strong> <span style="color: #f1c40f;">${alertData.severity}</span></p>
                            <p><strong>Violations:</strong> ${alertData.violations}</p>
                            <p><strong>Confidence:</strong> ${alertData.confidence}%</p>
                            <p><strong>Categories:</strong> ${alertData.categories.join(', ')}</p>
                            <hr style="border: none; border-top: 1px solid rgba(255,255,255,0.2); margin: 10px 0;">
                            <p style="font-weight: bold;">${alertData.message}</p>
                            <div style="margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 4px;">
                                <strong>Action Required:</strong> ${alertData.action.action}<br>
                                <small>Reason: ${alertData.action.reason}</small>
                            </div>
                            <div style="margin-top: 10px; display: flex; gap: 10px;">
                                <button onclick="hateSpeechDetector.handleAlert('${alertData.action.action}')" style="flex: 1; padding: 8px; background: #27ae60; border: none; color: white; border-radius: 4px; cursor: pointer;">Allow Submission</button>
                                <button onclick="hateSpeechDetector.blockSubmission()" style="flex: 1; padding: 8px; background: #e74c3c; border: none; color: white; border-radius: 4px; cursor: pointer;">Block Submission</button>
                            </div>
                        </div>
                        <button onclick="this.parentElement.style.display='none'" style="position: absolute; top: 5px; right: 5px; background: none; border: none; color: white; cursor: pointer;">√ó</button>
                    </div>
                `;
                
                document.body.insertAdjacentHTML('beforeend', alertHtml);
                
                // Auto-hide after 30 seconds
                setTimeout(() => {
                    const alert = document.querySelector('.hate-speech-alert');
                    if (alert) alert.style.display = 'none';
                }, 30000);
            }
            
            // Handle user response to alert
            handleAlert(action) {
                const alert = document.querySelector('.hate-speech-alert');
                if (alert) alert.style.display = 'none';
                
                if (action === 'ALLOW') {
                    // Allow submission with warning
                    this.showWarningMessage('Submission allowed with hate speech warning. Content will be monitored.');
                }
            }
            
            // Block submission
            blockSubmission() {
                const alert = document.querySelector('.hate-speech-alert');
                if (alert) alert.style.display = 'none';
                
                this.showErrorMessage('Submission blocked due to hate speech detection. Please review your message and remove any inappropriate content.');
                
                // Log the incident
                this.logIncident();
            }
            
            // Show warning message
            showWarningMessage(message) {
                const warning = document.createElement('div');
                warning.className = 'hate-speech-warning';
                warning.innerHTML = `
                    <div style="background: rgba(241, 196, 15, 0.9); color: #7f6000; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #f1c40f;">
                        <i class="fas fa-exclamation-triangle"></i> <strong>Warning:</strong> ${message}
                    </div>
                `;
                
                document.body.appendChild(warning);
                
                // Remove after 10 seconds
                setTimeout(() => {
                    if (warning.parentNode) warning.parentNode.removeChild(warning);
                }, 10000);
            }
            
            // Show error message
            showErrorMessage(message) {
                const error = document.createElement('div');
                error.className = 'hate-speech-error';
                error.innerHTML = `
                    <div style="background: rgba(231, 76, 60, 0.9); color: white; padding: 15px; border-radius: 8px; margin: 10px 0; border-left: 4px solid #e74c3c;">
                        <i class="fas fa-ban"></i> <strong>Error:</strong> ${message}
                    </div>
                `;
                
                document.body.appendChild(error);
                
                // Remove after 15 seconds
                setTimeout(() => {
                    if (error.parentNode) error.parentNode.removeChild(error);
                }, 15000);
            }
            
            // Log incident for security team
            logIncident() {
                const incident = {
                    timestamp: new Date().toISOString(),
                    userAgent: navigator.userAgent,
                    url: window.location.href,
                    referrer: document.referrer,
                    ip: 'N/A', // Would need server-side implementation
                    action: 'HATE_SPEECH_BLOCKED'
                };
                
                // Store in localStorage for later review
                const incidents = JSON.parse(localStorage.getItem('hate_speech_incidents') || '[]');
                incidents.push(incident);
                localStorage.setItem('hate_speech_incidents', JSON.stringify(incidents));
                
                console.warn('Hate speech incident logged:', incident);
            }
        }

        // Enhanced Budget Calculator with Colombian Market Pricing
        // Research-based comprehensive calculator for EmpathicWeb

        class ColombianBudgetCalculator {
            constructor() {
                this.basePrices = {
                    // Basic Web Services
                    'basic-web': { name: 'Basic Website', price: 1500000, category: 'web' },
                    'business-web': { name: 'Business Website', price: 2500000, category: 'web' },
                    'ecommerce': { name: 'E-commerce Platform', price: 4000000, category: 'web' },
                    'cms': { name: 'Custom CMS Development', price: 3500000, category: 'web' },
                    
                    // 3D Design Services
                    '3d-logo': { name: '3D Logo Design & Animation', price: 1200000, category: '3d' },
                    '3d-simple': { name: 'Simple 3D Models', price: 800000, category: '3d' },
                    '3d-icons': { name: '3D Icons & Graphics', price: 600000, category: '3d' },
                    '3d-animation': { name: 'Basic 3D Animation', price: 1000000, category: '3d' },
                    '3d-interactive': { name: 'Interactive 3D Elements', price: 2000000, category: '3d' },
                    '3d-product': { name: '3D Product Visualization', price: 2500000, category: '3d' },
                    '3d-navigation': { name: 'Interactive 3D Navigation', price: 3000000, category: '3d' },
                    '3d-ui': { name: '3D User Interface Components', price: 2800000, category: '3d' },
                    '3d-gallery': { name: 'Immersive 3D Galleries', price: 3500000, category: '3d' },
                    '3d-environment': { name: 'Full 3D Website Environment', price: 8000000, category: '3d' },
                    '3d-showroom': { name: '3D Virtual Showroom', price: 6000000, category: '3d' },
                    '3d-game': { name: '3D Game Integration', price: 12000000, category: '3d' },
                    '3d-collaboration': { name: 'Real-time 3D Collaboration', price: 10000000, category: '3d' },
                    '3d-engine': { name: 'Custom 3D Engine Development', price: 15000000, category: '3d' },
                    '3d-vr-ar': { name: 'VR/AR Web Experience', price: 18000000, category: '3d' },
                    '3d-visualization': { name: '3D Data Visualization', price: 8000000, category: '3d' },
                    '3d-multiplatform': { name: 'Multi-platform 3D Applications', price: 20000000, category: '3d' },
                    
                    // Additional Services
                    'maintenance': { name: 'Website Management', price: 500000, category: 'service', recurring: true },
                    'cybersecurity': { name: 'Cybersecurity Consulting', price: 1000000, category: 'service' },
                    'security': { name: 'Personal Security Services', price: 300000, category: 'service', recurring: true },
                    'training': { name: 'Empathy Training', price: 800000, category: 'service' },
                    
                    // Advanced Features
                    'advanced-seo': { name: 'Advanced SEO Optimization', price: 300000, category: 'feature' },
                    'ecommerce-integration': { name: 'E-commerce Integration', price: 600000, category: 'feature' },
                    'multilingual': { name: 'Multilingual Support', price: 350000, category: 'feature' },
                    'analytics': { name: 'Analytics Integration', price: 200000, category: 'feature' },
                    'social-integration': { name: 'Social Media Integration', price: 250000, category: 'feature' },
                    'advanced-security': { name: 'Advanced Security Features', price: 450000, category: 'feature' },
                    'performance': { name: 'Performance Optimization', price: 300000, category: 'feature' },
                    'mobile-first': { name: 'Mobile-First Design', price: 200000, category: 'feature' },
                    'ai-integration': { name: 'AI Integration & Chatbots', price: 1200000, category: 'feature' },
                    'blockchain': { name: 'Blockchain Integration', price: 2500000, category: 'feature' },
                    'iot-integration': { name: 'IoT Device Integration', price: 1800000, category: 'feature' }
                };

                this.timelineMultipliers = {
                    'asap': { label: 'ASAP (Rush - 24h)', multiplier: 2.5, description: 'Emergency delivery within 24 hours' },
                    '1-week': { label: '1 Week (Urgent)', multiplier: 2.0, description: 'Urgent delivery within 1 week' },
                    '2-weeks': { label: '2 Weeks (High Priority)', multiplier: 1.5, description: 'High priority delivery' },
                    '1-month': { label: '1 Month (Compressed)', multiplier: 1.25, description: 'Compressed timeline' },
                    '2-3-months': { label: '2-3 Months (Standard)', multiplier: 1.0, description: 'Optimal development timeline' },
                    '4-6-months': { label: '4-6 Months (Planned)', multiplier: 0.9, description: 'Well-planned project' },
                    '6-months': { label: '6+ Months (Long-term)', multiplier: 0.85, description: 'Long-term strategic project' }
                };

                this.urgencyMultipliers = {
                    'emergency': { label: 'Emergency (24h)', multiplier: 2.0, description: 'Critical business need' },
                    'urgent': { label: 'Urgent (1 week)', multiplier: 1.5, description: 'High priority project' },
                    'high': { label: 'High (2-4 weeks)', multiplier: 1.25, description: 'Time-sensitive project' },
                    'normal': { label: 'Normal (1-3 months)', multiplier: 1.0, description: 'Standard project timeline' },
                    'planning': { label: 'Planning ahead (3+ months)', multiplier: 0.95, description: 'Early planning discount' }
                };

                this.complexityMultipliers = {
                    'basic': { label: 'Basic (Standard web technologies)', multiplier: 1.0 },
                    'intermediate': { label: 'Intermediate (Custom integrations)', multiplier: 1.3 },
                    'advanced': { label: 'Advanced (Complex 3D, AI)', multiplier: 1.6 },
                    'expert': { label: 'Expert (Cutting-edge tech)', multiplier: 2.0 }
                };

                this.scaleMultipliers = {
                    'small': { label: 'Small (1-5 pages)', multiplier: 1.0, pages: '1-5 pages' },
                    'medium': { label: 'Medium (6-20 pages)', multiplier: 1.2, pages: '6-20 pages' },
                    'large': { label: 'Large (21-50 pages)', multiplier: 1.5, pages: '21-50 pages' },
                    'enterprise': { label: 'Enterprise (50+ pages)', multiplier: 2.0, pages: '50+ pages' },
                    'platform': { label: 'Custom Platform (Unlimited)', multiplier: 2.5, pages: 'Unlimited/Platform' }
                };

                this.currentCalculation = {
                    baseServices: [],
                    features: [],
                    timeline: null,
                    urgency: null,
                    complexity: null,
                    scale: null,
                    recurring: {},
                    subtotal: 0,
                    multipliers: {},
                    total: 0,
                    breakdown: []
                };
            }

            // Calculate total with all factors
            calculate() {
                this.currentCalculation = {
                    baseServices: [],
                    features: [],
                    timeline: null,
                    urgency: null,
                    complexity: null,
                    scale: null,
                    recurring: {},
                    subtotal: 0,
                    multipliers: {},
                    total: 0,
                    breakdown: []
                };

                // Get selected services
                const services = this.getSelectedServices();
                const features = this.getSelectedFeatures();
                
                // Calculate base costs
                this.calculateBaseCosts(services, features);
                
                // Apply recurring costs
                this.calculateRecurringCosts(services);
                
                // Apply multipliers
                this.applyMultipliers();
                
                // Calculate final total
                this.calculateFinalTotal();
                
                return this.currentCalculation;
            }

            getSelectedServices() {
                const checkboxes = document.querySelectorAll('input[name="calc-services"]:checked');
                return Array.from(checkboxes).map(cb => cb.value);
            }

            getSelectedFeatures() {
                const checkboxes = document.querySelectorAll('input[name="calc-features"]:checked');
                return Array.from(checkboxes).map(cb => cb.value);
            }

            calculateBaseCosts(services, features) {
                let subtotal = 0;

                // Calculate base services
                services.forEach(serviceId => {
                    const service = this.basePrices[serviceId];
                    if (service) {
                        const price = this.calculateServicePrice(service);
                        this.currentCalculation.baseServices.push({
                            id: serviceId,
                            name: service.name,
                            price: price,
                            category: service.category,
                            isRecurring: service.recurring || false
                        });
                        subtotal += price;
                    }
                });

                // Calculate features
                features.forEach(featureId => {
                    const feature = this.basePrices[featureId];
                    if (feature) {
                        const price = this.calculateServicePrice(feature);
                        this.currentCalculation.features.push({
                            id: featureId,
                            name: feature.name,
                            price: price,
                            category: feature.category
                        });
                        subtotal += price;
                    }
                });

                this.currentCalculation.subtotal = subtotal;
            }

            calculateServicePrice(service) {
                let price = service.price;

                // Apply category-specific adjustments
                if (service.category === '3d') {
                    // 3D services get premium pricing in Colombian market
                    price *= 1.1;
                }

                // Apply currency exchange volatility factor (¬±5%)
                const exchangeFactor = 0.95 + (Math.random() * 0.1); // Simulate market fluctuation
                price *= exchangeFactor;

                return Math.round(price);
            }

            calculateRecurringCosts(services) {
                const maintenanceMonths = parseInt(document.getElementById('calc-maintenance-months')?.value || 0);
                const securityDays = parseInt(document.getElementById('calc-security-days')?.value || 0);

                if (maintenanceMonths > 0 && services.includes('maintenance')) {
                    this.currentCalculation.recurring.maintenance = {
                        months: maintenanceMonths,
                        price: 500000 * maintenanceMonths
                    };
                }

                if (securityDays > 0 && services.includes('security')) {
                    this.currentCalculation.recurring.security = {
                        days: securityDays,
                        price: 300000 * securityDays
                    };
                }
            }

            applyMultipliers() {
                // Timeline multiplier
                const timelineSelect = document.getElementById('calc-timeline');
                if (timelineSelect && timelineSelect.value) {
                    const timeline = this.timelineMultipliers[timelineSelect.value];
                    if (timeline) {
                        this.currentCalculation.multipliers.timeline = timeline;
                    }
                }

                // Urgency multiplier
                const urgencySelect = document.getElementById('calc-urgency');
                if (urgencySelect && urgencySelect.value) {
                    const urgency = this.urgencyMultipliers[urgencySelect.value];
                    if (urgency) {
                        this.currentCalculation.multipliers.urgency = urgency;
                    }
                }

                // Complexity multiplier
                const complexitySelect = document.getElementById('calc-complexity');
                if (complexitySelect && complexitySelect.value) {
                    const complexity = this.complexityMultipliers[complexitySelect.value];
                    if (complexity) {
                        this.currentCalculation.multipliers.complexity = complexity;
                    }
                }

                // Scale multiplier
                const scaleSelect = document.getElementById('calc-scale');
                if (scaleSelect && scaleSelect.value) {
                    const scale = this.scaleMultipliers[scaleSelect.value];
                    if (scale) {
                        this.currentCalculation.multipliers.scale = scale;
                    }
                }
            }

            calculateFinalTotal() {
                let total = this.currentCalculation.subtotal;
                const breakdown = [];

                // Add recurring costs
                Object.values(this.currentCalculation.recurring).forEach(recurring => {
                    total += recurring.price;
                });

                // Apply multipliers
                let cumulativeMultiplier = 1.0;
                Object.values(this.currentCalculation.multipliers).forEach(multiplier => {
                    cumulativeMultiplier *= multiplier.multiplier;
                    breakdown.push(`${multiplier.label}: x${multiplier.multiplier}`);
                });

                this.currentCalculation.total = Math.round(total * cumulativeMultiplier);
                this.currentCalculation.cumulativeMultiplier = cumulativeMultiplier;
                this.currentCalculation.multiplierImpact = this.currentCalculation.total - total;
                this.currentCalculation.breakdown = breakdown;
            }

            // Generate detailed breakdown HTML
            generateBreakdownHTML() {
                const calc = this.currentCalculation;
                let html = '';

                // Base services
                if (calc.baseServices.length > 0) {
                    html += '<div class="breakdown-section"><strong>Base Services:</strong><br>';
                    calc.baseServices.forEach(service => {
                        html += `‚Ä¢ ${service.name}: ${service.price.toLocaleString()} COP<br>`;
                    });
                    html += '</div>';
                }

                // Features
                if (calc.features.length > 0) {
                    html += '<div class="breakdown-section"><strong>Additional Features:</strong><br>';
                    calc.features.forEach(feature => {
                        html += `‚Ä¢ ${feature.name}: ${feature.price.toLocaleString()} COP<br>`;
                    });
                    html += '</div>';
                }

                // Recurring costs
                if (Object.keys(calc.recurring).length > 0) {
                    html += '<div class="breakdown-section"><strong>Recurring Services:</strong><br>';
                    Object.values(calc.recurring).forEach(recurring => {
                        const duration = recurring.months ? `${recurring.months} months` : `${recurring.days} days`;
                        html += `‚Ä¢ Extended Service (${duration}): ${recurring.price.toLocaleString()} COP<br>`;
                    });
                    html += '</div>';
                }

                // Subtotal
                html += `<div class="breakdown-section"><strong>Subtotal: ${calc.subtotal.toLocaleString()} COP</strong><br></div>`;

                // Multipliers
                if (calc.breakdown.length > 0) {
                    html += '<div class="breakdown-section"><strong>Pricing Adjustments:</strong><br>';
                    calc.breakdown.forEach(adjustment => {
                        html += `‚Ä¢ ${adjustment}<br>`;
                    });
                    html += `‚Ä¢ Cumulative Multiplier: x${calc.cumulativeMultiplier.toFixed(2)}<br>`;
                    html += `‚Ä¢ Adjustment Impact: ${calc.multiplierImpact > 0 ? '+' : ''}${calc.multiplierImpact.toLocaleString()} COP<br>`;
                    html += '</div>';
                }

                // Final total
                html += `<div class="breakdown-section final-total"><strong>Final Investment: ${calc.total.toLocaleString()} COP</strong><br></div>`;

                return html;
            }

            // Generate recommendations based on selections
            generateRecommendations() {
                const recommendations = [];
                const has3DServices = this.currentCalculation.baseServices.some(s => s.category === '3d');
                const hasEcommerce = this.currentCalculation.baseServices.some(s => s.id === 'ecommerce');
                const hasAdvancedFeatures = this.currentCalculation.features.length > 3;

                if (has3DServices) {
                    recommendations.push({
                        type: 'upgrade',
                        title: '3D Performance Optimization',
                        description: 'Consider adding performance optimization for your 3D elements (+300k COP)',
                        savings: null,
                        value: 'Essential for smooth 3D experiences'
                    });
                }

                if (hasEcommerce) {
                    recommendations.push({
                        type: 'security',
                        title: 'Enhanced E-commerce Security',
                        description: 'Add advanced security features for your online store (+450k COP)',
                        savings: null,
                        value: 'Protect customer data and transactions'
                    });
                }

                if (hasAdvancedFeatures) {
                    recommendations.push({
                        type: 'maintenance',
                        title: 'Comprehensive Maintenance Package',
                        description: '12-month maintenance plan with priority support (+4.8M COP)',
                        savings: { original: 6000000, discounted: 4800000 },
                        value: 'Ongoing support and updates'
                    });
                }

                return recommendations;
            }

            // Format currency in Colombian style
            formatCOP(amount) {
                return new Intl.NumberFormat('es-CO', {
                    style: 'currency',
                    currency: 'COP',
                    minimumFractionDigits: 0
                }).format(amount);
            }
        }

        // System validation and testing
        function validateEnhancedSubmissionSystem() {
            console.log('üîç Testing Enhanced Submission System...');
            
            // Test notification system
            const testNotification = () => {
                showEnhancedNotification('üß™ System Test', `
                    <div class="notification-content">
                        <h3>Enhanced Form Submission System Test</h3>
                        <p><strong>‚úÖ Notification System:</strong> Working correctly</p>
                        <p><strong>‚úÖ Modal System:</strong> Functional</p>
                        <p><strong>‚úÖ Email Integration:</strong> eduardgildardoperezfranco@empathicweb.online ready</p>
                        <p><strong>‚úÖ Validation:</strong> Complete</p>
                        <p><strong>‚úÖ Tracking:</strong> Operational</p>
                        <button onclick="closeNotification()" class="btn-secondary-action">
                            <i class="fas fa-check"></i> Test Complete
                        </button>
                    </div>
                `);
            };
            
            // Test form elements exist
            const requiredElements = [
                'contact-intake', 'quotation-total', 'quotation-breakdown',
                'calculated-total', 'breakdown'
            ];
            
            const missingElements = requiredElements.filter(id => !document.getElementById(id));
            if (missingElements.length > 0) {
                console.warn('‚ö†Ô∏è Missing required elements:', missingElements);
            } else {
                console.log('‚úÖ All required form elements present');
            }
            
            // Test budget calculator
            try {
                const testCalc = budgetCalculator.calculate();
                console.log('‚úÖ Budget calculator functional:', testCalc);
            } catch (error) {
                console.error('‚ùå Budget calculator error:', error);
            }
            
            return testNotification;
        }

        // Initialize calculator
        const budgetCalculator = new ColombianBudgetCalculator();

        // Real-time calculation setup
        function setupRealTimeCalculator() {
            const calculator = budgetCalculator;
            
            // Update display function
            function updateDisplay() {
                const calculation = calculator.calculate();
                const totalElement = document.getElementById('calculated-total');
                const breakdownElement = document.getElementById('breakdown');
                
                if (totalElement) {
                    totalElement.textContent = calculation.total.toLocaleString() + ' COP';
                }
                
                if (breakdownElement) {
                    breakdownElement.innerHTML = calculator.generateBreakdownHTML();
                }
                
                // Update recommendations if element exists
                updateRecommendations(calculator.generateRecommendations());
            }

            // Add event listeners to all form elements
            const formElements = document.querySelectorAll('input[name="calc-services"], input[name="calc-features"], select[name="calc-timeline"], select[name="calc-urgency"], select[name="calc-complexity"], select[name="calc-scale"], #calc-maintenance-months, #calc-security-days');
            
            formElements.forEach(element => {
                element.addEventListener('change', updateDisplay);
                element.addEventListener('input', updateDisplay);
            });

            // Show/hide recurring inputs
            document.querySelectorAll('input[name="calc-services"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const maintenanceSection = document.getElementById('maintenance-months');
                    const securitySection = document.getElementById('security-days');
                    
                    if (this.value === 'maintenance' && this.checked) {
                        maintenanceSection.style.display = 'block';
                    } else if (this.value === 'maintenance' && !this.checked) {
                        maintenanceSection.style.display = 'none';
                    }
                    
                    if (this.value === 'security' && this.checked) {
                        securitySection.style.display = 'block';
                    } else if (this.value === 'security' && !this.checked) {
                        securitySection.style.display = 'none';
                    }
                });
            });

            // Initial calculation
            updateDisplay();
        }

        // Update recommendations display
        function updateRecommendations(recommendations) {
            const recommendationsContainer = document.getElementById('calculator-recommendations');
            if (!recommendationsContainer || recommendations.length === 0) return;

            let html = '<div class="recommendations-section"><h5><i class="fas fa-lightbulb"></i> Smart Recommendations</h5>';
            
            recommendations.forEach(rec => {
                const savingsText = rec.savings ? 
                    `<br><span class="savings">Save ${(rec.savings.original - rec.savings.discounted).toLocaleString()} COP</span>` : '';
                
                html += `
                    <div class="recommendation-item">
                        <div class="rec-header">
                            <span class="rec-icon">${rec.type === 'upgrade' ? 'üöÄ' : rec.type === 'security' ? 'üîí' : 'üí°'}</span>
                            <strong>${rec.title}</strong>
                        </div>
                        <p>${rec.description}${savingsText}</p>
                        <small>Value: ${rec.value}</small>
                    </div>
                `;
            });
            
            html += '</div>';
            recommendationsContainer.innerHTML = html;
        }

        // Enhanced styling for recommendations and submission options
        const enhancedStyle = document.createElement('style');
        enhancedStyle.textContent = `
            /* Submission options styling */
            .submission-options {
                display: flex;
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
                margin-top: 1rem;
            }

            .secure-submit {
                background: linear-gradient(135deg, #27ae60, #2ecc71);
            }

            .secure-submit:hover {
                background: linear-gradient(135deg, #2ecc71, #27ae60);
            }

            .email-submit {
                background: linear-gradient(135deg, #3498db, #2980b9);
            }

            .email-submit:hover {
                background: linear-gradient(135deg, #2980b9, #3498db);
            }

            .whatsapp-submit {
                background: linear-gradient(135deg, #25d366, #128c7e);
            }

            .whatsapp-submit:hover {
                background: linear-gradient(135deg, #128c7e, #25d366);
            }

            @media (max-width: 768px) {
                .submission-options {
                    flex-direction: column;
                    align-items: stretch;
                    gap: 0.75rem;
                }

                .contact-submit {
                    font-family: 'Orbitron', sans-serif;
                    width: 100%;
                    padding: 12px 16px;
                    font-size: 0.9rem;
                }
            }

            @media (max-width: 480px) {
                .submission-options {
                    gap: 0.5rem;
                }

                .contact-submit {
                    padding: 10px 14px;
                    font-size: 0.85rem;
                }
            }

            /* Apply Orbitron font to all form headings */
            .contact-holo h1 {
                font-family: 'Orbitron', sans-serif;
                font-weight: 700;
                font-size: 2rem;
                color: var(--glow-color-2);
                text-shadow: 0 0 8px rgba(0, 229, 255, 0.6);
            }

            .contact-holo h2 {
                font-family: 'Orbitron', sans-serif;
                font-weight: 600;
                font-size: 1.5rem;
                color: var(--glow-color-2);
                text-shadow: 0 0 6px rgba(0, 229, 255, 0.5);
            }

            .contact-holo h3 {
                font-family: 'Orbitron', sans-serif;
                font-weight: 500;
                font-size: 1.25rem;
                color: var(--glow-color-1);
                text-shadow: 0 0 4px rgba(0, 168, 255, 0.4);
            }

            .contact-holo h4 {
                font-family: 'Orbitron', sans-serif;
                font-weight: 500;
                font-size: 1.1rem;
                color: var(--text-color);
            }

            .contact-holo h5 {
                font-family: 'Orbitron', sans-serif;
                font-weight: 400;
                font-size: 1rem;
                color: var(--text-color);
            }

            .contact-holo h6 {
                font-family: 'Orbitron', sans-serif;
                font-weight: 400;
                font-size: 0.9rem;
                color: var(--text-color);
            }

            .contact-holo h7 {
                font-family: 'Orbitron', sans-serif;
                font-weight: 400;
                font-size: 0.8rem;
                color: #f39c12;
            }

            /* Responsive font sizing for form headings */
            @media (max-width: 768px) {
                .contact-holo h1 { font-size: 1.75rem; }
                .contact-holo h2 { font-size: 1.25rem; }
                .contact-holo h3 { font-size: 1.1rem; }
                .contact-holo h4 { font-size: 1rem; }
                .contact-holo h5 { font-size: 0.9rem; }
                .contact-holo h6 { font-size: 0.8rem; }
                .contact-holo h7 { font-size: 0.75rem; }
            }

            @media (max-width: 480px) {
                .contact-holo h1 { font-size: 1.5rem; }
                .contact-holo h2 { font-size: 1.1rem; }
                .contact-holo h3 { font-size: 1rem; }
                .contact-holo h4 { font-size: 0.9rem; }
                .contact-holo h5 { font-size: 0.8rem; }
                .contact-holo h6 { font-size: 0.75rem; }
                .contact-holo h7 { font-size: 0.7rem; }
            }

            .recommendations-section {
                background: rgba(142, 68, 173, 0.1);
                border: 1px solid #8e44ad;
                border-radius: 8px;
                padding: 15px;
                margin-top: 15px;
            }
            .recommendation-item {
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(142, 68, 173, 0.3);
                border-radius: 6px;
                padding: 12px;
                margin-bottom: 10px;
            }
            .rec-header {
                display: flex;
                align-items: center;
                margin-bottom: 8px;
            }
            .rec-icon {
                margin-right: 8px;
                font-size: 1.2em;
            }
            .breakdown-section {
                margin-bottom: 10px;
                padding: 8px;
                background: rgba(255, 255, 255, 0.03);
                border-radius: 4px;
                border-left: 3px solid #27ae60;
            }
            .final-total {
                background: rgba(39, 174, 96, 0.1) !important;
                border-left: 3px solid #27ae60 !important;
                font-weight: bold;
            }
            .savings {
                color: #27ae60;
                font-weight: bold;
            }

            /* Enhanced Notification and Modal System */
            .notification-system {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                background: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(5px);
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }

            .notification-system.show {
                opacity: 1;
                visibility: visible;
            }

            .notification-container {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 16px;
                padding: 0;
                max-width: 600px;
                width: 90%;
                max-height: 90vh;
                overflow-y: auto;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                transform: scale(0.7);
                transition: transform 0.3s ease;
            }

            .notification-system.show .notification-container {
                transform: scale(1);
            }

            .notification-content {
                padding: 30px;
                color: var(--text-color, #e0e0e0);
            }

            .notification-content.processing {
                text-align: center;
            }

            .notification-content.success {
                text-align: center;
            }

            .notification-content.error {
                text-align: center;
            }

            .processing-animation {
                margin-bottom: 20px;
            }

            .spinner {
                width: 60px;
                height: 60px;
                border: 4px solid rgba(255, 255, 255, 0.3);
                border-top: 4px solid #27ae60;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin: 0 auto;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            .success-icon, .error-icon {
                font-size: 4rem;
                margin-bottom: 20px;
            }

            .success-icon {
                color: #27ae60;
            }

            .error-icon {
                color: #e74c3c;
            }

            .processing-steps {
                margin-top: 20px;
            }

            .step {
                display: flex;
                align-items: center;
                justify-content: center;
                margin: 10px 0;
                padding: 10px;
                border-radius: 8px;
                background: rgba(255, 255, 255, 0.05);
            }

            .step.active {
                background: rgba(39, 174, 96, 0.2);
                border: 1px solid #27ae60;
            }

            .step i {
                margin-right: 10px;
                color: #27ae60;
            }

            .success-details, .error-details {
                margin: 20px 0;
                text-align: left;
            }

            .detail-row {
                display: flex;
                align-items: center;
                margin: 8px 0;
                padding: 8px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 6px;
            }

            .detail-row i {
                margin-right: 10px;
                color: #3498db;
                width: 20px;
            }

            .next-steps-section {
                margin: 20px 0;
                text-align: left;
            }

            .next-steps-list {
                list-style: none;
                padding: 0;
            }

            .next-steps-list li {
                margin: 10px 0;
                padding: 10px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 6px;
                border-left: 3px solid #27ae60;
            }

            .contact-reassurance {
                margin: 20px 0;
                text-align: left;
            }

            .contact-option {
                display: flex;
                align-items: center;
                margin: 8px 0;
                padding: 8px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 6px;
            }

            .contact-option i {
                margin-right: 10px;
                color: #3498db;
                width: 20px;
            }

            .guarantee-badge {
                margin-top: 20px;
                padding: 10px;
                background: rgba(39, 174, 96, 0.1);
                border: 1px solid #27ae60;
                border-radius: 8px;
                text-align: center;
                font-size: 0.9rem;
            }

            .guarantee-badge i {
                margin-right: 8px;
                color: #27ae60;
            }

            .retry-actions {
                margin: 20px 0;
            }

            .action-buttons {
                display: flex;
                gap: 10px;
                margin: 15px 0;
                flex-wrap: wrap;
                justify-content: center;
            }

            .btn-retry, .btn-alternative {
                padding: 10px 20px;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-size: 0.9rem;
                transition: all 0.3s ease;
            }

            .btn-retry {
                background: linear-gradient(135deg, #27ae60, #2ecc71);
                color: white;
            }

            .btn-alternative {
                background: linear-gradient(135deg, #3498db, #2980b9);
                color: white;
            }

            .btn-retry:hover, .btn-alternative:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            }

            .direct-contact {
                margin: 20px 0;
                padding: 15px;
                background: rgba(52, 152, 219, 0.1);
                border: 1px solid #3498db;
                border-radius: 8px;
            }

            .direct-contacts {
                display: flex;
                gap: 15px;
                margin-top: 10px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .direct-link {
                display: flex;
                align-items: center;
                padding: 8px 15px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 6px;
                text-decoration: none;
                color: var(--text-color);
                transition: all 0.3s ease;
            }

            .direct-link:hover {
                background: rgba(52, 152, 219, 0.2);
                transform: translateY(-1px);
            }

            .direct-link i {
                margin-right: 8px;
                color: #3498db;
            }

            /* Pre-submission Modal Styles */
            .pre-submission-modal {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                background: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(5px);
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }

            .pre-submission-modal.show {
                opacity: 1;
                visibility: visible;
            }

            .modal-overlay {
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
            }

            .modal-content.enhanced {
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 16px;
                max-width: 700px;
                width: 100%;
                max-height: 90vh;
                overflow-y: auto;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                transform: scale(0.7);
                transition: transform 0.3s ease;
            }

            .pre-submission-modal.show .modal-content.enhanced {
                transform: scale(1);
            }

            .modal-header {
                text-align: center;
                padding: 30px 30px 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .header-icon {
                font-size: 3rem;
                color: #3498db;
                margin-bottom: 15px;
            }

            .modal-header h2 {
                color: var(--text-color, #e0e0e0);
                margin-bottom: 10px;
                font-family: 'Orbitron', sans-serif;
            }

            .modal-header p {
                color: rgba(224, 224, 224, 0.8);
                font-size: 0.95rem;
            }

            .modal-body {
                padding: 30px;
            }

            .submission-preview {
                color: var(--text-color);
            }

            .preview-section {
                margin-bottom: 25px;
                padding: 20px;
                background: rgba(255, 255, 255, 0.05);
                border-radius: 12px;
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            .preview-section h3 {
                color: var(--glow-color-2);
                margin-bottom: 15px;
                font-family: 'Orbitron', sans-serif;
                font-size: 1.1rem;
                display: flex;
                align-items: center;
            }

            .preview-section h3 i {
                margin-right: 10px;
                color: #3498db;
            }

            .preview-item {
                margin: 8px 0;
                padding: 8px 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .preview-item:last-child {
                border-bottom: none;
            }

            .estimate-display {
                text-align: center;
            }

            .total-amount {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin: 15px 0;
                padding: 15px;
                background: rgba(39, 174, 96, 0.1);
                border: 1px solid #27ae60;
                border-radius: 8px;
            }

            .total-amount .label {
                font-weight: bold;
                color: var(--text-color);
            }

            .total-amount .amount {
                font-size: 1.3rem;
                font-weight: bold;
                color: #27ae60;
            }

            .estimate-note {
                color: rgba(224, 224, 224, 0.7);
                font-style: italic;
                margin-top: 10px;
            }

            .guarantee-list {
                list-style: none;
                padding: 0;
                margin: 0;
            }

            .guarantee-list li {
                margin: 8px 0;
                padding: 8px 0;
                display: flex;
                align-items: center;
            }

            .guarantee-list i {
                margin-right: 10px;
                color: #27ae60;
            }

            .modal-actions {
                padding: 0 30px 30px;
                display: flex;
                gap: 15px;
                justify-content: center;
            }

            .modal-actions .btn {
                padding: 12px 30px;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: bold;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .btn-secondary {
                background: rgba(127, 140, 141, 0.8);
                color: white;
            }

            .btn-primary {
                background: linear-gradient(135deg, #3498db, #2980b9);
                color: white;
            }

            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            }

            /* Mobile Responsiveness */
            @media (max-width: 768px) {
                .notification-container {
                    width: 95%;
                    margin: 10px;
                }

                .notification-content {
                    padding: 20px;
                }

                .modal-content.enhanced {
                    width: 95%;
                    margin: 10px;
                }

                .modal-header {
                    padding: 20px 20px 0;
                }

                .modal-body {
                    padding: 20px;
                }

                .modal-actions {
                    padding: 0 20px 20px;
                    flex-direction: column;
                }

                .action-buttons {
                    flex-direction: column;
                }

                .btn-retry, .btn-alternative {
                    width: 100%;
                }

                .direct-contacts {
                    flex-direction: column;
                }

                .direct-link {
                    justify-content: center;
                }
            }

            .highlight {
                color: var(--glow-color-2);
                font-weight: bold;
            }

            /* Primary Email Submit Button - Optimized */
            .primary-submit {
                background: linear-gradient(135deg, #3498db, #2980b9);
                color: white;
                font-family: 'Orbitron', sans-serif;
                font-weight: bold;
                font-size: 1.1rem;
                padding: 15px 25px;
                border: 2px solid rgba(52, 152, 219, 0.5);
                box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
                position: relative;
                overflow: hidden;
            }

            .primary-submit:before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                transition: left 0.5s;
            }

            .primary-submit:hover:before {
                left: 100%;
            }

            .primary-submit:hover {
                background: linear-gradient(135deg, #2980b9, #3498db);
                transform: translateY(-3px);
                box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
            }

            .primary-submit i {
                color: #f39c12;
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0%, 100% { transform: scale(1); }
                50% { transform: scale(1.1); }
            }

            /* Notification action buttons styling */
            .btn-primary-action, .btn-secondary-action {
                padding: 12px 24px;
                border: none;
                border-radius: 8px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: bold;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                gap: 8px;
                margin: 5px;
            }

            .btn-primary-action {
                background: linear-gradient(135deg, #27ae60, #2ecc71);
                color: white;
            }

            .btn-secondary-action {
                background: rgba(127, 140, 141, 0.8);
                color: white;
            }

            .btn-primary-action:hover, .btn-secondary-action:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            }

            /* Enhanced Button Performance Indicators */
            .button-performance {
                display: block;
                font-size: 0.75rem;
                opacity: 0.8;
                margin-top: 2px;
            }

            .contact-performance-stats {
                margin-top: 15px;
                animation: fadeInUp 0.5s ease-out;
            }

            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* Enhanced Accessibility and Performance Features */
            .contact-submit[aria-busy="true"] {
                cursor: not-allowed;
                opacity: 0.7;
            }

            .contact-submit[aria-busy="true"] .button-text {
                opacity: 0.5;
            }

            .contact-submit[aria-busy="true"] .button-performance {
                display: none;
            }

            /* Performance-based button styling */
            .contact-submit[data-conversion-rate] {
                position: relative;
                overflow: hidden;
            }

            .contact-submit[data-conversion-rate]:before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 4px;
                height: 100%;
                background: linear-gradient(to bottom, #27ae60, #2ecc71);
                opacity: 0;
                transition: opacity 0.3s ease;
            }

            .contact-submit[data-conversion-rate]:hover:before {
                opacity: 1;
            }

            /* Enhanced mobile responsiveness for performance indicators */
            @media (max-width: 768px) {
                .button-performance {
                    font-size: 0.7rem;
                }

                .contact-performance-stats {
                    font-size: 0.85rem;
                }

                .contact-performance-stats div {
                    font-size: 0.8rem;
                }
            }

            @media (max-width: 480px) {
                .button-performance {
                    display: none; /* Hide on very small screens to save space */
                }

                .contact-submit {
                    padding: 12px 16px;
                    font-size: 0.9rem;
                }
            }

            /* Loading state animations */
            @keyframes buttonPulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.7; }
            }

            .contact-submit[aria-busy="true"] {
                animation: buttonPulse 1.5s ease-in-out infinite;
            }

            /* Enhanced focus states for accessibility */
            .contact-submit:focus {
                outline: 2px solid #3498db;
                outline-offset: 2px;
                box-shadow: 0 0 8px rgba(52, 152, 219, 0.3);
            }

            /* Performance tooltip on hover */
            .contact-submit[data-method] {
                cursor: pointer;
            }

            .contact-submit[data-method]:hover .button-performance {
                opacity: 1;
                transform: translateY(-1px);
                transition: all 0.2s ease;
            }

            /* Optimized submission options */
            .submission-options {
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
                margin-top: 1rem;
            }

            /* Enhanced Mobile Responsiveness */
            @media (max-width: 768px) {
                .primary-submit {
                    font-size: 1rem;
                    padding: 12px 20px;
                }

                .submission-options {
                    gap: 0.75rem;
                    flex-direction: column;
                    align-items: stretch;
                }

                .contact-submit {
                    width: 100%;
                    padding: 12px 16px;
                    font-size: 0.9rem;
                }
            }

            @media (max-width: 480px) {
                .submission-options {
                    gap: 0.5rem;
                }

                .contact-submit {
                    padding: 10px 14px;
                    font-size: 0.85rem;
                }
            }
        `;
        document.head.appendChild(enhancedStyle);

        // Original form validation script (enhanced)
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('contact-intake');

            // EmailJS configuration for direct email sending
            const EMAILJS_CONFIG = {
                serviceId: 'service_empathicweb',
                templateId: 'template_empathicweb_contact',
                publicKey: 'B1vQ7xYz8w9AaBcD', // Replace with your actual EmailJS public key
                recipient: 'eduardgildardoperezfranco@empathicweb.online',
                fallbackRecipient: 'eduardgildardoperezfranco@empathicweb.online'
            };

            // Initialize EmailJS with error handling
            let emailjsInitialized = false;
            if (typeof emailjs !== 'undefined') {
                try {
                    emailjs.init(EMAILJS_CONFIG.publicKey);
                    emailjsInitialized = true;
                    console.log('EmailJS initialized successfully');
                } catch (error) {
                    console.warn('EmailJS initialization failed:', error);
                }
            }

            // WhatsApp configuration
            const WHATSAPP_CONFIG = {
                number: '573108005004',
                fallbackMessage: 'Hello! I would like to discuss a project with EmpathicWeb.'
            };

            // Setup enhanced budget calculator
            setupRealTimeCalculator();
            
            // Add custom validation styles
            function addValidationStyles() {
                const style = document.createElement('style');
                style.textContent = `
                    .field-error {
                        border: 2px solid #ff4757 !important;
                        background-color: rgba(255, 71, 87, 0.1) !important;
                    }
                    .error-message {
                        color: #ff4757;
                        font-size: 0.85rem;
                        margin-top: 5px;
                        display: block;
                    }
                    .validation-summary {
                        background: rgba(255, 71, 87, 0.1);
                        border: 1px solid #ff4757;
                        color: #ff4757;
                        padding: 15px;
                        border-radius: 8px;
                        margin-bottom: 20px;
                        display: none;
                    }
                    .button-validation-error {
                        color: #e74c3c;
                        font-size: 0.85rem;
                        margin-top: 10px;
                        padding: 10px;
                        background: rgba(231, 76, 60, 0.1);
                        border: 1px solid #e74c3c;
                        border-radius: 6px;
                        text-align: center;
                    }
                `;
                document.head.appendChild(style);
            }
            addValidationStyles();
            
            // Function to show error message
            function showError(field, message) {
                field.classList.add('field-error');
                let errorDiv = field.parentNode.querySelector('.error-message');
                if (!errorDiv) {
                    errorDiv = document.createElement('span');
                    errorDiv.className = 'error-message';
                    field.parentNode.appendChild(errorDiv);
                }
                errorDiv.textContent = message;
            }
            
            // Function to clear error message
            function clearError(field) {
                field.classList.remove('field-error');
                const errorDiv = field.parentNode.querySelector('.error-message');
                if (errorDiv) {
                    errorDiv.remove();
                }
            }

            // File upload preview functionality
            function setupFileUpload() {
                const fileInput = document.getElementById('brand-files');
                if (fileInput) {
                    fileInput.addEventListener('change', function(e) {
                        const files = e.target.files;
                        const uploadSection = document.querySelector('.file-upload-section');
                        
                        // Remove existing preview
                        const existingPreview = uploadSection.querySelector('.file-preview');
                        if (existingPreview) {
                            existingPreview.remove();
                        }
                        
                        if (files.length > 0) {
                            const preview = document.createElement('div');
                            preview.className = 'file-preview';
                            preview.style.cssText = 'margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; font-size: 0.9rem;';
                            
                            let previewHTML = '<strong><i class="fas fa-check-circle"></i> Uploaded files:</strong><br>';
                            for (let i = 0; i < files.length; i++) {
                                const file = files[i];
                                const fileSize = (file.size / 1024 / 1024).toFixed(2);
                                previewHTML += `<div style="margin: 5px 0;"><i class="fas fa-file"></i> ${file.name} (${fileSize} MB)</div>`;
                            }
                            
                            preview.innerHTML = previewHTML;
                            uploadSection.appendChild(preview);
                        }
                    });
                }
            }
            
            setupFileUpload();

            // Rate limiting for form submissions
            let lastSubmissionTime = 0;
            const SUBMISSION_COOLDOWN = 30000; // 30 seconds

            // Professional certificate generation system
            function generateProfessionalCertificate(data) {
                const certificateId = `EMW-CERT-${Date.now().toString(36).toUpperCase()}`;
                const currentDate = new Date();
                
                const certificate = {
                    certificateId: certificateId,
                    clientName: data.name,
                    clientEmail: data.email,
                    projectDetails: {
                        message: data.message,
                        budgetEstimate: data.budget_estimate,
                        timestamp: currentDate.toISOString(),
                        submissionMethod: 'user_choice'
                    },
                    verification: {
                        hash: generateCertificateHash(data, certificateId),
                        verified: true,
                        expires: new Date(currentDate.getTime() + (365 * 24 * 60 * 60 * 1000)).toISOString() // 1 year validity
                    },
                    professionalDetails: {
                        companyName: 'EmpathicWeb',
                        contactEmail: 'eduardgildardoperezfranco@empathicweb.online',
                        contactPhone: '+57 310 800 5004',
                        website: 'https://empathicweb.pro',
                        certificateType: 'Professional Inquiry Certificate',
                        issueDate: currentDate.toISOString()
                    }
                };

                // Store certificate in localStorage
                const existingCertificates = JSON.parse(localStorage.getItem('empathicweb_certificates') || '[]');
                existingCertificates.push(certificate);

                // Keep only last 100 certificates
                if (existingCertificates.length > 100) {
                    existingCertificates.splice(0, existingCertificates.length - 100);
                }

                localStorage.setItem('empathicweb_certificates', JSON.stringify(existingCertificates));

                return certificate;
            }

            function generateCertificateHash(data, certificateId) {
                // Simple hash generation for certificate verification
                const hashInput = `${data.name}${data.email}${certificateId}${Date.now()}`;
                let hash = 0;
                for (let i = 0; i < hashInput.length; i++) {
                    const char = hashInput.charCodeAt(i);
                    hash = ((hash << 5) - hash) + char;
                    hash = hash & hash; // Convert to 32-bit integer
                }
                return Math.abs(hash).toString(36).toUpperCase();
            }

            // Function to validate Contact Information section
            function validateContactInformation() {
                const errors = [];
                let isValid = true;

                // Required fields for Contact Information
                const contactFields = {
                    email: document.getElementById('email'),
                    name: document.getElementById('name')
                };

                // Check required contact fields
                Object.keys(contactFields).forEach(fieldName => {
                    const field = contactFields[fieldName];
                    clearError(field);

                    if (!field || !field.value.trim()) {
                        showError(field, `${fieldName.charAt(0).toUpperCase() + fieldName.slice(1)} is required for Contact Information`);
                        errors.push(`Contact Information: ${fieldName.charAt(0).toUpperCase() + fieldName.slice(1)} is missing`);
                        isValid = false;
                    }
                });

                // Validate email format
                const emailField = contactFields.email;
                const emailValue = emailField.value.trim();
                if (emailValue) {
                    const emailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;
                    if (!emailRegex.test(emailValue)) {
                        showError(emailField, 'Please enter a valid email address');
                        errors.push('Contact Information: Invalid email format');
                        isValid = false;
                    }
                    if (emailValue.length > 254 || emailValue.includes('..') || emailValue.startsWith('.') || emailValue.endsWith('.')) {
                        showError(emailField, 'Please enter a valid email address');
                        errors.push('Contact Information: Invalid email format');
                        isValid = false;
                    }
                }

                return { isValid, errors };
            }

            // Function to validate Service Selection & Budget Estimation section (now optional)
            function validateServiceSelection() {
                const errors = [];
                let isValid = true; // Always allow - services are now optional

                // Check if any service is selected (optional)
                const serviceCheckboxes = document.querySelectorAll('input[name="calc-services"]:checked');
                if (serviceCheckboxes.length === 0) {
                    // No error - services are optional
                    console.log('No services selected - will proceed with general inquiry');
                }

                return { isValid, errors };
            }

            // Initialize hate speech detector
            const hateSpeechDetector = new HateSpeechDetector();

            // Hate speech detection system
            function detectHateSpeech(text) {
                if (!text || text.trim().length === 0) {
                    return { isHateSpeech: false, reason: '' };
                }

                const hateSpeechPatterns = [
                    // Racial slurs and epithets
                    /\b(nigger|nigga|chink|gook|spic|wetback|kike|coon|sambo)\b/gi,
                    /\b(nazis|hitler|heil hitler)\b/gi,
                    /\b(white power|white supremacy|kkk|klan)\b/gi,
                    
                    // Religious hate speech
                    /\b(terrorist|islamophob|jew hater|christ hater)\b/gi,
                    /\b(muslim hater|church bomber|synagogue bomber)\b/gi,
                    
                    // Gender and sexual orientation hate
                    /\b(faggot|dyke|tranny|shemale|gender bender)\b/gi,
                    /\b(woman hater|man hater|transphob)\b/gi,
                    
                    // Disability hate speech
                    /\b(retard|spastic|cripple|invalid)\b/gi,
                    
                    // Violent threats and incitement
                    /\b(kill|murder|assassinate|bomb|shoot|attack)\s+(me|you|them|us)\b/gi,
                    /\b(terrorist|extremist|radical)\b/gi,
                    
                    // General hate and discrimination
                    /\b(hate|disgust|loath|despise)\s+(race|religion|gender|orientation)\b/gi,
                    /\b(supremacist|racist|bigot|prejudice)\b/gi
                ];

                const hateWords = [
                    'nigger', 'nigga', 'chink', 'gook', 'spic', 'wetback', 'kike', 'coon', 'sambo',
                    'faggot', 'dyke', 'tranny', 'shemale', 'retard', 'spastic', 'cripple', 'invalid',
                    'terrorist', 'islamophob', 'jew hater', 'christ hater', 'muslim hater',
                    'white power', 'white supremacy', 'kkk', 'klan', 'nazis', 'hitler'
                ];

                let detectedWords = [];
                let detectedPatterns = [];

                // Check for hate speech patterns
                hateSpeechPatterns.forEach((pattern, index) => {
                    const matches = text.match(pattern);
                    if (matches) {
                        detectedPatterns.push(`Pattern ${index + 1}: ${matches.join(', ')}`);
                    }
                });

                // Check for specific hate words
                hateWords.forEach(word => {
                    if (text.toLowerCase().includes(word)) {
                        detectedWords.push(word);
                    }
                });

                // Calculate severity score
                const severityScore = detectedWords.length + detectedPatterns.length;

                // Determine if it's hate speech based on severity
                const isHateSpeech = severityScore > 0;
                let reason = '';

                if (isHateSpeech) {
                    if (detectedWords.length > 0) {
                        reason += `Hate words detected: ${detectedWords.join(', ')}. `;
                    }
                    if (detectedPatterns.length > 0) {
                        reason += `Hate patterns detected: ${detectedPatterns.join(', ')}. `;
                    }
                    reason += `Severity score: ${severityScore}/10. This content violates our community guidelines.`;
                }

                // Log hate speech detection for analytics
                if (isHateSpeech) {
                    logHateSpeechDetection({
                        text: text.substring(0, 200), // Log first 200 chars for privacy
                        detectedWords: detectedWords,
                        detectedPatterns: detectedPatterns,
                        severityScore: severityScore,
                        timestamp: new Date().toISOString(),
                        userAgent: navigator.userAgent,
                        url: window.location.href
                    });
                }

                return {
                    isHateSpeech: isHateSpeech,
                    reason: reason,
                    severityScore: severityScore,
                    detectedWords: detectedWords,
                    detectedPatterns: detectedPatterns
                };
            }

            // Log hate speech detection for analytics and monitoring
            function logHateSpeechDetection(data) {
                const existingLogs = JSON.parse(localStorage.getItem('empathicweb_hate_speech_logs') || '[]');
                existingLogs.push(data);

                // Keep only last 50 entries to avoid storage bloat
                if (existingLogs.length > 50) {
                    existingLogs.splice(0, existingLogs.length - 50);
                }

                localStorage.setItem('empathicweb_hate_speech_logs', JSON.stringify(existingLogs));

                // Send alert to admin (in a real system, this would be sent to a server)
                console.warn('üö® HATE SPEECH DETECTED:', data);
                
                // In a production system, you would send this to your server for monitoring
                // sendToServer('/api/hate-speech-alert', data);
            }

            // Enhanced hate speech alert system
            function showHateSpeechAlert(hateSpeechResult) {
                const alertMessage = document.createElement('div');
                alertMessage.className = 'hate-speech-alert';
                alertMessage.innerHTML = `
                    <div class="alert-content">
                        <div class="alert-header">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>Hate Speech Detected</h3>
                        </div>
                        <div class="alert-body">
                            <p><strong>Content Analysis:</strong></p>
                            <div class="analysis-details">
                                <div class="severity-indicator">
                                    <span class="severity-score">Severity: ${hateSpeechResult.severityScore}/10</span>
                                    <div class="severity-bar">
                                        <div class="severity-fill" style="width: ${hateSpeechResult.severityScore * 10}%"></div>
                                    </div>
                                </div>
                                ${hateSpeechResult.detectedWords.length > 0 ? `
                                    <div class="detected-words">
                                        <strong>Detected Hate Words:</strong>
                                        <span class="word-list">${hateSpeechResult.detectedWords.join(', ')}</span>
                                    </div>
                                ` : ''}
                                ${hateSpeechResult.detectedPatterns.length > 0 ? `
                                    <div class="detected-patterns">
                                        <strong>Detected Patterns:</strong>
                                        <span class="pattern-list">${hateSpeechResult.detectedPatterns.join(', ')}</span>
                                    </div>
                                ` : ''}
                            </div>
                            <div class="community-guidelines">
                                <h4>Our Community Guidelines:</h4>
                                <ul>
                                    <li>Respect all individuals regardless of race, religion, gender, or orientation</li>
                                    <li>Use constructive and professional language</li>
                                    <li>Avoid hate speech, threats, or discriminatory content</li>
                                    <li>Maintain a positive and inclusive environment</li>
                                </ul>
                            </div>
                            <div class="action-required">
                                <p><strong>Action Required:</strong> Please revise your message to comply with our community guidelines.</p>
                                <button onclick="clearHateSpeechAlert()" class="btn-clear-alert">
                                    <i class="fas fa-times"></i> Clear Alert and Continue
                                </button>
                            </div>
                        </div>
                    </div>
                `;

                // Add styles for the alert
                alertMessage.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    width: 400px;
                    max-width: 90vw;
                    background: #fff;
                    border: 2px solid #e74c3c;
                    border-radius: 8px;
                    box-shadow: 0 4px 20px rgba(231, 76, 60, 0.3);
                    z-index: 10000;
                    display: none;
                    animation: slideInRight 0.3s ease;
                `;

                // Add CSS animation
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes slideInRight {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    .hate-speech-alert .alert-content {
                        padding: 20px;
                    }
                    .hate-speech-alert .alert-header {
                        display: flex;
                        align-items: center;
                        gap: 15px;
                        margin-bottom: 15px;
                        border-bottom: 1px solid #eee;
                        padding-bottom: 10px;
                    }
                    .hate-speech-alert .alert-header i {
                        font-size: 1.5em;
                        color: #e74c3c;
                    }
                    .hate-speech-alert .alert-header h3 {
                        margin: 0;
                        color: #e74c3c;
                    }
                    .hate-speech-alert .analysis-details {
                        margin: 15px 0;
                    }
                    .hate-speech-alert .severity-indicator {
                        margin-bottom: 10px;
                    }
                    .hate-speech-alert .severity-score {
                        display: inline-block;
                        background: #e74c3c;
                        color: white;
                        padding: 4px 8px;
                        border-radius: 4px;
                        font-weight: bold;
                        margin-right: 10px;
                    }
                    .hate-speech-alert .severity-bar {
                        width: 100%;
                        height: 8px;
                        background: #ecf0f1;
                        border-radius: 4px;
                        margin-top: 5px;
                    }
                    .hate-speech-alert .severity-fill {
                        height: 100%;
                        background: #e74c3c;
                        border-radius: 4px;
                        transition: width 0.3s ease;
                    }
                    .hate-speech-alert .detected-words, .hate-speech-alert .detected-patterns {
                        margin: 8px 0;
                        padding: 8px;
                        background: #fff5f5;
                        border-left: 3px solid #e74c3c;
                        border-radius: 4px;
                    }
                    .hate-speech-alert .word-list, .hate-speech-alert .pattern-list {
                        font-family: monospace;
                        background: #ffebee;
                        padding: 2px 6px;
                        border-radius: 3px;
                        color: #c62828;
                    }
                    .hate-speech-alert .community-guidelines {
                        margin: 15px 0;
                        padding: 10px;
                        background: #f8f9fa;
                        border-radius: 6px;
                    }
                    .hate-speech-alert .community-guidelines h4 {
                        margin: 0 0 10px 0;
                        color: #2c3e50;
                    }
                    .hate-speech-alert .community-guidelines ul {
                        margin: 0;
                        padding-left: 20px;
                    }
                    .hate-speech-alert .community-guidelines li {
                        margin-bottom: 5px;
                        color: #555;
                    }
                    .hate-speech-alert .action-required {
                        margin-top: 15px;
                        padding-top: 15px;
                        border-top: 1px solid #eee;
                    }
                    .hate-speech-alert .action-required p {
                        margin: 0 0 10px 0;
                        color: #e74c3c;
                        font-weight: bold;
                    }
                    .btn-clear-alert {
                        background: #e74c3c;
                        color: white;
                        border: none;
                        padding: 8px 16px;
                        border-radius: 4px;
                        cursor: pointer;
                        font-size: 14px;
                        transition: background 0.2s;
                    }
                    .btn-clear-alert:hover {
                        background: #c0392b;
                    }
                `;
                document.head.appendChild(style);

                document.body.appendChild(alertMessage);

                // Show the alert
                setTimeout(() => {
                    alertMessage.style.display = 'block';
                }, 100);

                // Store reference for clearing
                window.currentHateSpeechAlert = alertMessage;
            }

            function clearHateSpeechAlert() {
                const alert = window.currentHateSpeechAlert;
                if (alert) {
                    alert.style.animation = 'slideOutRight 0.3s ease';
                    setTimeout(() => {
                        if (alert.parentNode) {
                            alert.parentNode.removeChild(alert);
                        }
                        window.currentHateSpeechAlert = null;
                    }, 300);
                }
            }

            // Add CSS animation for slide out
            const slideOutStyle = document.createElement('style');
            slideOutStyle.textContent = `
                @keyframes slideOutRight {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(slideOutStyle);

            // Real-time hate speech detection as user types
            const messageField = document.getElementById('message');
            if (messageField) {
                messageField.addEventListener('input', function() {
                    const text = this.value.trim();
                    if (text.length > 10) { // Only check if message has some content
                        const hateSpeechResult = detectHateSpeech(text);
                        if (hateSpeechResult.isHateSpeech) {
                            showHateSpeechAlert(hateSpeechResult);
                        } else {
                            // Clear alert if no longer hate speech
                            if (window.currentHateSpeechAlert) {
                                clearHateSpeechAlert();
                            }
                        }
                    }
                });
            }

            // Function to validate all form fields with section-based logic
            function validateForm() {
                let isValid = true;
                const allErrors = [];

                // Rate limiting check
                const now = Date.now();
                if (now - lastSubmissionTime < SUBMISSION_COOLDOWN) {
                    allErrors.push('Please wait 30 seconds before submitting again');
                    isValid = false;
                    return { isValid, errors: allErrors };
                }

                // Validate Contact Information section (MANDATORY)
                const contactValidation = validateContactInformation();
                if (!contactValidation.isValid) {
                    allErrors.push(...contactValidation.errors);
                    isValid = false;
                }

                // Validate Service Selection section (OPTIONAL)
                const serviceValidation = validateServiceSelection();
                // Services are now optional - no validation errors added

                // If both mandatory sections are valid, validate additional required fields
                if (isValid) {
                    // Additional required fields
                    const additionalFields = {
                        goal: document.getElementById('goal'),
                        'contact-method': document.getElementById('contact-method'),
                        message: document.getElementById('message')
                    };

                    // Check additional required fields
                    Object.keys(additionalFields).forEach(fieldName => {
                        const field = additionalFields[fieldName];
                        clearError(field);

                        if (!field.value.trim()) {
                            showError(field, `${fieldName.charAt(0).toUpperCase() + fieldName.slice(1)} is required`);
                            allErrors.push(`${fieldName.charAt(0).toUpperCase() + fieldName.slice(1)} is missing`);
                            isValid = false;
                        }
                    });

                    // Validate phone format if provided
                    const phoneField = document.getElementById('phone');
                    const phoneValue = phoneField.value.trim();
                    if (phoneValue) {
                        const cleanPhone = phoneValue.replace(/[\s\-\(\)\.]/g, '');
                        if (!/^[\+]?[1-9][\d]{6,15}$/.test(cleanPhone)) {
                            showError(phoneField, 'Please enter a valid phone number (7-16 digits)');
                            allErrors.push('Invalid phone number format');
                            isValid = false;
                        }
                    }

                    // Validate message length and content
                    const messageField = additionalFields.message;
                    const messageValue = messageField.value.trim();
                    if (messageValue && messageValue.length < 10) {
                        showError(messageField, 'Please provide more details (at least 10 characters)');
                        allErrors.push('Message too short');
                        isValid = false;
                    }
                    if (messageValue && messageValue.length > 5000) {
                        showError(messageField, 'Message too long (maximum 5000 characters)');
                        allErrors.push('Message too long');
                        isValid = false;
                    }
                    
                    // Enhanced content validation with hate speech detection
                    if (messageValue && messageValue.length >= 10) {
                        const hateSpeechResult = hateSpeechDetector.analyzeText(messageValue);
                        
                        if (hateSpeechResult.hasHateSpeech) {
                            // Show hate speech alert
                            const alertData = hateSpeechDetector.generateAlert(hateSpeechResult);
                            hateSpeechDetector.showHateSpeechAlert(alertData);
                            
                            // Block submission for critical violations
                            if (hateSpeechResult.severity === 'CRITICAL') {
                                allErrors.push('Submission blocked due to hate speech detection');
                                isValid = false;
                                return { isValid, errors: allErrors, hateSpeechDetected: true };
                            } else {
                                // Allow submission but show warning for lower severity
                                allErrors.push('Content warning: Potential inappropriate language detected');
                                // Don't block submission for medium/low severity
                            }
                        }
                    }
                }

                // Check for honeypot field (spam protection)
                const botField = document.querySelector('input[name="bot-field"]');
                if (botField && botField.value.trim()) {
                    allErrors.push('Form submission blocked - suspicious activity detected');
                    isValid = false;
                }

                return { isValid, errors: allErrors };
            }
            
            // Helper functions for smart validation
            function checkContactInfoFilled() {
                const email = document.getElementById('email').value.trim();
                const name = document.getElementById('name').value.trim();
                return email !== '' && name !== '';
            }

            function checkServiceSelectionMade() {
                // Check if any service checkboxes are selected
                const serviceCheckboxes = document.querySelectorAll('input[name="calc-services"]:checked');
                if (serviceCheckboxes.length > 0) return true;

                // Check if any feature checkboxes are selected
                const featureCheckboxes = document.querySelectorAll('input[name="calc-features"]:checked');
                if (featureCheckboxes.length > 0) return true;

                // Check if timeline is selected (not default empty value)
                const timeline = document.getElementById('calc-timeline').value;
                if (timeline && timeline !== '') return true;

                // Check if urgency is selected (not default empty value)
                const urgency = document.getElementById('calc-urgency').value;
                if (urgency && urgency !== '') return true;

                // Check if complexity is selected (not default empty value)
                const complexity = document.getElementById('calc-complexity').value;
                if (complexity && complexity !== '') return true;

                // Check if scale is selected (not default empty value)
                const scale = document.getElementById('calc-scale').value;
                if (scale && scale !== '') return true;

                return false;
            }

            function redirectToContactInfo(submissionMethod) {
                // Highlight the contact information section
                const contactSection = document.querySelector('.form-section');
                contactSection.style.borderColor = '#e74c3c';
                contactSection.style.boxShadow = '0 0 10px rgba(231, 76, 60, 0.3)';
                contactSection.style.background = 'rgba(231, 76, 60, 0.05)';

                // Scroll to contact information section
                contactSection.scrollIntoView({ behavior: 'smooth', block: 'center' });

                // Show specific message about completing contact info
                const buttonValidationMessage = document.getElementById('button-validation-message');
                const methodName = submissionMethod === 'email' ? 'email' : 'WhatsApp';

                buttonValidationMessage.innerHTML = `
                    <i class="fas fa-arrow-up"></i>
                    <strong>Almost there! Complete your contact information to send via ${methodName}.</strong><br>
                    <small>You've selected services and shown interest in our offerings. Please fill in your email and name above to proceed with your inquiry.</small>
                `;
                buttonValidationMessage.style.display = 'block';

                // Remove highlighting after 5 seconds
                setTimeout(() => {
                    contactSection.style.borderColor = '';
                    contactSection.style.boxShadow = '';
                    contactSection.style.background = '';
                }, 5000);

                // Focus on email field
                setTimeout(() => {
                    document.getElementById('email').focus();
                }, 1000);
            }

            // Clear errors on input
            const formFields = form.querySelectorAll('input, select, textarea');
            formFields.forEach(field => {
                field.addEventListener('input', function() {
                    clearError(this);
                });

                field.addEventListener('change', function() {
                    clearError(this);
                });
            });
            

            // Enhanced notification system functions
        function showEnhancedNotification(title, content) {
            const notification = document.createElement('div');
            notification.className = 'notification-system';
            notification.innerHTML = `
                <div class="notification-container">
                    ${content}
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Show notification with animation
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            // Store reference for closing
            window.currentNotification = notification;
        }
        
        function closeNotification() {
            const notification = window.currentNotification;
            if (notification) {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                    window.currentNotification = null;
                }, 300);
            }
        }
        
        function addModalStyles() {
            // Modal styles are already included in the enhancedStyle
        }


                // Function to generate form data as attachment content
                function generateFormAttachment() {
                    const formData = new FormData(form);
                    const attachmentContent = [
                        'EMPATHICWEB PROJECT INQUIRY FORM DATA',
                        '='.repeat(50),
                        '',
                        'CONTACT INFORMATION:',
                        '- Name: ' + (document.getElementById('name').value || 'Not provided'),
                        '- Email: ' + (document.getElementById('email').value || 'Not provided'),
                        '- Phone/WhatsApp: ' + (document.getElementById('phone').value || 'Not provided'),
                        '- Country: ' + (document.getElementById('country').value || 'Not provided'),
                        '- Company: ' + (document.getElementById('company').value || 'Not provided'),
                        '',
                        'PROJECT DETAILS:',
                        '- Goal: ' + (document.getElementById('goal').value || 'Not specified'),
                        '- Preferred Contact Method: ' + (document.getElementById('contact-method').value || 'Not specified'),
                        '',
                        'SELECTED SERVICES:'
                    ];

                    // Selected Services (Optional)
                    const selectedServices = document.querySelectorAll('input[name="calc-services"]:checked');
                    if (selectedServices.length > 0) {
                        selectedServices.forEach(service => {
                            const serviceLabel = document.querySelector(`label[for="${service.id}"]`);
                            if (serviceLabel) {
                                attachmentContent.push('- ' + serviceLabel.textContent.trim().split(' - ')[0]);
                            }
                        });
                    } else {
                        attachmentContent.push('- No specific services selected (general inquiry)');
                        attachmentContent.push('- Will discuss project needs in consultation');
                    }

                    // Budget Information
                    const calculator = budgetCalculator;
                    const calculation = calculator.calculate();
                    attachmentContent.push(
                        '',
                        'BUDGET ESTIMATION:',
                        '- Estimated Total: ' + (calculation.total || 0).toLocaleString() + ' COP',
                        '- Breakdown:',
                        calculator.generateBreakdownHTML().replace(/<[^>]*>/g, ''),
                        '',
                        'PROJECT REQUIREMENTS:',
                        document.getElementById('message').value,
                        '',
                        'TECHNICAL DETAILS:',
                        '- Timeline: ' + (document.getElementById('calc-timeline').value || 'Not specified'),
                        '- Urgency: ' + (document.getElementById('calc-urgency').value || 'Not specified'),
                        '- Complexity: ' + (document.getElementById('calc-complexity').value || 'Not specified'),
                        '- Scale: ' + (document.getElementById('calc-scale').value || 'Not specified'),
                        '',
                        'SUBMISSION INFORMATION:',
                        '- Submission Date: ' + new Date().toLocaleString(),
                        '- Form Completion Rate: ' + calculateFormCompletionRate().overall + '%',
                        '- User Agent: ' + navigator.userAgent,
                        '',
                        '='.repeat(50),
                        'This form data was generated by EmpathicWeb Contact System',
                        'For questions, contact: eduardgildardoperezfranco@empathicweb.online'
                    );

                    return attachmentContent.join('\n');
                }

                // Smart Email Client Detection and Routing System
                class SmartEmailClientDetector {
                    constructor() {
                        this.deviceInfo = this.detectDevice();
                        this.emailClients = this.detectEmailClients();
                        this.preferredClient = this.determinePreferredClient();
                    }

                    // Comprehensive device detection
                    detectDevice() {
                        const userAgent = navigator.userAgent;
                        const platform = navigator.platform;
                        const maxTouchPoints = navigator.maxTouchPoints || 0;
                        const screen = window.screen;
                        
                        // OS Detection
                        let os = 'Unknown';
                        let osVersion = '';
                        
                        if (/Windows/i.test(userAgent)) {
                            os = 'Windows';
                            const match = userAgent.match(/Windows NT (\d+\.\d+)/);
                            osVersion = match ? match[1] : 'Unknown';
                        } else if (/Mac OS/i.test(userAgent)) {
                            os = 'macOS';
                            const match = userAgent.match(/Mac OS X (\d+[._]\d+[._]\d+)/);
                            osVersion = match ? match[1].replace(/_/g, '.') : 'Unknown';
                        } else if (/Linux/i.test(userAgent)) {
                            os = 'Linux';
                        } else if (/Android/i.test(userAgent)) {
                            os = 'Android';
                            const match = userAgent.match(/Android (\d+\.\d+)/);
                            osVersion = match ? match[1] : 'Unknown';
                        } else if (/iPhone|iPad|iPod/i.test(userAgent)) {
                            os = 'iOS';
                            const match = userAgent.match(/OS (\d+_\d+)/);
                            osVersion = match ? match[1].replace(/_/g, '.') : 'Unknown';
                        }

                        // Browser Detection
                        let browser = 'Unknown';
                        let browserVersion = '';
                        
                        if (/Chrome/i.test(userAgent) && !/Edg/i.test(userAgent)) {
                            browser = 'Chrome';
                            const match = userAgent.match(/Chrome\/(\d+)/);
                            browserVersion = match ? match[1] : 'Unknown';
                        } else if (/Firefox/i.test(userAgent)) {
                            browser = 'Firefox';
                            const match = userAgent.match(/Firefox\/(\d+)/);
                            browserVersion = match ? match[1] : 'Unknown';
                        } else if (/Safari/i.test(userAgent) && !/Chrome/i.test(userAgent)) {
                            browser = 'Safari';
                            const match = userAgent.match(/Version\/(\d+)/);
                            browserVersion = match ? match[1] : 'Unknown';
                        } else if (/Edge/i.test(userAgent)) {
                            browser = 'Edge';
                            const match = userAgent.match(/Edg\/(\d+)/);
                            browserVersion = match ? match[1] : 'Unknown';
                        } else if (/Opera/i.test(userAgent)) {
                            browser = 'Opera';
                            const match = userAgent.match(/OPR\/(\d+)/);
                            browserVersion = match ? match[1] : 'Unknown';
                        }

                        // Device Type Detection
                        let deviceType = 'desktop';
                        let isMobile = false;
                        let isTablet = false;
                        
                        if (maxTouchPoints > 0 || /Mobile/i.test(userAgent)) {
                            isMobile = true;
                            deviceType = 'mobile';
                        } else if (/iPad/i.test(userAgent) || (screen && screen.width >= 768 && screen.width <= 1024)) {
                            isTablet = true;
                            deviceType = 'tablet';
                        }

                        return {
                            os: os,
                            osVersion: osVersion,
                            browser: browser,
                            browserVersion: browserVersion,
                            deviceType: deviceType,
                            isMobile: isMobile,
                            isTablet: isTablet,
                            platform: platform,
                            userAgent: userAgent,
                            screen: {
                                width: screen ? screen.width : 0,
                                height: screen ? screen.height : 0,
                                orientation: screen ? (screen.width > screen.height ? 'landscape' : 'portrait') : 'unknown'
                            }
                        };
                    }

                    // Email client detection
                    detectEmailClients() {
                        const clients = [];
                        const device = this.deviceInfo;

                        // Desktop Email Clients
                        if (device.deviceType === 'desktop') {
                            // Outlook Detection
                            if (device.os === 'Windows') {
                                clients.push({
                                    name: 'Outlook',
                                    protocol: 'mailto',
                                    priority: 10,
                                    icon: 'fab fa-microsoft',
                                    detection: 'Windows OS + Outlook registry check',
                                    urlPattern: 'mailto:',
                                    setup: 'Pre-installed on Windows'
                                });
                            }

                            // Apple Mail Detection
                            if (device.os === 'macOS') {
                                clients.push({
                                    name: 'Apple Mail',
                                    protocol: 'mailto',
                                    priority: 9,
                                    icon: 'fab fa-apple',
                                    detection: 'macOS default',
                                    urlPattern: 'mailto:',
                                    setup: 'Pre-installed on macOS'
                                });
                            }

                            // Thunderbird Detection
                            clients.push({
                                name: 'Thunderbird',
                                protocol: 'mailto',
                                priority: 7,
                                icon: 'fas fa-envelope',
                                detection: 'Cross-platform',
                                urlPattern: 'mailto:',
                                setup: 'Download from mozilla.org'
                            });

                            // Gmail Web Detection
                            if (device.browser === 'Chrome' || device.browser === 'Firefox' || device.browser === 'Edge') {
                                clients.push({
                                    name: 'Gmail (Web)',
                                    protocol: 'web',
                                    priority: 8,
                                    icon: 'fab fa-google',
                                    detection: 'Browser-based',
                                    urlPattern: 'https://mail.google.com/mail/?view=cm&fs=1&to=',
                                    setup: 'Requires Gmail account'
                                });
                            }
                        }

                        // Mobile Email Clients
                        if (device.deviceType === 'mobile' || device.deviceType === 'tablet') {
                            // iOS Mail
                            if (device.os === 'iOS') {
                                clients.push({
                                    name: 'Mail (iOS)',
                                    protocol: 'mailto',
                                    priority: 10,
                                    icon: 'fab fa-apple',
                                    detection: 'iOS default',
                                    urlPattern: 'mailto:',
                                    setup: 'Pre-installed on iOS'
                                });
                            }

                            // Android Gmail
                            if (device.os === 'Android') {
                                clients.push({
                                    name: 'Gmail (Android)',
                                    protocol: 'mailto',
                                    priority: 9,
                                    icon: 'fab fa-google',
                                    detection: 'Android default',
                                    urlPattern: 'mailto:',
                                    setup: 'Pre-installed on Android'
                                });
                            }

                            // Outlook Mobile
                            clients.push({
                                name: 'Outlook (Mobile)',
                                protocol: 'mailto',
                                priority: 8,
                                icon: 'fab fa-microsoft',
                                detection: 'Mobile app',
                                urlPattern: 'mailto:',
                                setup: 'Download from app store'
                            });

                            // Yahoo Mail Mobile
                            clients.push({
                                    name: 'Yahoo Mail (Mobile)',
                                    protocol: 'mailto',
                                    priority: 6,
                                    icon: 'fab fa-yahoo',
                                    detection: 'Mobile app',
                                    urlPattern: 'mailto:',
                                    setup: 'Download from app store'
                                });
                        }

                        // Web-based clients (all devices)
                        clients.push(
                            {
                                name: 'Gmail (Web)',
                                protocol: 'web',
                                priority: 7,
                                icon: 'fab fa-google',
                                detection: 'Browser-based',
                                urlPattern: 'https://mail.google.com/mail/?view=cm&fs=1&to=',
                                setup: 'Requires Gmail account'
                            },
                            {
                                name: 'Outlook.com (Web)',
                                protocol: 'web',
                                priority: 6,
                                icon: 'fab fa-microsoft',
                                detection: 'Browser-based',
                                urlPattern: 'https://outlook.live.com/owa/?path=/mail/action/compose&to=',
                                setup: 'Requires Microsoft account'
                            },
                            {
                                name: 'Yahoo Mail (Web)',
                                protocol: 'web',
                                priority: 5,
                                icon: 'fab fa-yahoo',
                                detection: 'Browser-based',
                                urlPattern: 'https://compose.mail.yahoo.com/?to=',
                                setup: 'Requires Yahoo account'
                            }
                        );

                        return clients.sort((a, b) => b.priority - a.priority);
                    }

                    // Determine the best email client for this device
                    determinePreferredClient() {
                        const clients = this.emailClients;
                        const device = this.deviceInfo;

                        // Check for installed desktop clients first
                        if (device.deviceType === 'desktop') {
                            // Windows + Outlook
                            if (device.os === 'Windows') {
                                const outlook = clients.find(c => c.name === 'Outlook');
                                if (outlook) return outlook;
                            }

                            // macOS + Apple Mail
                            if (device.os === 'macOS') {
                                const appleMail = clients.find(c => c.name === 'Apple Mail');
                                if (appleMail) return appleMail;
                            }

                            // Check for Thunderbird
                            const thunderbird = clients.find(c => c.name === 'Thunderbird');
                            if (thunderbird) return thunderbird;
                        }

                        // Mobile clients
                        if (device.deviceType === 'mobile' || device.deviceType === 'tablet') {
                            // iOS Mail
                            if (device.os === 'iOS') {
                                const iosMail = clients.find(c => c.name === 'Mail (iOS)');
                                if (iosMail) return iosMail;
                            }

                            // Android Gmail
                            if (device.os === 'Android') {
                                const androidGmail = clients.find(c => c.name === 'Gmail (Android)');
                                if (androidGmail) return androidGmail;
                            }
                        }

                        // Fallback to web-based Gmail
                        const gmailWeb = clients.find(c => c.name === 'Gmail (Web)');
                        if (gmailWeb) return gmailWeb;

                        // Ultimate fallback
                        return clients[0] || { name: 'Default Mail', protocol: 'mailto', priority: 1 };
                    }

                    // Generate email URL for the preferred client
                    generateEmailUrl(subject, body, recipients = {}) {
                        const client = this.preferredClient;
                        const device = this.deviceInfo;

                        // URL encoding
                        const encodedSubject = encodeURIComponent(subject);
                        const encodedBody = encodeURIComponent(body);
                        const encodedTo = encodeURIComponent(recipients.to || '');
                        const encodedCc = encodeURIComponent(recipients.cc || '');
                        const encodedBcc = encodeURIComponent(recipients.bcc || '');

                        let url = '';

                        switch (client.protocol) {
                            case 'mailto':
                                url = `mailto:${encodedTo}`;
                                if (encodedCc) url += `?cc=${encodedCc}`;
                                else url += `?subject=${encodedSubject}`;
                                if (encodedSubject && !url.includes('subject=')) url += `&subject=${encodedSubject}`;
                                if (encodedBody && !url.includes('body=')) url += `&body=${encodedBody}`;
                                if (encodedBcc && !url.includes('bcc=')) url += `&bcc=${encodedBcc}`;
                                break;

                            case 'web':
                                if (client.name.includes('Gmail')) {
                                    url = `${client.urlPattern}${encodedTo}&su=${encodedSubject}&body=${encodedBody}`;
                                    if (encodedCc) url += `&cc=${encodedCc}`;
                                } else if (client.name.includes('Outlook')) {
                                    url = `${client.urlPattern}${encodedTo}&subject=${encodedSubject}&body=${encodedBody}`;
                                } else if (client.name.includes('Yahoo')) {
                                    url = `${client.urlPattern}${encodedTo}&subject=${encodedSubject}&body=${encodedBody}`;
                                }
                                break;

                            default:
                                url = `mailto:${encodedTo}?subject=${encodedSubject}&body=${encodedBody}`;
                        }

                        return url;
                    }

                    // Test if email client is available
                    async testEmailClient() {
                        const client = this.preferredClient;
                        const testUrl = this.generateEmailUrl('Test', 'Test message', { to: 'test@example.com' });

                        try {
                            if (client.protocol === 'mailto') {
                                // Test mailto protocol
                                const result = await this.testMailtoProtocol(testUrl);
                                return { available: result, client: client };
                            } else {
                                // Web clients are always available
                                return { available: true, client: client };
                            }
                        } catch (error) {
                            console.warn('Email client test failed:', error);
                            return { available: false, client: client, error: error.message };
                        }
                    }

                    // Test mailto protocol
                    async testMailtoProtocol(url) {
                        return new Promise((resolve) => {
                            const startTime = Date.now();
                            
                            // Create invisible iframe to test
                            const iframe = document.createElement('iframe');
                            iframe.style.display = 'none';
                            iframe.src = url;
                            
                            document.body.appendChild(iframe);

                            const timeout = setTimeout(() => {
                                document.body.removeChild(iframe);
                                resolve(false);
                            }, 2000); // 2 second timeout

                            iframe.onload = () => {
                                clearTimeout(timeout);
                                document.body.removeChild(iframe);
                                resolve(true);
                            };

                            iframe.onerror = () => {
                                clearTimeout(timeout);
                                document.body.removeChild(iframe);
                                resolve(false);
                            };
                        });
                    }

                    // Get client information for display
                    getClientInfo() {
                        const client = this.preferredClient;
                        const device = this.deviceInfo;

                        return {
                            client: client,
                            device: device,
                            recommendation: this.generateRecommendation(),
                            alternatives: this.getAlternativeClients()
                        };
                    }

                    // Generate user-friendly recommendation
                    generateRecommendation() {
                        const client = this.preferredClient;
                        const device = this.deviceInfo;

                        if (device.deviceType === 'desktop') {
                            if (client.name.includes('Outlook')) {
                                return {
                                    title: 'Microsoft Outlook Detected',
                                    message: 'Your Windows system has Outlook configured as the default email client.',
                                    action: 'Open Outlook with your message'
                                };
                            } else if (client.name.includes('Apple Mail')) {
                                return {
                                    title: 'Apple Mail Detected',
                                    message: 'Your macOS system has Apple Mail configured as the default email client.',
                                    action: 'Open Apple Mail with your message'
                                };
                            }
                        } else if (device.deviceType === 'mobile') {
                            if (client.name.includes('Gmail')) {
                                return {
                                    title: 'Gmail App Detected',
                                    message: 'Your Android device has Gmail configured as the default email client.',
                                    action: 'Open Gmail with your message'
                                };
                            } else if (client.name.includes('Mail')) {
                                return {
                                    title: 'Mail App Detected',
                                    message: 'Your iOS device has the Mail app configured as the default email client.',
                                    action: 'Open Mail with your message'
                                };
                            }
                        }

                        return {
                            title: 'Web-based Email Client',
                            message: `Opening ${client.name} in your browser.`,
                            action: `Open ${client.name}`
                        };
                    }

                    // Get alternative email clients
                    getAlternativeClients() {
                        return this.emailClients
                            .filter(c => c.name !== this.preferredClient.name)
                            .slice(0, 3);
                    }
                }

                // Enhanced email submission function with smart device detection
                function sendViaEmail() {
                    // Performance tracking start
                    const startTime = performance.now();
                    const button = document.querySelector('.primary-submit');
                    const originalText = button.innerHTML;

                    // Add loading state for better UX
                    button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Detecting Email Client...';
                    button.disabled = true;
                    button.setAttribute('aria-busy', 'true');

                    try {
                        // Step 1: Validate Contact Information (MANDATORY)
                        const contactValidation = validateContactInformation();
                        if (!contactValidation.isValid) {
                            const buttonValidationMessage = document.getElementById('button-validation-message');
                            buttonValidationMessage.innerHTML = `
                                <i class="fas fa-exclamation-triangle"></i>
                                <strong>Contact Information Required</strong><br>
                                <small>Please complete the Contact Information section before sending via email.</small>
                                <div style="margin-top: 8px; font-size: 0.8rem;">
                                    <i class="fas fa-lightbulb"></i> Required: Email and Name
                                </div>
                            `;
                            buttonValidationMessage.style.display = 'block';
                            buttonValidationMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            resetButtonState(button, originalText);
                            return;
                        }

                        // Step 2: Check Service Selection (OPTIONAL - no longer blocks submission)
                        const serviceValidation = validateServiceSelection();
                        // Services are now optional - proceed regardless

                        // Step 3: Full form validation
                        const validation = validateForm();
                        const buttonValidationMessage = document.getElementById('button-validation-message');

                        if (!validation.isValid) {
                            const missingFields = validation.errors.filter(error =>
                                !error.includes('Contact Information:') && !error.includes('Service Selection:')
                            );

                            if (missingFields.length > 0) {
                                buttonValidationMessage.innerHTML = `
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <strong>Additional Information Needed</strong><br>
                                    <small>Please complete: ${missingFields.join(', ')}</small>
                                `;
                                buttonValidationMessage.style.display = 'block';
                                buttonValidationMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            }
                            resetButtonState(button, originalText);
                            return;
                        }

                        // Hide any previous validation message
                        buttonValidationMessage.style.display = 'none';

                        // Update button text to show detection progress
                        button.innerHTML = '<i class="fas fa-search"></i> Analyzing Your Device...';

                        // Calculate budget and prepare form data
                        const calculator = budgetCalculator;
                        const calculation = calculator.calculate();
                        const name = document.getElementById('name').value;
                        const userEmail = document.getElementById('email').value;

                        // Generate form attachment
                        const formAttachment = generateFormAttachment();

                        // Generate project ID and certificate
                        const projectId = `EMW-${Date.now().toString(36).toUpperCase()}`;
                        const certificate = generateProfessionalCertificate({
                            name: name,
                            email: userEmail,
                            message: document.getElementById('message').value,
                            budget_estimate: calculation.total
                        });

                        // Create email content
                        const inquiryType = calculation.total > 0 ? 'Project Inquiry' : 'General Inquiry';
                        const subject = `EmpathicWeb ${inquiryType} - ${name} (${projectId})`;
                        const emailBody = `Dear EmpathicWeb Team,

Please find attached the project inquiry form data for ${name}.

Project ID: ${projectId}
Certificate ID: ${certificate.certificateId}
${calculation.total > 0 ? `Estimated Budget: ${calculation.total.toLocaleString()} COP` : 'Inquiry Type: General consultation (services to be discussed)'}

The form data is attached below for your reference:

${formAttachment}

Best regards,
${name}
${userEmail}

---
This email was generated by the EmpathicWeb Contact System
For questions, contact: eduardgildardoperezfranco@empathicweb.online`;

                        // Smart email client detection and routing
                        const emailDetector = new SmartEmailClientDetector();
                        const clientInfo = emailDetector.getClientInfo();
                        
                        // Update button to show detected client
                        button.innerHTML = `<i class="${clientInfo.client.icon}"></i> Preparing ${clientInfo.client.name}...`;

                        // Generate email URL with smart routing
                        const emailUrl = emailDetector.generateEmailUrl(subject, emailBody, {
                            to: 'eduardgildardoperezfranco@empathicweb.online',
                            cc: userEmail
                        });

                        // Store submission data for tracking
                        const processingTime = performance.now() - startTime;
                        const submissionData = {
                            type: 'email_smart',
                            timestamp: new Date().toISOString(),
                            clientName: name,
                            clientEmail: userEmail,
                            projectId: projectId,
                            budgetEstimate: calculation.total || 0,
                            processingTime: processingTime,
                            userAgent: navigator.userAgent,
                            formCompletionRate: calculateFormCompletionRate(),
                            deviceInfo: clientInfo.device,
                            emailClient: clientInfo.client,
                            method: 'smart_email_routing'
                        };

                        localStorage.setItem('empathicweb_last_submission', JSON.stringify(submissionData));

                        // Track performance metrics
                        trackButtonPerformance('email', processingTime, true);

                        // Show smart email client notification
                        showSmartEmailNotification(clientInfo, emailUrl, submissionData);

                        resetButtonState(button, originalText);

                    } catch (error) {
                        console.error('Smart email preparation error:', error);
                        resetButtonState(button, originalText);
                        showSubmissionError('Failed to prepare email with smart routing. Please try again.');
                    }
                }

                // Show smart email client notification
                function showSmartEmailNotification(clientInfo, emailUrl, submissionData) {
                    const recommendation = clientInfo.recommendation;
                    const device = clientInfo.device;
                    const client = clientInfo.client;

                    showEnhancedNotification('üìß Smart Email Client Detection', `
                        <div class="notification-content">
                            <div class="notification-header">
                                <i class="${client.icon}"></i>
                                <h3>${recommendation.title}</h3>
                                <small style="color: #27ae60;">Smart routing in ${submissionData.processingTime.toFixed(0)}ms</small>
                            </div>
                            
                            <div class="notification-body">
                                <div class="device-info" style="margin: 15px 0; padding: 12px; background: rgba(52, 152, 219, 0.1); border-radius: 6px; border-left: 3px solid #3498db;">
                                    <strong><i class="fas fa-laptop"></i> Device Analysis:</strong><br>
                                    ‚Ä¢ OS: ${device.os} ${device.osVersion}<br>
                                    ‚Ä¢ Browser: ${device.browser} ${device.browserVersion}<br>
                                    ‚Ä¢ Device Type: ${device.deviceType}<br>
                                    ‚Ä¢ Screen: ${device.screen.width}x${device.screen.height} (${device.screen.orientation})
                                </div>

                                <div class="client-recommendation" style="margin: 15px 0; padding: 12px; background: rgba(39, 174, 96, 0.1); border-radius: 6px; border-left: 3px solid #27ae60;">
                                    <strong><i class="fas fa-check-circle"></i> Recommended Email Client:</strong><br>
                                    ‚Ä¢ ${recommendation.message}<br>
                                    ‚Ä¢ Priority Score: ${client.priority}/10<br>
                                    ‚Ä¢ Protocol: ${client.protocol.toUpperCase()}
                                </div>

                                <div class="submission-details">
                                    <div class="detail-item">
                                        <strong>Project ID:</strong> <span class="highlight">${submissionData.projectId}</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Certificate ID:</strong> <span class="highlight">${submissionData.certificateId || 'N/A'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Sending to:</strong> <span class="highlight">eduardgildardoperezfranco@empathicweb.online</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>CC:</strong> <span class="highlight">${submissionData.clientEmail}</span>
                                    </div>
                                </div>

                                ${clientInfo.alternatives.length > 0 ? `
                                    <div class="alternative-clients" style="margin: 15px 0;">
                                        <strong><i class="fas fa-exchange-alt"></i> Alternative Email Clients:</strong>
                                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 10px;">
                                            ${clientInfo.alternatives.map(alt => `
                                                <div style="padding: 8px; background: rgba(255,255,255,0.05); border-radius: 4px; border-left: 3px solid #95a5a6;">
                                                    <i class="${alt.icon}"></i> ${alt.name}<br>
                                                    <small style="color: #7f8c8d;">Priority: ${alt.priority}/10</small>
                                                </div>
                                            `).join('')}
                                        </div>
                                    </div>
                                ` : ''}

                                <div class="success-message" style="margin: 15px 0; padding: 12px; background: rgba(39, 174, 96, 0.1); border-radius: 6px; border-left: 3px solid #27ae60;">
                                    <strong><i class="fas fa-paperclip"></i> Form Data Included:</strong><br>
                                    ‚Ä¢ Contact information<br>
                                    ‚Ä¢ ${calculation.total > 0 ? 'Selected services and budget estimates' : 'General inquiry (services optional)'}<br>
                                    ‚Ä¢ Project details ${document.getElementById('message').value.trim() ? '(provided)' : '(optional - we\'ll discuss)'}<br>
                                    ‚Ä¢ Professional certificate attached
                                </div>

                                <div class="action-steps">
                                    <h4><i class="fas fa-clipboard-list"></i> Next Steps:</h4>
                                    <ol>
                                        <li><strong>${recommendation.action}...</strong></li>
                                        <li><strong>Review the pre-filled email</strong> with your form data</li>
                                        <li><strong>Send to our team</strong> - CC'd to yourself</li>
                                        <li><strong>Keep the email</strong> for your records</li>
                                    </ol>
                                </div>

                                <div class="client-setup-info" style="margin: 15px 0; padding: 10px; background: rgba(241, 196, 15, 0.1); border-radius: 6px; border-left: 3px solid #f1c40f;">
                                    <strong><i class="fas fa-info-circle"></i> Email Client Setup:</strong><br>
                                    <small>${client.setup}</small>
                                </div>
                            </div>

                            <div class="notification-actions">
                                <button onclick="proceedToSmartEmail('${emailUrl}', '${client.protocol}')" class="btn-primary-action">
                                    <i class="${client.icon}"></i> ${recommendation.action}
                                </button>
                                ${clientInfo.alternatives.length > 0 ? `
                                    <button onclick="showAlternativeClients('${JSON.stringify(clientInfo.alternatives)}')" class="btn-secondary-action">
                                        <i class="fas fa-list"></i> View Alternatives
                                    </button>
                                ` : ''}
                                <button onclick="closeNotification()" class="btn-secondary-action">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </div>
                    `);
                }

                // Proceed to smart email client
                function proceedToSmartEmail(emailUrl, protocol) {
                    closeNotification();

                    // Handle different protocols
                    if (protocol === 'mailto') {
                        // Direct mailto protocol
                        window.location.href = emailUrl;
                    } else {
                        // Web-based email client
                        window.open(emailUrl, '_blank');
                    }

                    // Show submission confirmation
                    setTimeout(() => {
                        showSubmissionConfirmation('email', {
                            recipient: 'Your Email Client + eduardgildardoperezfranco@empathicweb.online',
                            expectedResponse: '24 hours',
                            submissionType: 'Smart Email Routing',
                            nextSteps: [
                                'Your preferred email client has been automatically detected and opened',
                                'Review the pre-filled message with all your form data included',
                                'Send the email to our team (CC\'d to yourself for your records)',
                                'Keep this email for future reference and project tracking',
                                'Our team will respond within 24 hours with a personalized proposal'
                            ]
                        });
                    }, 500);
                }

                // Show alternative email clients
                function showAlternativeClients(alternativesStr) {
                    const alternatives = JSON.parse(alternativesStr);
                    
                    showEnhancedNotification('üìß Alternative Email Clients', `
                        <div class="notification-content">
                            <div class="notification-header">
                                <i class="fas fa-list"></i>
                                <h3>Alternative Email Clients</h3>
                                <small>Choose your preferred email application</small>
                            </div>
                            
                            <div class="notification-body">
                                <div class="alternative-list">
                                    ${alternatives.map((client, index) => `
                                        <div class="alternative-client-item" style="margin: 10px 0; padding: 12px; background: rgba(255,255,255,0.05); border-radius: 6px; border-left: 3px solid #95a5a6;">
                                            <div style="display: flex; align-items: center; justify-content: space-between;">
                                                <div style="display: flex; align-items: center;">
                                                    <i class="${client.icon}" style="margin-right: 10px; font-size: 1.2em;"></i>
                                                    <div>
                                                        <strong>${client.name}</strong><br>
                                                        <small style="color: #7f8c8d;">Priority: ${client.priority}/10 | ${client.protocol.toUpperCase()}</small>
                                                    </div>
                                                </div>
                                                <button onclick="useAlternativeClient('${client.name}', '${client.protocol}')" class="btn-alternative-client">
                                                    <i class="fas fa-envelope"></i> Use ${client.name}
                                                </button>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                                
                                <div class="setup-instructions" style="margin-top: 15px; padding: 10px; background: rgba(241, 196, 15, 0.1); border-radius: 6px; border-left: 3px solid #f1c40f;">
                                    <strong><i class="fas fa-cog"></i> Setting Up Email Clients:</strong><br>
                                    <ul style="margin: 5px 0 0 20px;">
                                        <li><strong>Desktop:</strong> Configure default email client in system settings</li>
                                        <li><strong>Mobile:</strong> Set default email app in device settings</li>
                                        <li><strong>Web:</strong> No setup required - opens directly in browser</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="notification-actions">
                                <button onclick="closeNotification()" class="btn-secondary-action">
                                    <i class="fas fa-times"></i> Back to Main
                                </button>
                            </div>
                        </div>
                    `);
                }

                // Use alternative email client
                function useAlternativeClient(clientName, protocol) {
                    closeNotification();
                    
                    // Generate email URL for the selected alternative client
                    const calculator = budgetCalculator;
                    const calculation = calculator.calculate();
                    const name = document.getElementById('name').value;
                    const userEmail = document.getElementById('email').value;
                    const formAttachment = generateFormAttachment();
                    const projectId = `EMW-${Date.now().toString(36).toUpperCase()}`;
                    
                    const subject = `EmpathicWeb Project Inquiry - ${name} (${projectId})`;
                    const emailBody = `Dear EmpathicWeb Team,

Please find attached the project inquiry form data for ${name}.

Project ID: ${projectId}
${calculation.total > 0 ? `Estimated Budget: ${calculation.total.toLocaleString()} COP` : 'Inquiry Type: General consultation'}

Form Data:
${formAttachment}

Best regards,
${name}
${userEmail}

---
This email was generated by the EmpathicWeb Contact System`;

                    let emailUrl = '';
                    
                    if (protocol === 'mailto') {
                        emailUrl = `mailto:eduardgildardoperezfranco@empathicweb.online?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}&cc=${encodeURIComponent(userEmail)}`;
                    } else {
                        // Web-based client
                        if (clientName.includes('Gmail')) {
                            emailUrl = `https://mail.google.com/mail/?view=cm&fs=1&to=eduardgildardoperezfranco@empathicweb.online&su=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
                        } else if (clientName.includes('Outlook')) {
                            emailUrl = `https://outlook.live.com/owa/?path=/mail/action/compose&to=eduardgildardoperezfranco@empathicweb.online&subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
                        } else if (clientName.includes('Yahoo')) {
                            emailUrl = `https://compose.mail.yahoo.com/?to=eduardgildardoperezfranco@empathicweb.online&subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
                        }
                    }

                    // Open the selected email client
                    if (protocol === 'mailto') {
                        window.location.href = emailUrl;
                    } else {
                        window.open(emailUrl, '_blank');
                    }

                    // Show confirmation
                    setTimeout(() => {
                        showSubmissionConfirmation('email', {
                            recipient: `Your ${clientName} + eduardgildardoperezfranco@empathicweb.online`,
                            expectedResponse: '24 hours',
                            submissionType: `${clientName} Email Client`,
                            nextSteps: [
                                `Opening ${clientName} with your complete form data`,
                                'Review the pre-filled message and make any necessary adjustments',
                                'Send the email to our team for immediate processing',
                                'Keep this email for your records and future reference',
                                'Expect a response from our team within 24 hours'
                            ]
                        });
                    }, 500);
                }
            


            // Proceed to user email after confirmation
            function proceedToUserEmail(mailtoUrl) {
                closeNotification();

                // Open email client with form data
                window.location.href = mailtoUrl;

                // Show submission confirmation
                setTimeout(() => {
                    showSubmissionConfirmation('email', {
                        recipient: 'Your Email + eduardgildardoperezfranco@empathicweb.online',
                        expectedResponse: '24 hours',
                        submissionType: 'Email with Form Data',
                        nextSteps: [
                            'Your email client has opened with complete form data',
                            'Review the pre-filled message and attachments',
                            'Send the email to our team (CC\'d to yourself)',
                            'Keep this email for your project records',
                            'Our team will respond within 24 hours'
                        ]
                    });
                }, 500);
            }

            // Proceed to user WhatsApp after confirmation
            function proceedToUserWhatsApp(whatsappUrl) {
                closeNotification();

                // Open WhatsApp with form data
                window.open(whatsappUrl, '_blank');

                // Show submission confirmation
                setTimeout(() => {
                    showSubmissionConfirmation('whatsapp', {
                        recipient: 'Your WhatsApp',
                        expectedResponse: 'Immediate (self-delivery)',
                        submissionType: 'WhatsApp with Form Data',
                        nextSteps: [
                            'WhatsApp has opened with your complete form data',
                            'Review the pre-filled message with all details',
                            'Send the message to our business WhatsApp',
                            'Keep this conversation for project tracking',
                            'Our team will contact you within 2-4 hours'
                        ]
                    });
                }, 500);
            }

            // Enhanced WhatsApp submission function with user WhatsApp integration
            function sendViaWhatsApp() {
                // Performance tracking start
                const startTime = performance.now();
                const button = document.querySelector('.whatsapp-submit');
                const originalText = button.innerHTML;

                // Add loading state for better UX
                button.innerHTML = '<i class="fab fa-whatsapp"></i> <i class="fas fa-spinner fa-spin"></i> Preparing...';
                button.disabled = true;
                button.setAttribute('aria-busy', 'true');

                try {
                    // Step 1: Validate Contact Information (MANDATORY)
                    const contactValidation = validateContactInformation();
                    if (!contactValidation.isValid) {
                        const buttonValidationMessage = document.getElementById('button-validation-message');
                        buttonValidationMessage.innerHTML = `
                            <i class="fas fa-exclamation-triangle"></i>
                            <strong>Contact Information Required</strong><br>
                            <small>Please complete the Contact Information section before sending via WhatsApp.</small>
                            <div style="margin-top: 8px; font-size: 0.8rem;">
                                <i class="fas fa-lightbulb"></i> Required: Email and Name (Phone/WhatsApp optional but recommended)
                            </div>
                        `;
                        buttonValidationMessage.style.display = 'block';
                        buttonValidationMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        resetButtonState(button, originalText);
                        return;
                    }

                    // Step 2: Check Service Selection (OPTIONAL - no longer blocks submission)
                    const serviceValidation = validateServiceSelection();
                    // Services are now optional - proceed regardless

                    // Step 3: Check if user has WhatsApp number
                    const userPhone = document.getElementById('phone').value.trim();
                    if (!userPhone) {
                        const buttonValidationMessage = document.getElementById('button-validation-message');
                        buttonValidationMessage.innerHTML = `
                            <i class="fas fa-exclamation-triangle"></i>
                            <strong>WhatsApp Number Required</strong><br>
                            <small>Please provide your WhatsApp phone number to send the form data.</small>
                            <div style="margin-top: 8px; font-size: 0.8rem;">
                                <i class="fas fa-lightbulb"></i> Include country code (e.g., +57 for Colombia)
                            </div>
                        `;
                        buttonValidationMessage.style.display = 'block';
                        buttonValidationMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        resetButtonState(button, originalText);
                        return;
                    }

                    // Step 4: Full form validation
                    const validation = validateForm();
                    const buttonValidationMessage = document.getElementById('button-validation-message');

                    if (!validation.isValid) {
                        const missingFields = validation.errors.filter(error =>
                            !error.includes('Contact Information:') && !error.includes('Service Selection:')
                        );

                        if (missingFields.length > 0) {
                            buttonValidationMessage.innerHTML = `
                                <i class="fas fa-exclamation-triangle"></i>
                                <strong>Additional Information Needed</strong><br>
                                <small>Please complete: ${missingFields.join(', ')}</small>
                            `;
                            buttonValidationMessage.style.display = 'block';
                            buttonValidationMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                        resetButtonState(button, originalText);
                        return;
                    }

                    // Hide any previous validation message
                    buttonValidationMessage.style.display = 'none';

                    // Update button text
                    button.innerHTML = '<i class="fab fa-whatsapp"></i> Sending via WhatsApp...';

                    // Calculate budget and prepare form data
                    const calculator = budgetCalculator;
                    const calculation = calculator.calculate();

                    const name = document.getElementById('name').value;
                    const email = document.getElementById('email').value;
                    const phone = userPhone;

                    // Generate form attachment content for WhatsApp
                    const formAttachment = generateFormAttachment();

                    // Generate project ID and certificate
                    const projectId = `EMW-WA-${Date.now().toString(36).toUpperCase()}`;
                    const certificate = generateProfessionalCertificate({
                        name: name,
                        email: email,
                        message: document.getElementById('message').value,
                        budget_estimate: calculation.total
                    });

                    // Create WhatsApp message with form data
                    const inquiryType = calculation.total > 0 ? 'PROJECT INQUIRY' : 'GENERAL INQUIRY';
                    const budgetInfo = calculation.total > 0 ? `*Estimated Budget:* ${calculation.total.toLocaleString()} COP` : `*Inquiry Type:* General consultation (services to be discussed)`;

                    const whatsappMessage = `*EMPATHICWEB ${inquiryType}*

Hello! I'm sending my project inquiry form data.

*Project ID:* ${projectId}
*Certificate ID:* ${certificate.certificateId}
${budgetInfo}

*üìã FORM DATA ATTACHED:*

${formAttachment}

---
*Please review my inquiry and contact me for next steps.*
*Expected response: Within 2-4 hours*

Best regards,
${name}
üìß ${email}
üì± ${phone}`;

                    // Send to business WhatsApp with form data
                    const whatsappUrl = `https://wa.me/573108005004?text=${encodeURIComponent(whatsappMessage)}`;

                    // Store submission data for tracking
                    const processingTime = performance.now() - startTime;
                    const submissionData = {
                        type: 'whatsapp_user',
                        timestamp: new Date().toISOString(),
                        clientName: name,
                        clientEmail: email,
                        clientPhone: phone,
                        projectId: projectId,
                        budgetEstimate: calculation.total || 0,
                        processingTime: processingTime,
                        userAgent: navigator.userAgent,
                        formCompletionRate: calculateFormCompletionRate(),
                        deviceType: getDeviceType(),
                        country: detectUserCountry(),
                        method: 'user_whatsapp_attachment'
                    };

                    localStorage.setItem('empathicweb_last_submission', JSON.stringify(submissionData));

                    // Track performance metrics
                    trackButtonPerformance('whatsapp', processingTime, true);

                    // Show preparation notification
                    showEnhancedNotification('üì± WhatsApp Prepared with Form Data', `
                        <div class="notification-content">
                            <div class="notification-header">
                                <i class="fab fa-whatsapp"></i>
                                <h3>Form Data Ready for WhatsApp</h3>
                                <small style="color: #27ae60;">Prepared in ${processingTime.toFixed(0)}ms</small>
                            </div>
                            <div class="notification-body">
                                <div class="submission-details">
                                    <div class="detail-item">
                                        <strong>Project ID:</strong> <span class="highlight">${projectId}</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Certificate ID:</strong> <span class="highlight">${certificate.certificateId}</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Sending to:</strong> <span class="highlight">+57 310 800 5004</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Your Contact:</strong> <span class="highlight">${email} | ${phone}</span>
                                    </div>
                                </div>
                                <div class="success-message" style="margin: 15px 0; padding: 12px; background: rgba(39, 174, 96, 0.1); border-radius: 6px; border-left: 3px solid #27ae60;">
                                    <strong><i class="fas fa-paperclip"></i> Form Data Included:</strong><br>
                                    ‚Ä¢ Contact information<br>
                                    ‚Ä¢ ${calculation.total > 0 ? 'Selected services and budget breakdown' : 'General inquiry (services optional)'}<br>
                                    ‚Ä¢ Project details ${document.getElementById('message').value.trim() ? '(provided)' : '(optional - we\'ll discuss)'}<br>
                                    ‚Ä¢ Professional certificate and project ID
                                </div>
                                <div class="performance-insights" style="margin: 15px 0; padding: 10px; background: rgba(52, 152, 219, 0.1); border-radius: 6px; border-left: 3px solid #27ae60;">
                                    <strong><i class="fab fa-whatsapp"></i> WhatsApp Benefits:</strong><br>
                                    ‚Ä¢ Direct communication with your data<br>
                                    ‚Ä¢ Instant delivery confirmation<br>
                                    ‚Ä¢ Professional record keeping<br>
                                    ‚Ä¢ Quick response times (2-4 hours)
                                </div>
                                <div class="action-steps">
                                    <h4><i class="fas fa-clipboard-list"></i> Next Steps:</h4>
                                    <ol>
                                        <li><strong>WhatsApp opening...</strong></li>
                                        <li><strong>Review the message</strong> with your complete form data</li>
                                        <li><strong>Send to our WhatsApp</strong> for immediate response</li>
                                        <li><strong>Keep the conversation</strong> for project tracking</li>
                                    </ol>
                                </div>
                                <div class="professional-note">
                                    <i class="fas fa-comments"></i>
                                    <p><strong>Direct Business Communication:</strong> This WhatsApp message will be sent directly to our professional business line for immediate attention and response.</p>
                                </div>
                            </div>
                            <div class="notification-actions">
                                <button onclick="proceedToUserWhatsApp('${whatsappUrl}')" class="btn-primary-action">
                                    <i class="fab fa-whatsapp"></i> Open WhatsApp with Form Data
                                </button>
                                <button onclick="closeNotification()" class="btn-secondary-action">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                            </div>
                        </div>
                    `);

                    resetButtonState(button, originalText);

                } catch (error) {
                    console.error('WhatsApp preparation error:', error);
                    resetButtonState(button, originalText);
                    showSubmissionError('Failed to prepare WhatsApp message. Please try again.');
                }
            }

            // Proceed to WhatsApp after confirmation
            function proceedToWhatsApp(whatsappUrl) {
                closeNotification();
                
                // Open WhatsApp
                window.open(whatsappUrl, '_blank');

                // Show submission confirmation
                setTimeout(() => {
                    showSubmissionConfirmation('whatsapp', {
                        recipient: '+57 310 800 5004',
                        expectedResponse: '2-4 hours',
                        submissionType: 'WhatsApp',
                        nextSteps: [
                            'Your WhatsApp message has been prepared for sending',
                            'Direct message will reach our professional consultant',
                            'Quick acknowledgment typically within 2-4 hours',
                            'May include immediate clarification questions or scheduling details'
                        ]
                    });
                }, 500);
            }

            function generateEmailBody() {
                const formData = new FormData(form);
                let body = 'EmpathicWeb Project Inquiry\n\n';

                for (let [key, value] of formData.entries()) {
                    if (value && key !== 'quotation-breakdown') {
                        body += `${key}: ${value}\n`;
                    }
                }

                const breakdown = document.getElementById('quotation-breakdown').innerHTML;
                if (breakdown) {
                    body += '\n--- Quotation Details ---\n' + breakdown.replace(/<[^>]*>/g, '');
                }

                return body;
            }

            function generateWhatsAppMessage(calculation) {
                let message = `*EmpathicWeb Project Inquiry*\n\n`;

                // Basic info
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const phone = document.getElementById('phone').value;
                const company = document.getElementById('company').value;

                if (name) message += `üë§ *Name:* ${name}\n`;
                if (email) message += `üìß *Email:* ${email}\n`;
                if (phone) message += `üì± *Phone:* ${phone}\n`;
                if (company) message += `üè¢ *Company:* ${company}\n\n`;

                // Project details
                const goal = document.getElementById('goal').value;
                const contactMethod = document.getElementById('contact-method').value;
                const messageText = document.getElementById('message').value;

                if (goal) message += `üéØ *Project Goal:* ${goal}\n`;
                if (contactMethod) message += `üí¨ *Preferred Contact:* ${contactMethod}\n\n`;

                if (messageText) message += `üìù *Project Details:*\n${messageText}\n\n`;

                // Quotation (if services selected)
                if (calculation.total > 0) {
                    message += `üí∞ *Estimated Quotation:* ${calculation.total.toLocaleString()} COP\n\n`;
                    message += `*Breakdown:*\n${budgetCalculator.generateBreakdownHTML().replace(/<[^>]*>/g, '')}\n\n`;
                } else {
                    message += `üí¨ *General Inquiry:* Let's discuss your project needs!\n\n`;
                }

                message += `‚úÖ *Ready to explore your empathic web development possibilities!*`;

                return message;
            }

            function handleFormSubmission(method) {
                const validation = validateForm();
                let validationSummary = document.querySelector('.validation-summary');

                if (!validationSummary) {
                    validationSummary = document.createElement('div');
                    validationSummary.className = 'validation-summary';
                    form.insertBefore(validationSummary, form.firstChild);
                }

                if (validation.isValid) {
                    validationSummary.style.display = 'none';

                    // Update rate limiting timestamp
                    lastSubmissionTime = Date.now();

                    const successMessage = document.createElement('div');
                    successMessage.style.cssText = `
                        background: rgba(39, 174, 96, 0.1);
                        border: 1px solid #27ae60;
                        color: #27ae60;
                        padding: 15px;
                        border-radius: 8px;
                        margin-bottom: 20px;
                    `;

                    if (method === 'secure') {
                        successMessage.innerHTML = '<i class="fas fa-shield-alt"></i> Secure submission in progress... Your inquiry is being sent safely!';
                    }

                    const existingSuccess = form.querySelector('.success-message');
                    if (existingSuccess) existingSuccess.remove();

                    successMessage.className = 'success-message';
                    form.insertBefore(successMessage, form.firstChild);

                    // For secure submission, allow normal form submission
                    if (method === 'secure') {
                        // Form will submit normally to Netlify
                        return true;
                    }
                } else {
                    showValidationErrors(validation.errors);
                    return false;
                }
            }

            function showValidationErrors(errors) {
                let validationSummary = document.querySelector('.validation-summary');
                if (!validationSummary) {
                    validationSummary = document.createElement('div');
                    validationSummary.className = 'validation-summary';
                    form.insertBefore(validationSummary, form.firstChild);
                }

                validationSummary.innerHTML = '<i class="fas fa-exclamation-triangle"></i><strong>Please fill in all required fields:</strong><ul style="margin: 10px 0 0 20px;">' +
                    errors.map(error => `<li>${error}</li>`).join('') + '</ul>';
                validationSummary.style.display = 'block';
                validationSummary.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            // Show submission success notification
            function showSubmissionSuccess(submissionData) {
                showEnhancedNotification('‚úÖ Submission Successful!', `
                    <div class="notification-content success">
                        <div class="success-header">
                            <div class="success-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <h3>Your inquiry has been sent successfully!</h3>
                        </div>
                        
                        <div class="success-details">
                            <div class="detail-row">
                                <i class="fas fa-paper-plane"></i>
                                <div>
                                    <strong>Sent to:</strong> eduardgildardoperezfranco@empathicweb.online
                                </div>
                            </div>
                            <div class="detail-row">
                                <i class="fas fa-ticket-alt"></i>
                                <div>
                                    <strong>Project ID:</strong> ${submissionData.projectId}
                                </div>
                            </div>
                            <div class="detail-row">
                                <i class="fas fa-clock"></i>
                                <div>
                                    <strong>Submission Time:</strong> ${new Date(submissionData.submissionTime).toLocaleString()}
                                </div>
                            </div>
                        </div>
                        
                        <div class="next-steps-section">
                            <h4><i class="fas fa-clipboard-list"></i> What happens next?</h4>
                            <ol class="next-steps-list">
                                <li><strong>Within 2 hours:</strong> Automated confirmation email sent</li>
                                <li><strong>Within 24 hours:</strong> Professional response with initial assessment</li>
                                <li><strong>Within 48 hours:</strong> Detailed project proposal and timeline</li>
                                <li><strong>Within 72 hours:</strong> Service agreement and project kickoff</li>
                            </ol>
                        </div>
                        
                        <div class="contact-reassurance">
                            <div class="contact-option">
                                <i class="fas fa-envelope"></i>
                                <div>
                                    <strong>Email:</strong> eduardgildardoperezfranco@empathicweb.online
                                </div>
                            </div>
                            <div class="contact-option">
                                <i class="fas fa-phone"></i>
                                <div>
                                    <strong>Direct Line:</strong> +57 310 800 5004
                                </div>
                            </div>
                            <div class="contact-option">
                                <i class="fab fa-whatsapp"></i>
                                <div>
                                    <strong>WhatsApp:</strong> +57 310 800 5004
                                </div>
                            </div>
                        </div>
                        
                        <div class="guarantee-badge">
                            <i class="fas fa-shield-alt"></i>
                            <span>30-Day Satisfaction Guarantee | 24h Response Guarantee</span>
                        </div>
                    </div>
                `);
                
                // Auto-close after 10 seconds but keep success state
                setTimeout(() => {
                    closeNotification();
                }, 10000);
            }
            
            // Show submission error notification
            function showSubmissionError(errorMessage) {
                showEnhancedNotification('‚ùå Submission Failed', `
                    <div class="notification-content error">
                        <div class="error-header">
                            <div class="error-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <h3>Submission encountered an issue</h3>
                        </div>
                        
                        <div class="error-details">
                            <p><strong>Error:</strong> ${errorMessage}</p>
                        </div>
                        
                        <div class="retry-actions">
                            <h4>Don't worry! You can try these alternatives:</h4>
                            <div class="action-buttons">
                                <button onclick="retrySubmission()" class="btn-retry">
                                    <i class="fas fa-redo"></i> Try Again
                                </button>
                                <button onclick="sendViaEmail()" class="btn-alternative">
                                    <i class="fas fa-envelope"></i> Send via Email
                                </button>
                                <button onclick="sendViaWhatsApp()" class="btn-alternative">
                                    <i class="fab fa-whatsapp"></i> Send via WhatsApp
                                </button>
                            </div>
                        </div>
                        
                        <div class="direct-contact">
                            <p><strong>Need immediate assistance?</strong></p>
                            <div class="direct-contacts">
                                <a href="mailto:eduardgildardoperezfranco@empathicweb.online" class="direct-link">
                                    <i class="fas fa-envelope"></i> eduardgildardoperezfranco@empathicweb.online
                                </a>
                                <a href="https://wa.me/573108005004" target="_blank" class="direct-link">
                                    <i class="fab fa-whatsapp"></i> +57 310 800 5004
                                </a>
                            </div>
                        </div>
                    </div>
                `);
            }
            
            // Retry submission
            function retrySubmission() {
                closeNotification();
                // Reset form state and allow user to try again
                // Form submission will be handled by EnhancedContactSystem
            }

            // Comprehensive analytics and tracking system
            function initializeAnalytics() {
                // Initialize analytics data structure
                const analyticsData = {
                    sessionStart: new Date().toISOString(),
                    pageViews: 1,
                    formInteractions: [],
                    buttonClicks: [],
                    hateSpeechEvents: [],
                    submissionAttempts: [],
                    userBehavior: {
                        timeOnPage: 0,
                        scrollDepth: 0,
                        deviceType: getDeviceType(),
                        country: detectUserCountry(),
                        referrer: document.referrer,
                        userAgent: navigator.userAgent
                    }
                };

                // Store initial session data
                localStorage.setItem('empathicweb_session_data', JSON.stringify(analyticsData));

                // Track page interactions
                trackPageInteractions();
                
                // Track form interactions
                trackFormInteractions();

                // Track user behavior
                trackUserBehavior();

                // Send periodic analytics updates
                setInterval(() => {
                    updateAnalyticsData();
                }, 30000); // Every 30 seconds

                // Track session end
                window.addEventListener('beforeunload', () => {
                    finalizeSessionAnalytics();
                });
            }

            function trackPageInteractions() {
                // Track clicks on key elements
                const trackableElements = [
                    '.primary-submit',
                    '.whatsapp-submit',
                    '.service-card',
                    '.trust-indicator',
                    '.progress-step'
                ];

                trackableElements.forEach(selector => {
                    document.querySelectorAll(selector).forEach(element => {
                        element.addEventListener('click', (e) => {
                            const analyticsData = JSON.parse(localStorage.getItem('empathicweb_session_data') || '{}');
                            analyticsData.buttonClicks.push({
                                element: selector,
                                target: e.target.tagName,
                                timestamp: new Date().toISOString(),
                                position: element.getBoundingClientRect()
                            });
                            localStorage.setItem('empathicweb_session_data', JSON.stringify(analyticsData));
                        });
                    });
                });
            }

            function trackFormInteractions() {
                const formFields = document.querySelectorAll('#contact-intake input, #contact-intake textarea, #contact-intake select');
                
                formFields.forEach(field => {
                    field.addEventListener('focus', () => {
                        trackFormFieldInteraction(field, 'focus');
                    });

                    field.addEventListener('input', () => {
                        trackFormFieldInteraction(field, 'input');
                    });

                    field.addEventListener('blur', () => {
                        trackFormFieldInteraction(field, 'blur');
                    });
                });
            }

            function trackFormFieldInteraction(field, action) {
                const analyticsData = JSON.parse(localStorage.getItem('empathicweb_session_data') || '{}');
                analyticsData.formInteractions.push({
                    fieldName: field.name || field.id,
                    fieldType: field.type,
                    action: action,
                    timestamp: new Date().toISOString(),
                    valueLength: field.value ? field.value.length : 0,
                    isRequired: field.required
                });
                localStorage.setItem('empathicweb_session_data', JSON.stringify(analyticsData));
            }

            function trackUserBehavior() {
                // Track scroll depth
                window.addEventListener('scroll', () => {
                    const scrollDepth = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
                    const analyticsData = JSON.parse(localStorage.getItem('empathicweb_session_data') || '{}');
                    analyticsData.userBehavior.scrollDepth = Math.max(analyticsData.userBehavior.scrollDepth, scrollDepth);
                    localStorage.setItem('empathicweb_session_data', JSON.stringify(analyticsData));
                });

                // Track time on page
                setInterval(() => {
                    const analyticsData = JSON.parse(localStorage.getItem('empathicweb_session_data') || '{}');
                    analyticsData.userBehavior.timeOnPage = Date.now() - new Date(analyticsData.sessionStart).getTime();
                    localStorage.setItem('empathicweb_session_data', JSON.stringify(analyticsData));
                }, 1000);
            }

            function updateAnalyticsData() {
                const analyticsData = JSON.parse(localStorage.getItem('empathicweb_session_data') || '{}');
                analyticsData.pageViews++;
                localStorage.setItem('empathicweb_session_data', JSON.stringify(analyticsData));
            }

            function finalizeSessionAnalytics() {
                const analyticsData = JSON.parse(localStorage.getItem('empathicweb_session_data') || '{}');
                analyticsData.sessionEnd = new Date().toISOString();
                analyticsData.userBehavior.timeOnPage = Date.now() - new Date(analyticsData.sessionStart).getTime();
                
                // Store in session history
                const sessionHistory = JSON.parse(localStorage.getItem('empathicweb_session_history') || '[]');
                sessionHistory.push(analyticsData);
                
                // Keep only last 50 sessions
                if (sessionHistory.length > 50) {
                    sessionHistory.splice(0, sessionHistory.length - 50);
                }

                localStorage.setItem('empathicweb_session_history', JSON.stringify(sessionHistory));
                localStorage.removeItem('empathicweb_session_data');
            }

            function trackSubmissionAnalytics(submissionData) {
                const analyticsData = JSON.parse(localStorage.getItem('empathicweb_session_data') || '{}');
                analyticsData.submissionAttempts.push({
                    ...submissionData,
                    timestamp: new Date().toISOString()
                });
                localStorage.setItem('empathicweb_session_data', JSON.stringify(analyticsData));
            }

            function trackHateSpeechAnalytics(hateSpeechData) {
                const analyticsData = JSON.parse(localStorage.getItem('empathicweb_session_data') || '{}');
                analyticsData.hateSpeechEvents.push({
                    ...hateSpeechData,
                    timestamp: new Date().toISOString()
                });
                localStorage.setItem('empathicweb_session_data', JSON.stringify(analyticsData));
            }

            function getAnalyticsReport() {
                const sessionHistory = JSON.parse(localStorage.getItem('empathicweb_session_history') || '[]');
                const currentSession = JSON.parse(localStorage.getItem('empathicweb_session_data') || '{}');

                const report = {
                    totalSessions: sessionHistory.length + (currentSession.sessionStart ? 1 : 0),
                    averageTimeOnPage: calculateAverageTimeOnPage(sessionHistory, currentSession),
                    averageScrollDepth: calculateAverageScrollDepth(sessionHistory, currentSession),
                    formInteractionRate: calculateFormInteractionRate(sessionHistory, currentSession),
                    submissionRate: calculateSubmissionRate(sessionHistory, currentSession),
                    hateSpeechIncidents: calculateHateSpeechIncidents(sessionHistory, currentSession),
                    deviceDistribution: calculateDeviceDistribution(sessionHistory, currentSession),
                    geographicDistribution: calculateGeographicDistribution(sessionHistory, currentSession)
                };

                return report;
            }

            function calculateAverageTimeOnPage(history, current) {
                const allSessions = [...history, ...(current.sessionStart ? [current] : [])];
                const totalTime = allSessions.reduce((sum, session) => sum + (session.userBehavior?.timeOnPage || 0), 0);
                return allSessions.length > 0 ? Math.round(totalTime / allSessions.length / 1000) : 0;
            }

            function calculateAverageScrollDepth(history, current) {
                const allSessions = [...history, ...(current.sessionStart ? [current] : [])];
                const totalDepth = allSessions.reduce((sum, session) => sum + (session.userBehavior?.scrollDepth || 0), 0);
                return allSessions.length > 0 ? Math.round(totalDepth / allSessions.length) : 0;
            }

            function calculateFormInteractionRate(history, current) {
                const allSessions = [...history, ...(current.sessionStart ? [current] : [])];
                const sessionsWithFormInteraction = allSessions.filter(session => session.formInteractions && session.formInteractions.length > 0);
                return allSessions.length > 0 ? Math.round((sessionsWithFormInteraction.length / allSessions.length) * 100) : 0;
            }

            function calculateSubmissionRate(history, current) {
                const allSessions = [...history, ...(current.sessionStart ? [current] : [])];
                const sessionsWithSubmissions = allSessions.filter(session => session.submissionAttempts && session.submissionAttempts.length > 0);
                return allSessions.length > 0 ? Math.round((sessionsWithSubmissions.length / allSessions.length) * 100) : 0;
            }

            function calculateHateSpeechIncidents(history, current) {
                const allSessions = [...history, ...(current.sessionStart ? [current] : [])];
                return allSessions.reduce((sum, session) => sum + (session.hateSpeechEvents ? session.hateSpeechEvents.length : 0), 0);
            }

            function calculateDeviceDistribution(history, current) {
                const allSessions = [...history, ...(current.sessionStart ? [current] : [])];
                const distribution = { desktop: 0, mobile: 0, tablet: 0 };
                
                allSessions.forEach(session => {
                    const device = session.userBehavior?.deviceType || 'unknown';
                    if (distribution[device] !== undefined) {
                        distribution[device]++;
                    }
                });

                return distribution;
            }

            function calculateGeographicDistribution(history, current) {
                const allSessions = [...history, ...(current.sessionStart ? [current] : [])];
                const distribution = {};
                
                allSessions.forEach(session => {
                    const country = session.userBehavior?.country || 'Unknown';
                    distribution[country] = (distribution[country] || 0) + 1;
                });

                return distribution;
            }

            // Performance tracking and analytics functions
            function trackButtonPerformance(method, processingTime, success) {
                const performanceData = {
                    method: method,
                    processingTime: processingTime,
                    success: success,
                    timestamp: new Date().toISOString(),
                    userAgent: navigator.userAgent,
                    url: window.location.href
                };

                // Store in localStorage for analytics
                const existingData = JSON.parse(localStorage.getItem('empathicweb_performance_data') || '[]');
                existingData.push(performanceData);

                // Keep only last 100 entries to avoid storage bloat
                if (existingData.length > 100) {
                    existingData.splice(0, existingData.length - 100);
                }

                localStorage.setItem('empathicweb_performance_data', JSON.stringify(existingData));

                // Log performance metrics
                console.log(`üöÄ ${method.toUpperCase()} Performance: ${processingTime.toFixed(2)}ms, Success: ${success}`);
            }

            // Calculate form completion rate for analytics
            function calculateFormCompletionRate() {
                const requiredFields = ['email', 'name', 'goal', 'contact-method', 'message'];
                const optionalFields = ['phone', 'country', 'company'];
                const allFields = [...requiredFields, ...optionalFields];

                let completedRequired = 0;
                let completedOptional = 0;

                requiredFields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (field && field.value.trim()) {
                        completedRequired++;
                    }
                });

                optionalFields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (field && field.value.trim()) {
                        completedOptional++;
                    }
                });

                const requiredRate = (completedRequired / requiredFields.length) * 100;
                const optionalRate = (completedOptional / optionalFields.length) * 100;
                const overallRate = ((completedRequired + completedOptional) / allFields.length) * 100;

                return {
                    required: requiredRate.toFixed(1),
                    optional: optionalRate.toFixed(1),
                    overall: overallRate.toFixed(1)
                };
            }

            // Detect device type for performance optimization
            function getDeviceType() {
                const ua = navigator.userAgent;
                if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)) {
                    return 'tablet';
                }
                if (/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)) {
                    return 'mobile';
                }
                return 'desktop';
            }

            // Detect user country for regional optimization
            function detectUserCountry() {
                // Try to detect from timezone
                const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
                const countryMap = {
                    'America/Bogota': 'Colombia',
                    'America/Buenos_Aires': 'Argentina',
                    'America/Santiago': 'Chile',
                    'America/Lima': 'Peru',
                    'America/Mexico_City': 'Mexico',
                    'America/Sao_Paulo': 'Brazil',
                    'Europe/Madrid': 'Spain',
                    'Europe/London': 'UK',
                    'America/New_York': 'USA',
                    'America/Los_Angeles': 'USA'
                };

                return countryMap[timezone] || 'Unknown';
            }

            // Reset button state after processing
            function resetButtonState(button, originalText) {
                button.innerHTML = originalText;
                button.disabled = false;
                button.removeAttribute('aria-busy');
            }

            // Enhanced redirect function with better user guidance
            function redirectToContactInfo(submissionMethod) {
                // Highlight the contact information section with enhanced styling
                const contactSection = document.querySelector('.form-section');
                contactSection.style.borderColor = '#e74c3c';
                contactSection.style.boxShadow = '0 0 15px rgba(231, 76, 60, 0.4)';
                contactSection.style.background = 'linear-gradient(135deg, rgba(231, 76, 60, 0.05) 0%, rgba(231, 76, 60, 0.02) 100%)';
                contactSection.style.transition = 'all 0.3s ease';

                // Scroll to contact information section with smooth animation
                contactSection.scrollIntoView({ behavior: 'smooth', block: 'center' });

                // Show specific message about completing contact info with method-specific guidance
                const buttonValidationMessage = document.getElementById('button-validation-message');
                const methodName = submissionMethod === 'email' ? 'email' : 'WhatsApp';
                const methodIcon = submissionMethod === 'email' ? 'fas fa-envelope' : 'fab fa-whatsapp';
                const responseTime = submissionMethod === 'email' ? '24 hours' : '2-4 hours';
                const conversionRate = submissionMethod === 'email' ? '85%' : '92%';

                buttonValidationMessage.innerHTML = `
                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                        <i class="${methodIcon}" style="color: #e74c3c; font-size: 1.2em; margin-top: 2px;"></i>
                        <div>
                            <strong style="color: #e74c3c;">Complete Your Contact Information</strong><br>
                            <small>You've selected services and shown interest in our offerings. Please fill in your email and name below to proceed with ${methodName} submission.</small>
                            <div style="margin-top: 8px; padding: 8px; background: rgba(231, 76, 60, 0.1); border-radius: 4px; font-size: 0.8rem;">
                                <i class="fas fa-chart-line"></i> <strong>Expected Performance:</strong> ${conversionRate} success rate, ${responseTime} response time
                            </div>
                        </div>
                    </div>
                `;
                buttonValidationMessage.style.display = 'block';

                // Add focus animation to email field
                setTimeout(() => {
                    const emailField = document.getElementById('email');
                    emailField.focus();
                    emailField.style.boxShadow = '0 0 8px rgba(231, 76, 60, 0.5)';
                    emailField.style.borderColor = '#e74c3c';

                    // Remove focus styling after user starts typing
                    emailField.addEventListener('input', function removeStyling() {
                        this.style.boxShadow = '';
                        this.style.borderColor = '';
                        this.removeEventListener('input', removeStyling);
                    });
                }, 1000);

                // Remove highlighting after 8 seconds with fade effect
                setTimeout(() => {
                    contactSection.style.borderColor = '';
                    contactSection.style.boxShadow = '';
                    contactSection.style.background = '';
                }, 8000);
            }

            // Show success message (legacy compatibility)
            function showSuccessMessage(message) {
                const successMessage = document.createElement('div');
                successMessage.style.cssText = `
                    background: rgba(39, 174, 96, 0.1);
                    border: 1px solid #27ae60;
                    color: #27ae60;
                    padding: 15px;
                    border-radius: 8px;
                    margin-bottom: 20px;
                `;
                successMessage.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;

                const existingSuccess = form.querySelector('.success-message');
                if (existingSuccess) existingSuccess.remove();

                successMessage.className = 'success-message';
                form.insertBefore(successMessage, form.firstChild);
            }

            // Handle form submission with validation
            form.addEventListener('submit', function(e) {
                if (!handleFormSubmission('secure')) {
                    e.preventDefault();
                }
                // For Netlify forms, let the form submit normally if validation passes
            });

            // Enhanced submission functions for dual communication methods
            window.sendViaEmail = function() {
                // Performance tracking start
                const startTime = performance.now();
                const button = document.querySelector('.primary-submit');
                const originalText = button.innerHTML;

                // Add loading state for better UX
                button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Preparing...';
                button.disabled = true;
                button.setAttribute('aria-busy', 'true');

                try {
                    // Step 1: Validate Contact Information (MANDATORY)
                    const contactValidation = validateContactInformation();
                    if (!contactValidation.isValid) {
                        const buttonValidationMessage = document.getElementById('button-validation-message');
                        buttonValidationMessage.innerHTML = `
                            <i class="fas fa-exclamation-triangle"></i>
                            <strong>Contact Information Required</strong><br>
                            <small>Please complete the Contact Information section before sending via email.</small>
                            <div style="margin-top: 8px; font-size: 0.8rem;">
                                <i class="fas fa-lightbulb"></i> Required: Email and Name
                            </div>
                        `;
                        buttonValidationMessage.style.display = 'block';
                        buttonValidationMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        resetButtonState(button, originalText);
                        return;
                    }

                    // Step 2: Check Service Selection (OPTIONAL - no longer blocks submission)
                    const serviceValidation = validateServiceSelection();
                    // Services are now optional - proceed regardless

                    // Step 3: Full form validation
                    const validation = validateForm();
                    const buttonValidationMessage = document.getElementById('button-validation-message');

                    if (!validation.isValid) {
                        const missingFields = validation.errors.filter(error =>
                            !error.includes('Contact Information:') && !error.includes('Service Selection:')
                        );

                        if (missingFields.length > 0) {
                            buttonValidationMessage.innerHTML = `
                                <i class="fas fa-exclamation-triangle"></i>
                                <strong>Additional Information Needed</strong><br>
                                <small>Please complete: ${missingFields.join(', ')}</small>
                            `;
                            buttonValidationMessage.style.display = 'block';
                            buttonValidationMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                        resetButtonState(button, originalText);
                        return;
                    }

                    // Hide any previous validation message
                    buttonValidationMessage.style.display = 'none';

                    // Update button text
                    button.innerHTML = '<i class="fas fa-envelope"></i> Sending via Email...';

                    // Calculate budget and prepare form data
                    const calculator = budgetCalculator;
                    const calculation = calculator.calculate();
                    const name = document.getElementById('name').value;
                    const userEmail = document.getElementById('email').value;

                    // Generate form attachment
                    const formAttachment = generateFormAttachment();

                    // Generate project ID and certificate
                    const projectId = `EMW-${Date.now().toString(36).toUpperCase()}`;
                    const certificate = generateProfessionalCertificate({
                        name: name,
                        email: userEmail,
                        message: document.getElementById('message').value,
                        budget_estimate: calculation.total
                    });
    
                    // Create email with form data attached
                    const inquiryType = calculation.total > 0 ? 'Project Inquiry' : 'General Inquiry';
                    const subject = encodeURIComponent(`EmpathicWeb ${inquiryType} - ${name} (${projectId})`);
                    const emailBody = encodeURIComponent(`Dear EmpathicWeb Team,
    
        Please find attached the project inquiry form data for ${name}.
        
        Project ID: ${projectId}
        Certificate ID: ${certificate.certificateId}
        ${calculation.total > 0 ? `Estimated Budget: ${calculation.total.toLocaleString()} COP` : 'Inquiry Type: General consultation (services to be discussed)'}
        
        The form data is attached below for your reference:
        
        ${formAttachment}
        
        Best regards,
        ${name}
        ${userEmail}
        
        ---
        This email was generated by the EmpathicWeb Contact System
        For questions, contact: eduardgildardoperezfranco@empathicweb.online`);

                    // Send to business email with form data
                    const mailtoUrl = `mailto:eduardgildardoperezfranco@empathicweb.online?subject=${subject}&body=${emailBody}&cc=${userEmail}`;

                    // Store submission data for tracking
                    const processingTime = performance.now() - startTime;
                    const submissionData = {
                        type: 'email_user',
                        timestamp: new Date().toISOString(),
                        clientName: name,
                        clientEmail: userEmail,
                        projectId: projectId,
                        budgetEstimate: calculation.total || 0,
                        processingTime: processingTime,
                        userAgent: navigator.userAgent,
                        formCompletionRate: calculateFormCompletionRate(),
                        method: 'user_email_attachment'
                    };

                    localStorage.setItem('empathicweb_last_submission', JSON.stringify(submissionData));

                    // Track performance metrics
                    trackButtonPerformance('email', processingTime, true);

                    // Show preparation notification
                    showEnhancedNotification('üìß Email Prepared with Form Data', `
                        <div class="notification-content">
                            <div class="notification-header">
                                <i class="fas fa-envelope-open-text"></i>
                                <h3>Form Data Ready for Email</h3>
                                <small style="color: #27ae60;">Prepared in ${processingTime.toFixed(0)}ms</small>
                            </div>
                            <div class="notification-body">
                                <p>Your message has been prepared and is ready to be sent using your own email client for maximum privacy and control.</p>
                                <div class="submission-details">
                                    <div class="detail-item">
                                        <strong>Project ID:</strong> <span class="highlight">${projectId}</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Certificate ID:</strong> <span class="highlight">${certificate.certificateId}</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Sending to:</strong> <span class="highlight">eduardgildardoperezfranco@empathicweb.online</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>CC:</strong> <span class="highlight">${userEmail}</span>
                                    </div>
                                </div>
                                <div class="success-message" style="margin: 15px 0; padding: 12px; background: rgba(39, 174, 96, 0.1); border-radius: 6px; border-left: 3px solid #27ae60;">
                                    <strong><i class="fas fa-paperclip"></i> Form Data Included:</strong><br>
                                    ‚Ä¢ Contact information<br>
                                    ‚Ä¢ ${calculation.total > 0 ? 'Selected services and budget estimates' : 'General inquiry (services optional)'}<br>
                                    ‚Ä¢ Project details ${document.getElementById('message').value.trim() ? '(provided)' : '(optional - we\'ll discuss)'}<br>
                                    ‚Ä¢ Professional certificate attached
                                </div>
                                <div class="action-steps">
                                    <h4><i class="fas fa-clipboard-list"></i> Next Steps:</h4>
                                    <ol>
                                        <li>Click "Confirm and Open Email" to continue.</li>
                                        <li>Your default email application will open with the message pre-filled.</li>
                                        <li>Review the details and click send.</li>
                                        <li>A copy will be sent to your email address.</li>
                                    </ol>
                                </div>
                            </div>
                            <div class="notification-actions">
                                <button id="confirm-open-email-btn" class="btn-primary-action">
                                    <i class="fas fa-paper-plane"></i> Confirm and Open Email
                                </button>
                                <button id="cancel-submission-btn" class="btn-secondary-action">
                                    <i class="fas fa-times"></i> Cancel Submission
                                </button>
                            </div>
                        </div>
                    `);

                    document.getElementById('confirm-open-email-btn').addEventListener('click', function() { proceedToUserEmail(mailtoUrl); });
                    document.getElementById('cancel-submission-btn').addEventListener('click', closeNotification);

                    resetButtonState(button, originalText);

                } catch (error) {
                    console.error('Email preparation error:', error);
                    resetButtonState(button, originalText);
                    showSubmissionError('Failed to prepare email. Please try again.');
                }
            };

            // Enhanced WhatsApp submission function with user WhatsApp integration
            window.sendViaWhatsApp = function() {
                // Performance tracking start
                const startTime = performance.now();
                const button = document.querySelector('.whatsapp-submit');
                const originalText = button.innerHTML;

                // Add loading state for better UX
                button.innerHTML = '<i class="fab fa-whatsapp"></i> <i class="fas fa-spinner fa-spin"></i> Preparing...';
                button.disabled = true;
                button.setAttribute('aria-busy', 'true');

                try {
                    // Step 1: Validate Contact Information (MANDATORY)
                    const contactValidation = validateContactInformation();
                    if (!contactValidation.isValid) {
                        const buttonValidationMessage = document.getElementById('button-validation-message');
                        buttonValidationMessage.innerHTML = `
                            <i class="fas fa-exclamation-triangle"></i>
                            <strong>Contact Information Required</strong><br>
                            <small>Please complete the Contact Information section before sending via WhatsApp.</small>
                            <div style="margin-top: 8px; font-size: 0.8rem;">
                                <i class="fas fa-lightbulb"></i> Required: Email and Name (Phone/WhatsApp optional but recommended)
                            </div>
                        `;
                        buttonValidationMessage.style.display = 'block';
                        buttonValidationMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        resetButtonState(button, originalText);
                        return;
                    }

                    // Step 2: Check Service Selection (OPTIONAL - no longer blocks submission)
                    const serviceValidation = validateServiceSelection();
                    // Services are now optional - proceed regardless

                    // Step 3: Check if user has WhatsApp number
                    const userPhone = document.getElementById('phone').value.trim();
                    if (!userPhone) {
                        const buttonValidationMessage = document.getElementById('button-validation-message');
                        buttonValidationMessage.innerHTML = `
                            <i class="fas fa-exclamation-triangle"></i>
                            <strong>WhatsApp Number Required</strong><br>
                            <small>Please provide your WhatsApp phone number to send the form data.</small>
                            <div style="margin-top: 8px; font-size: 0.8rem;">
                                <i class="fas fa-lightbulb"></i> Include country code (e.g., +57 for Colombia)
                            </div>
                        `;
                        buttonValidationMessage.style.display = 'block';
                        buttonValidationMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        resetButtonState(button, originalText);
                        return;
                    }

                    // Step 4: Full form validation
                    const validation = validateForm();
                    const buttonValidationMessage = document.getElementById('button-validation-message');

                    if (!validation.isValid) {
                        const missingFields = validation.errors.filter(error =>
                            !error.includes('Contact Information:') && !error.includes('Service Selection:')
                        );

                        if (missingFields.length > 0) {
                            buttonValidationMessage.innerHTML = `
                                <i class="fas fa-exclamation-triangle"></i>
                                <strong>Additional Information Needed</strong><br>
                                <small>Please complete: ${missingFields.join(', ')}</small>
                            `;
                            buttonValidationMessage.style.display = 'block';
                            buttonValidationMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                        resetButtonState(button, originalText);
                        return;
                    }

                    // Hide any previous validation message
                    buttonValidationMessage.style.display = 'none';

                    // Update button text
                    button.innerHTML = '<i class="fab fa-whatsapp"></i> Sending via WhatsApp...';

                    // Calculate budget and prepare form data
                    const calculator = budgetCalculator;
                    const calculation = calculator.calculate();

                    const name = document.getElementById('name').value;
                    const email = document.getElementById('email').value;
                    const phone = userPhone;

                    // Generate form attachment content for WhatsApp
                    const formAttachment = generateFormAttachment();

                    // Generate project ID and certificate
                    const projectId = `EMW-WA-${Date.now().toString(36).toUpperCase()}`;
                    const certificate = generateProfessionalCertificate({
                        name: name,
                        email: email,
                        message: document.getElementById('message').value,
                        budget_estimate: calculation.total
                    });

                    // Create WhatsApp message with form data
                    const inquiryType = calculation.total > 0 ? 'PROJECT INQUIRY' : 'GENERAL INQUIRY';
                    const budgetInfo = calculation.total > 0 ? `*Estimated Budget:* ${calculation.total.toLocaleString()} COP` : `*Inquiry Type:* General consultation (services to be discussed)`;

                    const whatsappMessage = `*EMPATHICWEB ${inquiryType}*
 
Hello! I'm sending my project inquiry form data.
 
*Project ID:* ${projectId}
*Certificate ID:* ${certificate.certificateId}
${budgetInfo}
 
*üìã FORM DATA ATTACHED:*
 
${formAttachment}
 
---
*Please review my inquiry and contact me for next steps.*
*Expected response: Within 2-4 hours*
 
Best regards,
${name}
üìß ${email}
üì± ${phone}`;

                    // Send to business WhatsApp with form data
                    const whatsappUrl = `https://wa.me/573108005004?text=${encodeURIComponent(whatsappMessage)}`;

                    // Store submission data for tracking
                    const processingTime = performance.now() - startTime;
                    const submissionData = {
                        type: 'whatsapp_user',
                        timestamp: new Date().toISOString(),
                        clientName: name,
                        clientEmail: email,
                        clientPhone: phone,
                        projectId: projectId,
                        budgetEstimate: calculation.total || 0,
                        processingTime: processingTime,
                        userAgent: navigator.userAgent,
                        formCompletionRate: calculateFormCompletionRate(),
                        deviceType: getDeviceType(),
                        country: detectUserCountry(),
                        method: 'user_whatsapp_attachment'
                    };

                    localStorage.setItem('empathicweb_last_submission', JSON.stringify(submissionData));

                    // Track performance metrics
                    trackButtonPerformance('whatsapp', processingTime, true);

                    // Show preparation notification
                    showEnhancedNotification('üì± WhatsApp Prepared with Form Data', `
                        <div class="notification-content">
                            <div class="notification-header">
                                <i class="fab fa-whatsapp"></i>
                                <h3>Form Data Ready for WhatsApp</h3>
                                <small style="color: #27ae60;">Prepared in ${processingTime.toFixed(0)}ms</small>
                            </div>
                            <div class="notification-body">
                                <div class="submission-details">
                                    <div class="detail-item">
                                        <strong>Project ID:</strong> <span class="highlight">${projectId}</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Certificate ID:</strong> <span class="highlight">${certificate.certificateId}</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Sending to:</strong> <span class="highlight">+57 310 800 5004</span>
                                    </div>
                                    <div class="detail-item">
                                        <strong>Your Contact:</strong> <span class="highlight">${email} | ${phone}</span>
                                    </div>
                                </div>
                                <div class="success-message" style="margin: 15px 0; padding: 12px; background: rgba(39, 174, 96, 0.1); border-radius: 6px; border-left: 3px solid #27ae60;">
                                    <strong><i class="fas fa-paperclip"></i> Form Data Included:</strong><br>
                                    ‚Ä¢ Contact information<br>
                                    ‚Ä¢ ${calculation.total > 0 ? 'Selected services and budget breakdown' : 'General inquiry (services optional)'}<br>
                                    ‚Ä¢ Project details ${document.getElementById('message').value.trim() ? '(provided)' : '(optional - we\'ll discuss)'}<br>
                                    ‚Ä¢ Professional certificate and project ID
                                </div>
                                <div class="performance-insights" style="margin: 15px 0; padding: 10px; background: rgba(52, 152, 219, 0.1); border-radius: 6px; border-left: 3px solid #27ae60;">
                                    <strong><i class="fab fa-whatsapp"></i> WhatsApp Benefits:</strong><br>
                                    ‚Ä¢ Direct communication with your data<br>
                                    ‚Ä¢ Instant delivery confirmation<br>
                                    ‚Ä¢ Professional record keeping<br>
                                    ‚Ä¢ Quick response times (2-4 hours)
                                </div>
                                <div class="action-steps">
                                    <h4><i class="fas fa-clipboard-list"></i> Next Steps:</h4>
                                    <ol>
                                        <li><strong>WhatsApp opening...</strong></li>
                                        <li><strong>Review the message</strong> with your complete form data</li>
                                        <li><strong>Send to our WhatsApp</strong> for immediate response</li>
                                        <li><strong>Keep the conversation</strong> for project tracking</li>
                                    </ol>
                                </div>
                                <div class="professional-note">
                                    <i class="fas fa-comments"></i>
                                    <p><strong>Direct Business Communication:</strong> This WhatsApp message will be sent directly to our professional business line for immediate attention and response.</p>
                                </div>
                            </div>
                            <div class="notification-actions">
                                <button id="confirm-open-whatsapp-btn" class="btn-primary-action">
                                    <i class="fab fa-whatsapp"></i> Confirm and Open WhatsApp
                                </button>
                                <button id="cancel-whatsapp-submission-btn" class="btn-secondary-action">
                                    <i class="fas fa-times"></i> Cancel Submission
                                </button>
                            </div>
                        </div>
                    `);

                    document.getElementById('confirm-open-whatsapp-btn').addEventListener('click', function() { proceedToUserWhatsApp(whatsappUrl); });
                    document.getElementById('cancel-whatsapp-submission-btn').addEventListener('click', closeNotification);

                    resetButtonState(button, originalText);

                } catch (error) {
                    console.error('WhatsApp preparation error:', error);
                    resetButtonState(button, originalText);
                    showSubmissionError('Failed to prepare WhatsApp message. Please try again.');
                }
            };

            // Helper functions for enhanced submission
            function proceedToUserEmail(mailtoUrl) {
                closeNotification();

                // Open email client with form data
                window.location.href = mailtoUrl;

                // Show submission confirmation
                setTimeout(() => {
                    showSubmissionConfirmation('email', {
                        recipient: 'Your Email + eduardgildardoperezfranco@empathicweb.online',
                        expectedResponse: '24 hours',
                        submissionType: 'Email with Form Data',
                        nextSteps: [
                            'Your email client has opened with complete form data',
                            'Review the pre-filled message and attachments',
                            'Send the email to our team (CC\'d to yourself)',
                            'Keep this email for your project records',
                            'Our team will respond within 24 hours'
                        ]
                    });
                }, 500);
            }

            function proceedToUserWhatsApp(whatsappUrl) {
                closeNotification();

                // Open WhatsApp with form data
                window.open(whatsappUrl, '_blank');

                // Show submission confirmation
                setTimeout(() => {
                    showSubmissionConfirmation('whatsapp', {
                        recipient: 'Your WhatsApp',
                        expectedResponse: 'Immediate (self-delivery)',
                        submissionType: 'WhatsApp with Form Data',
                        nextSteps: [
                            'WhatsApp has opened with your complete form data',
                            'Review the pre-filled message with all details',
                            'Send the message to our business WhatsApp',
                            'Keep this conversation for project tracking',
                            'Our team will contact you within 2-4 hours'
                        ]
                    });
                }, 500);
            }

            function showSubmissionConfirmation(method, details) {
                showEnhancedNotification('‚úÖ Submission Successful!', `
                    <div class="notification-content success">
                        <div class="success-header">
                            <div class="success-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <h3>Your inquiry has been sent successfully!</h3>
                        </div>
                        
                        <div class="success-details">
                            <div class="detail-row">
                                <i class="fas fa-paper-plane"></i>
                                <div>
                                    <strong>Sent to:</strong> ${details.recipient}
                                </div>
                            </div>
                            <div class="detail-row">
                                <i class="fas fa-ticket-alt"></i>
                                <div>
                                    <strong>Submission Type:</strong> ${details.submissionType}
                                </div>
                            </div>
                            <div class="detail-row">
                                <i class="fas fa-clock"></i>
                                <div>
                                    <strong>Expected Response:</strong> ${details.expectedResponse}
                                </div>
                            </div>
                        </div>
                        
                        <div class="next-steps-section">
                            <h4><i class="fas fa-clipboard-list"></i> What happens next?</h4>
                            <ol class="next-steps-list">
                                ${details.nextSteps.map(step => `<li>${step}</li>`).join('')}
                            </ol>
                        </div>
                        
                        <div class="contact-reassurance">
                            <div class="contact-option">
                                <i class="fas fa-envelope"></i>
                                <div>
                                    <strong>Email:</strong> eduardgildardoperezfranco@empathicweb.online
                                </div>
                            </div>
                            <div class="contact-option">
                                <i class="fas fa-phone"></i>
                                <div>
                                    <strong>Direct Line:</strong> +57 310 800 5004
                                </div>
                            </div>
                            <div class="contact-option">
                                <i class="fab fa-whatsapp"></i>
                                <div>
                                    <strong>WhatsApp:</strong> +57 310 800 5004
                                </div>
                            </div>
                        </div>
                        
                        <div class="guarantee-badge">
                            <i class="fas fa-shield-alt"></i>
                            <span>30-Day Satisfaction Guarantee | 24h Response Guarantee</span>
                        </div>
                    </div>
                `);
                
                // Auto-close after 10 seconds but keep success state
                setTimeout(() => {
                    closeNotification();
                }, 10000);
            }

            // Enhanced notification system functions
            function showEnhancedNotification(title, content) {
                const notification = document.createElement('div');
                notification.className = 'notification-system';
                notification.innerHTML = `
                    <div class="notification-container">
                        ${content}
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // Show notification with animation
                setTimeout(() => {
                    notification.classList.add('show');
                }, 100);
                
                // Store reference for closing
                window.currentNotification = notification;
            }
            
            function closeNotification() {
                const notification = window.currentNotification;
                if (notification) {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                        window.currentNotification = null;
                    }, 300);
                }
            }
        });
    </script>
    <script src="translations.js"></script>
    <script src="Script.js"></script>
</body>
</html>
